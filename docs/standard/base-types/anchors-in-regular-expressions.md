---
title: .NET 正则表达式中的定位点
description: 了解如何在正则表达式模式中使用定位点。
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- atomic zero-width assertions
- regular expressions, anchors
- regular expressions, atomic zero-width assertions
- anchors, in regular expressions
- metacharacters, atomic zero-width assertions
- metacharacters, anchors
- .NET regular expressions, anchors
- .NET regular expressions, atomic zero-width assertions
ms.assetid: 336391f6-2614-499b-8b1b-07a6837108a7
ms.openlocfilehash: a6330eebbc69b9a3877a99a4373810d5a124c570
ms.sourcegitcommit: 4a938327bad8b2e20cabd0f46a9dc50882596f13
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/28/2020
ms.locfileid: "92889161"
---
# <a name="anchors-in-regular-expressions"></a><span data-ttu-id="e5078-103">正则表达式中的定位点</span><span class="sxs-lookup"><span data-stu-id="e5078-103">Anchors in Regular Expressions</span></span>
<span data-ttu-id="e5078-104">定位点（原子零宽度断言）指定字符串中必须出现匹配的位置。</span><span class="sxs-lookup"><span data-stu-id="e5078-104">Anchors, or atomic zero-width assertions, specify a position in the string where a match must occur.</span></span> <span data-ttu-id="e5078-105">在搜索表达式中使用定位点时，正则表达式引擎不在字符串中前进或使用字符，它仅在指定位置查找匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-105">When you use an anchor in your search expression, the regular expression engine does not advance through the string or consume characters; it looks for a match in the specified position only.</span></span> <span data-ttu-id="e5078-106">例如， `^` 指定必须从行或字符串的开头开始匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-106">For example, `^` specifies that the match must start at the beginning of a line or string.</span></span> <span data-ttu-id="e5078-107">因此，正则表达式 `^http:` 仅当 "http:" 出现在行开头时才与之匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-107">Therefore, the regular expression `^http:` matches "http:" only when it occurs at the beginning of a line.</span></span> <span data-ttu-id="e5078-108">下表列出了 .NET 中正则表达式支持的定位点。</span><span class="sxs-lookup"><span data-stu-id="e5078-108">The following table lists the anchors supported by the regular expressions in .NET.</span></span>  
  
|<span data-ttu-id="e5078-109">定位点</span><span class="sxs-lookup"><span data-stu-id="e5078-109">Anchor</span></span>|<span data-ttu-id="e5078-110">描述</span><span class="sxs-lookup"><span data-stu-id="e5078-110">Description</span></span>|  
|------------|-----------------|  
|`^`|<span data-ttu-id="e5078-111">默认情况下，匹配必须出现在字符串的开头；在多行模式中，必须出现在该行的开头。</span><span class="sxs-lookup"><span data-stu-id="e5078-111">By default, the match must occur at the beginning of the string; in multiline mode, it must occur at the beginning of the line.</span></span> <span data-ttu-id="e5078-112">有关详细信息，请参阅 [字符串或行的开头](#start-of-string-or-line-)。</span><span class="sxs-lookup"><span data-stu-id="e5078-112">For more information, see [Start of String or Line](#start-of-string-or-line-).</span></span>|  
|`$`|<span data-ttu-id="e5078-113">默认情况下，匹配必须出现在字符串的末尾，或在字符串末尾的 `\n` 之前；在多行模式中，必须出现在该行的末尾，或在该行末尾的 `\n` 之前。</span><span class="sxs-lookup"><span data-stu-id="e5078-113">By default, the match must occur at the end of the string or before `\n` at the end of the string; in multiline mode, it must occur at the end of the line or before `\n` at the end of the line.</span></span> <span data-ttu-id="e5078-114">有关详细信息，请参阅 [字符串或行的末尾](#end-of-string-or-line-)。</span><span class="sxs-lookup"><span data-stu-id="e5078-114">For more information, see [End of String or Line](#end-of-string-or-line-).</span></span>|  
|`\A`|<span data-ttu-id="e5078-115">匹配必须仅出现在字符串的开头位置（无多行支持）。</span><span class="sxs-lookup"><span data-stu-id="e5078-115">The match must occur at the beginning of the string only (no multiline support).</span></span> <span data-ttu-id="e5078-116">有关详细信息，请参阅 [仅字符串的开头](#start-of-string-only-a)。</span><span class="sxs-lookup"><span data-stu-id="e5078-116">For more information, see [Start of String Only](#start-of-string-only-a).</span></span>|  
|`\Z`|<span data-ttu-id="e5078-117">匹配必须出现在字符串的末尾，或出现在字符串末尾的 `\n` 之前。</span><span class="sxs-lookup"><span data-stu-id="e5078-117">The match must occur at the end of the string, or before `\n` at the end of the string.</span></span> <span data-ttu-id="e5078-118">有关详细信息，请参阅 [字符串的末尾或结束换行之前](#end-of-string-or-before-ending-newline-z)。</span><span class="sxs-lookup"><span data-stu-id="e5078-118">For more information, see [End of String or Before Ending Newline](#end-of-string-or-before-ending-newline-z).</span></span>|  
|`\z`|<span data-ttu-id="e5078-119">匹配必须仅出现在字符串的末尾。</span><span class="sxs-lookup"><span data-stu-id="e5078-119">The match must occur at the end of the string only.</span></span> <span data-ttu-id="e5078-120">有关详细信息，请参阅 [仅字符串的末尾](#end-of-string-only-z)。</span><span class="sxs-lookup"><span data-stu-id="e5078-120">For more information, see [End of String Only](#end-of-string-only-z).</span></span>|  
|`\G`|<span data-ttu-id="e5078-121">匹配必须从上一个匹配结束的位置开始。</span><span class="sxs-lookup"><span data-stu-id="e5078-121">The match must start at the position where the previous match ended.</span></span> <span data-ttu-id="e5078-122">有关详细信息，请参阅 [连续匹配](#contiguous-matches-g)。</span><span class="sxs-lookup"><span data-stu-id="e5078-122">For more information, see [Contiguous Matches](#contiguous-matches-g).</span></span>|  
|`\b`|<span data-ttu-id="e5078-123">匹配必须出现在字边界。</span><span class="sxs-lookup"><span data-stu-id="e5078-123">The match must occur on a word boundary.</span></span> <span data-ttu-id="e5078-124">有关详细信息，请参阅 [字边界](#word-boundary-b)。</span><span class="sxs-lookup"><span data-stu-id="e5078-124">For more information, see [Word Boundary](#word-boundary-b).</span></span>|  
|`\B`|<span data-ttu-id="e5078-125">匹配不得出现在字边界上。</span><span class="sxs-lookup"><span data-stu-id="e5078-125">The match must not occur on a word boundary.</span></span> <span data-ttu-id="e5078-126">有关详细信息，请参阅 [非字边界](#non-word-boundary-b)。</span><span class="sxs-lookup"><span data-stu-id="e5078-126">For more information, see [Non-Word Boundary](#non-word-boundary-b).</span></span>|  

## <a name="start-of-string-or-line-"></a><span data-ttu-id="e5078-127">字符串或行的开头：^</span><span class="sxs-lookup"><span data-stu-id="e5078-127">Start of String or Line: ^</span></span>  
 <span data-ttu-id="e5078-128">默认情况下，`^` 定位点指定以下模式必须从字符串的第一个字符位置开始。</span><span class="sxs-lookup"><span data-stu-id="e5078-128">By default, the `^` anchor specifies that the following pattern must begin at the first character position of the string.</span></span> <span data-ttu-id="e5078-129">如果结合使用 `^` 与 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项（请参阅[正则表达式选项](regular-expression-options.md)），匹配必须出现在每行的开头。</span><span class="sxs-lookup"><span data-stu-id="e5078-129">If you use `^` with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option (see [Regular Expression Options](regular-expression-options.md)), the match must occur at the beginning of each line.</span></span>  
  
 <span data-ttu-id="e5078-130">以下示例在正则表达式中使用 `^` 定位点，可提取有关某些职业棒球队存在年限的信息。</span><span class="sxs-lookup"><span data-stu-id="e5078-130">The following example uses the `^` anchor in a regular expression that extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="e5078-131">该示例调用 <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> 方法的两个重载：</span><span class="sxs-lookup"><span data-stu-id="e5078-131">The example calls two overloads of the <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> method:</span></span>  
  
- <span data-ttu-id="e5078-132">调用 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29> 重载仅找到输入字符串中与正则表达式模式匹配的第一个子字符串。</span><span class="sxs-lookup"><span data-stu-id="e5078-132">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29> overload finds only the first substring in the input string that matches the regular expression pattern.</span></span>  
  
- <span data-ttu-id="e5078-133">调用 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29> 重载，并将 `options` 参数设置为 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 可找到所有五个子字符串。</span><span class="sxs-lookup"><span data-stu-id="e5078-133">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29> overload with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> finds all five substrings.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/startofstring1.cs#1)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/startofstring1.vb#1)]  
  
 <span data-ttu-id="e5078-134">正则表达式模式 `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="e5078-134">The regular expression pattern `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="e5078-135">模式</span><span class="sxs-lookup"><span data-stu-id="e5078-135">Pattern</span></span>|<span data-ttu-id="e5078-136">描述</span><span class="sxs-lookup"><span data-stu-id="e5078-136">Description</span></span>|  
|-------------|-----------------|  
|`^`|<span data-ttu-id="e5078-137">从输入字符串的开头开始匹配（如果在调用该方法时选择了 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项，则从行的开头开始匹配）。</span><span class="sxs-lookup"><span data-stu-id="e5078-137">Begin the match at the beginning of the input string (or the beginning of the line if the method is called with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option).</span></span>|  
|`((\w+(\s?)){2,}`|<span data-ttu-id="e5078-138">匹配至少两次后跟零个或一个空格的一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-138">Match one or more word characters followed either by zero or by one space at least two times.</span></span> <span data-ttu-id="e5078-139">这是第一个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-139">This is the first capturing group.</span></span> <span data-ttu-id="e5078-140">此表达式还定义第二个和第三个捕获组：第二个捕获组由捕获的单词组成，第三个捕获组由捕获的空格组成。</span><span class="sxs-lookup"><span data-stu-id="e5078-140">This expression also defines a second and third capturing group: The second consists of the captured word, and the third consists of the captured white space.</span></span>|  
|`,\s`|<span data-ttu-id="e5078-141">匹配后跟一个空白字符的逗号。</span><span class="sxs-lookup"><span data-stu-id="e5078-141">Match a comma followed by a white-space character.</span></span>|  
|`(\w+\s\w+)`|<span data-ttu-id="e5078-142">匹配后跟一个空格再后跟一个或多个单词字符的一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-142">Match one or more word characters followed by a space, followed by one or more word characters.</span></span> <span data-ttu-id="e5078-143">这是第四个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-143">This is the fourth capturing group.</span></span>|  
|`,`|<span data-ttu-id="e5078-144">匹配逗号。</span><span class="sxs-lookup"><span data-stu-id="e5078-144">Match a comma.</span></span>|  
|`\s\d{4}`|<span data-ttu-id="e5078-145">匹配后跟四个十进制数字的空格。</span><span class="sxs-lookup"><span data-stu-id="e5078-145">Match a space followed by four decimal digits.</span></span>|  
|<code>(-(\d{4}&#124;present))?</code>|<span data-ttu-id="e5078-146">匹配连字符后跟四个十进制数字或字符串“present”的零或一个匹配项。</span><span class="sxs-lookup"><span data-stu-id="e5078-146">Match zero or one occurrence of a hyphen followed by four decimal digits or the string "present".</span></span> <span data-ttu-id="e5078-147">这是第六个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-147">This is the sixth capturing group.</span></span> <span data-ttu-id="e5078-148">还包括第七个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-148">It also includes a seventh capturing group.</span></span>|  
|`,?`|<span data-ttu-id="e5078-149">匹配逗号的零个或一个匹配项。</span><span class="sxs-lookup"><span data-stu-id="e5078-149">Match zero or one occurrence of a comma.</span></span>|  
|<code>(\s\d{4}(-(\d{4}&#124;present))?,?)+</code>|<span data-ttu-id="e5078-150">匹配以下内容的一个或多个匹配项：空格、四个十进制数字、连字符后跟四个十进制数字或字符串“present”的零个或一个匹配项以及零个或一个逗号。</span><span class="sxs-lookup"><span data-stu-id="e5078-150">Match one or more occurrences of the following: a space, four decimal digits, zero or one occurrence of a hyphen followed by four decimal digits or the string "present", and zero or one comma.</span></span> <span data-ttu-id="e5078-151">这是第五个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-151">This is the fifth capturing group.</span></span>|

## <a name="end-of-string-or-line-"></a><span data-ttu-id="e5078-152">字符串或行的末尾：$</span><span class="sxs-lookup"><span data-stu-id="e5078-152">End of String or Line: $</span></span>  
 <span data-ttu-id="e5078-153">`$` 定位点指定前面的模式必须出现在输入字符串的末尾，或出现在输入字符串末尾的 `\n` 之前。</span><span class="sxs-lookup"><span data-stu-id="e5078-153">The `$` anchor specifies that the preceding pattern must occur at the end of the input string, or before `\n` at the end of the input string.</span></span>  
  
 <span data-ttu-id="e5078-154">如果结合使用 `$` 与 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项，则匹配也可能出现在行的末尾。</span><span class="sxs-lookup"><span data-stu-id="e5078-154">If you use `$` with the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option, the match can also occur at the end of a line.</span></span> <span data-ttu-id="e5078-155">请注意， `$` 与 `\n` 匹配但与 `\r\n` （回车符和换行符的组合，或称 CR/LF）不匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-155">Note that `$` matches `\n` but does not match `\r\n` (the combination of carriage return and newline characters, or CR/LF).</span></span> <span data-ttu-id="e5078-156">若要匹配 CR/LF 字符组合，请将 `\r?$` 包括到正则表达式模式中。</span><span class="sxs-lookup"><span data-stu-id="e5078-156">To match the CR/LF character combination, include `\r?$` in the regular expression pattern.</span></span>  
  
 <span data-ttu-id="e5078-157">以下示例将 `$` 定位点添加到 [字符串或行的开头](#start-of-string-or-line-) 部分的示例中所使用的正则表达式模式中。</span><span class="sxs-lookup"><span data-stu-id="e5078-157">The following example adds the `$` anchor to the regular expression pattern used in the example in the [Start of String or Line](#start-of-string-or-line-) section.</span></span> <span data-ttu-id="e5078-158">配合包括五行文本的原始输入字符串使用时， <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> 方法找不到匹配项，因为第一行的末尾与 `$` 模式不匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-158">When used with the original input string, which includes five lines of text, the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> method is unable to find a match, because the end of the first line does not match the `$` pattern.</span></span> <span data-ttu-id="e5078-159">当原始输入字符串被拆分为字符串数组时， <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> 方法会成功匹配五行中的每一行。</span><span class="sxs-lookup"><span data-stu-id="e5078-159">When the original input string is split into a string array, the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%29?displayProperty=nameWithType> method succeeds in matching each of the five lines.</span></span> <span data-ttu-id="e5078-160">如果调用 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> 方法时将 `options` 参数设置为 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>，则找不到匹配项，因为正则表达式模式不考虑回车符元素 (\u+000D)。</span><span class="sxs-lookup"><span data-stu-id="e5078-160">When the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method is called with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType>, no matches are found because the regular expression pattern does not account for the carriage return element (\u+000D).</span></span> <span data-ttu-id="e5078-161">但是，如果通过用将 `$` 替换成 `\r?$`修改了正则表达式模式，则调用 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> 方法并将 `options` 参数设置为 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 将再次找到五个匹配项。</span><span class="sxs-lookup"><span data-stu-id="e5078-161">However, when the regular expression pattern is modified by replacing `$` with `\r?$`, calling the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method with the `options` parameter set to <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> again finds five matches.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring1.cs#2)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring1.vb#2)]

## <a name="start-of-string-only-a"></a><span data-ttu-id="e5078-162">仅字符串的开头：\A</span><span class="sxs-lookup"><span data-stu-id="e5078-162">Start of String Only: \A</span></span>  
 <span data-ttu-id="e5078-163">`\A` 定位点指定匹配必须出现在输入字符串的开头。</span><span class="sxs-lookup"><span data-stu-id="e5078-163">The `\A` anchor specifies that a match must occur at the beginning of the input string.</span></span> <span data-ttu-id="e5078-164">它等同于 `^` 定位点，只不过 `\A` 忽略了 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项。</span><span class="sxs-lookup"><span data-stu-id="e5078-164">It is identical to the `^` anchor, except that `\A` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="e5078-165">因此，在多行的输入字符串中，它只能匹配第一行的开头。</span><span class="sxs-lookup"><span data-stu-id="e5078-165">Therefore, it can only match the start of the first line in a multiline input string.</span></span>  
  
 <span data-ttu-id="e5078-166">以下示例与 `^` 和 `$` 定位点的示例类似。</span><span class="sxs-lookup"><span data-stu-id="e5078-166">The following example is similar to the examples for the `^` and `$` anchors.</span></span> <span data-ttu-id="e5078-167">它在正则表达式中使用 `\A` 定位点，可提取有关某些职业棒球队存在年限的信息。</span><span class="sxs-lookup"><span data-stu-id="e5078-167">It uses the `\A` anchor in a regular expression that extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="e5078-168">输入字符串包括五行。</span><span class="sxs-lookup"><span data-stu-id="e5078-168">The input string includes five lines.</span></span> <span data-ttu-id="e5078-169">调用 <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> 方法仅找到输入字符串中与正则表达式模式匹配的第一个子字符串。</span><span class="sxs-lookup"><span data-stu-id="e5078-169">The call to the <xref:System.Text.RegularExpressions.Regex.Matches%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method finds only the first substring in the input string that matches the regular expression pattern.</span></span> <span data-ttu-id="e5078-170">如示例所示， <xref:System.Text.RegularExpressions.RegexOptions.Multiline> 选项不起作用。</span><span class="sxs-lookup"><span data-stu-id="e5078-170">As the example shows, the <xref:System.Text.RegularExpressions.RegexOptions.Multiline> option has no effect.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/startofstring2.cs#3)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/startofstring2.vb#3)]

## <a name="end-of-string-or-before-ending-newline-z"></a><span data-ttu-id="e5078-171">字符串末尾或结束换行之前：\Z</span><span class="sxs-lookup"><span data-stu-id="e5078-171">End of String or Before Ending Newline: \Z</span></span>  
 <span data-ttu-id="e5078-172">`\Z` 定位点指定匹配项必须出现在输入字符串的末尾，或出现在输入字符串末尾的 `\n` 之前。</span><span class="sxs-lookup"><span data-stu-id="e5078-172">The `\Z` anchor specifies that a match must occur at the end of the input string, or before `\n` at the end of the input string.</span></span> <span data-ttu-id="e5078-173">它等同于 `$` 定位点，只不过 `\Z` 忽略了 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项。</span><span class="sxs-lookup"><span data-stu-id="e5078-173">It is identical to the `$` anchor, except that `\Z` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="e5078-174">因此，在多行字符串中，它只能匹配最后一行的末尾，或 `\n`前的最后一行。</span><span class="sxs-lookup"><span data-stu-id="e5078-174">Therefore, in a multiline string, it can only match the end of the last line, or the last line before `\n`.</span></span>  
  
 <span data-ttu-id="e5078-175">请注意， `\Z` 与 `\n` 匹配但与 `\r\n` （CR/LF 字符组合）不匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-175">Note that `\Z` matches `\n` but does not match `\r\n` (the CR/LF character combination).</span></span> <span data-ttu-id="e5078-176">若要匹配 CR/LF，请将 `\r?\Z` 包括到正则表达式模式中。</span><span class="sxs-lookup"><span data-stu-id="e5078-176">To match CR/LF, include `\r?\Z` in the regular expression pattern.</span></span>  
  
 <span data-ttu-id="e5078-177">以下示例在正则表达式中使用 `\Z` 定位点，与 [字符串或行的开头](#start-of-string-or-line-) 部分的示例类似，可提取有关某些职业棒球队存在年限的信息。</span><span class="sxs-lookup"><span data-stu-id="e5078-177">The following example uses the `\Z` anchor in a regular expression that is similar to the example in the [Start of String or Line](#start-of-string-or-line-) section, which extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="e5078-178">正则表达式 `\r?\Z` 中的子表达式 `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\Z` 匹配字符串的末尾，也匹配以 `\n` 或 `\r\n`结尾的字符串。</span><span class="sxs-lookup"><span data-stu-id="e5078-178">The subexpression `\r?\Z` in the regular expression `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\Z` matches the end of a string, and also matches a string that ends with `\n` or `\r\n`.</span></span> <span data-ttu-id="e5078-179">因此，数组中的每个元素都与正则表达式模式匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-179">As a result, each element in the array matches the regular expression pattern.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring2.cs#4)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring2.vb#4)]

## <a name="end-of-string-only-z"></a><span data-ttu-id="e5078-180">仅字符串末尾：\z</span><span class="sxs-lookup"><span data-stu-id="e5078-180">End of String Only: \z</span></span>  
 <span data-ttu-id="e5078-181">`\z` 定位点指定匹配必须出现在输入字符串末尾。</span><span class="sxs-lookup"><span data-stu-id="e5078-181">The `\z` anchor specifies that a match must occur at the end of the input string.</span></span> <span data-ttu-id="e5078-182">与 `$` 语言元素类似， `\z` 忽略了 <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> 选项。</span><span class="sxs-lookup"><span data-stu-id="e5078-182">Like the `$` language element, `\z` ignores the <xref:System.Text.RegularExpressions.RegexOptions.Multiline?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="e5078-183">与 `\Z` 语言元素不同， `\z` 不匹配字符串末尾的 `\n` 字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-183">Unlike the `\Z` language element, `\z` does not match a `\n` character at the end of a string.</span></span> <span data-ttu-id="e5078-184">因此，它只能匹配输入字符串的最后一行。</span><span class="sxs-lookup"><span data-stu-id="e5078-184">Therefore, it can only match the last line of the input string.</span></span>  
  
 <span data-ttu-id="e5078-185">以下示例在正则表达式中使用 `\z` 定位点，与上一部分的示例中使用的定位点在其他方面相同，用于提取有关某些职业棒球队存在年限的信息。</span><span class="sxs-lookup"><span data-stu-id="e5078-185">The following example uses the `\z` anchor in a regular expression that is otherwise identical to the example in the previous section, which extracts information about the years during which some professional baseball teams existed.</span></span> <span data-ttu-id="e5078-186">此示例尝试使用正则表达式模式 `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\z`匹配字符串数组中五个元素的每一个。</span><span class="sxs-lookup"><span data-stu-id="e5078-186">The example tries to match each of five elements in a string array with the regular expression pattern `^((\w+(\s?)){2,}),\s(\w+\s\w+),(\s\d{4}(-(\d{4}|present))?,?)+\r?\z`.</span></span> <span data-ttu-id="e5078-187">两个字符串以回车符和换行符结尾，一个字符串以换行符结尾，另外两个既不以回车符也不以换行符结尾。</span><span class="sxs-lookup"><span data-stu-id="e5078-187">Two of the strings end with carriage return and line feed characters, one ends with a line feed character, and two end with neither a carriage return nor a line feed character.</span></span> <span data-ttu-id="e5078-188">如输出所示，只有不包含回车符或换行符的字符串与模式匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-188">As the output shows, only the strings without a carriage return or line feed character match the pattern.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/endofstring3.cs#5)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/endofstring3.vb#5)]

## <a name="contiguous-matches-g"></a><span data-ttu-id="e5078-189">连续匹配：\G</span><span class="sxs-lookup"><span data-stu-id="e5078-189">Contiguous Matches: \G</span></span>  
 <span data-ttu-id="e5078-190">`\G` 定位符指定匹配必须出现在上一个匹配结束的点。</span><span class="sxs-lookup"><span data-stu-id="e5078-190">The `\G` anchor specifies that a match must occur at the point where the previous match ended.</span></span> <span data-ttu-id="e5078-191">将此定位点与 <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> 或 <xref:System.Text.RegularExpressions.Match.NextMatch%2A?displayProperty=nameWithType> 方法配合使用时，它可确保所有匹配项是连续的。</span><span class="sxs-lookup"><span data-stu-id="e5078-191">When you use this anchor with the <xref:System.Text.RegularExpressions.Regex.Matches%2A?displayProperty=nameWithType> or <xref:System.Text.RegularExpressions.Match.NextMatch%2A?displayProperty=nameWithType> method, it ensures that all matches are contiguous.</span></span>  
  
 <span data-ttu-id="e5078-192">以下示例使用正则表达式从一个以逗号分隔的字符串中提取啮齿类动物的名称。</span><span class="sxs-lookup"><span data-stu-id="e5078-192">The following example uses a regular expression to extract the names of rodent species from a comma-delimited string.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/contiguous1.cs#6)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/contiguous1.vb#6)]  
  
 <span data-ttu-id="e5078-193">正则表达式 `\G(\w+\s?\w*),?` 可以解释为下表中所示内容。</span><span class="sxs-lookup"><span data-stu-id="e5078-193">The regular expression `\G(\w+\s?\w*),?` is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="e5078-194">模式</span><span class="sxs-lookup"><span data-stu-id="e5078-194">Pattern</span></span>|<span data-ttu-id="e5078-195">描述</span><span class="sxs-lookup"><span data-stu-id="e5078-195">Description</span></span>|  
|-------------|-----------------|  
|`\G`|<span data-ttu-id="e5078-196">从上次匹配结束的位置开始。</span><span class="sxs-lookup"><span data-stu-id="e5078-196">Begin where the last match ended.</span></span>|  
|`\w+`|<span data-ttu-id="e5078-197">匹配一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-197">Match one or more word characters.</span></span>|  
|`\s?`|<span data-ttu-id="e5078-198">匹配零个或一个空格。</span><span class="sxs-lookup"><span data-stu-id="e5078-198">Match zero or one space.</span></span>|  
|`\w*`|<span data-ttu-id="e5078-199">匹配零个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-199">Match zero or more word characters.</span></span>|  
|`(\w+\s?\w*)`|<span data-ttu-id="e5078-200">匹配后跟零个或一个空格再后跟零个或多个单词字符的一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-200">Match one or more word characters followed by zero or one space, followed by zero or more word characters.</span></span> <span data-ttu-id="e5078-201">这是第一个捕获组。</span><span class="sxs-lookup"><span data-stu-id="e5078-201">This is the first capturing group.</span></span>|  
|`,?`|<span data-ttu-id="e5078-202">匹配文本逗号字符的零个或一个匹配项。</span><span class="sxs-lookup"><span data-stu-id="e5078-202">Match zero or one occurrence of a literal comma character.</span></span>|

## <a name="word-boundary-b"></a><span data-ttu-id="e5078-203">字边界：\b</span><span class="sxs-lookup"><span data-stu-id="e5078-203">Word Boundary: \b</span></span>  
 <span data-ttu-id="e5078-204">`\b` 定位符指定匹配必须出现单词字符（ `\w` 语言元素）和非单词字符（ `\W` 语言元素）之间的边界上。</span><span class="sxs-lookup"><span data-stu-id="e5078-204">The `\b` anchor specifies that the match must occur on a boundary between a word character (the `\w` language element) and a non-word character (the `\W` language element).</span></span> <span data-ttu-id="e5078-205">单词字符包括字母数字字符和下划线；非单词字符包括不为字母数字字符或下划线的任何字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-205">Word characters consist of alphanumeric characters and underscores; a non-word character is any character that is not alphanumeric or an underscore.</span></span> <span data-ttu-id="e5078-206">（有关详细信息，请参阅[字符类](character-classes-in-regular-expressions.md)。）匹配也可以出现在字符串开头或结尾处的单词边界上。</span><span class="sxs-lookup"><span data-stu-id="e5078-206">(For more information, see [Character Classes](character-classes-in-regular-expressions.md).) The match may also occur on a word boundary at the beginning or end of the string.</span></span>  
  
 <span data-ttu-id="e5078-207">`\b` 定位点经常用于确保子表达式与整个单词而不仅与单词的开头或结尾匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-207">The `\b` anchor is frequently used to ensure that a subexpression matches an entire word instead of just the beginning or end of a word.</span></span> <span data-ttu-id="e5078-208">以下示例中的正则表达式 `\bare\w*\b` 阐释了这种用法。</span><span class="sxs-lookup"><span data-stu-id="e5078-208">The regular expression `\bare\w*\b` in the following example illustrates this usage.</span></span> <span data-ttu-id="e5078-209">它与任何以子字符串“are”开头的单词匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-209">It matches any word that begins with the substring "are".</span></span> <span data-ttu-id="e5078-210">该示例的输出也阐释了 `\b` 与输入字符串的开头和结尾均匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-210">The output from the example also illustrates that `\b` matches both the beginning and the end of the input string.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/word1.cs#7)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/word1.vb#7)]  
  
 <span data-ttu-id="e5078-211">正则表达式模式可以解释为下表中所示内容。</span><span class="sxs-lookup"><span data-stu-id="e5078-211">The regular expression pattern is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="e5078-212">模式</span><span class="sxs-lookup"><span data-stu-id="e5078-212">Pattern</span></span>|<span data-ttu-id="e5078-213">描述</span><span class="sxs-lookup"><span data-stu-id="e5078-213">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="e5078-214">在单词边界处开始匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-214">Begin the match at a word boundary.</span></span>|  
|`are`|<span data-ttu-id="e5078-215">匹配子字符串“are”。</span><span class="sxs-lookup"><span data-stu-id="e5078-215">Match the substring "are".</span></span>|  
|`\w*`|<span data-ttu-id="e5078-216">匹配零个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-216">Match zero or more word characters.</span></span>|  
|`\b`|<span data-ttu-id="e5078-217">在单词边界处结束匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-217">End the match at a word boundary.</span></span>|  

## <a name="non-word-boundary-b"></a><span data-ttu-id="e5078-218">非字边界：\B</span><span class="sxs-lookup"><span data-stu-id="e5078-218">Non-Word Boundary: \B</span></span>  
 <span data-ttu-id="e5078-219">`\B` 定位符指定匹配不得出现在单词边界上。</span><span class="sxs-lookup"><span data-stu-id="e5078-219">The `\B` anchor specifies that the match must not occur on a word boundary.</span></span> <span data-ttu-id="e5078-220">它与 `\b` 定位点截然相反。</span><span class="sxs-lookup"><span data-stu-id="e5078-220">It is the opposite of the `\b` anchor.</span></span>  
  
 <span data-ttu-id="e5078-221">以下示例使用 `\B` 定位点定位单词中的子字符串“qu”匹配项。</span><span class="sxs-lookup"><span data-stu-id="e5078-221">The following example uses the `\B` anchor to locate occurrences of the substring "qu" in a word.</span></span> <span data-ttu-id="e5078-222">正则表达式模式 `\Bqu\w+` 与以“qu”开头（但“qu”并不位于单词之首）且延续到单词末尾的子字符串匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-222">The regular expression pattern `\Bqu\w+` matches a substring that begins with a "qu" that does not start a word and that continues to the end of the word.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Assertions#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.assertions/cs/nonword1.cs#8)]
 [!code-vb[Conceptual.RegEx.Language.Assertions#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.assertions/vb/nonword1.vb#8)]  
  
 <span data-ttu-id="e5078-223">正则表达式模式可以解释为下表中所示内容。</span><span class="sxs-lookup"><span data-stu-id="e5078-223">The regular expression pattern is interpreted as shown in the following table.</span></span>  
  
|<span data-ttu-id="e5078-224">模式</span><span class="sxs-lookup"><span data-stu-id="e5078-224">Pattern</span></span>|<span data-ttu-id="e5078-225">描述</span><span class="sxs-lookup"><span data-stu-id="e5078-225">Description</span></span>|  
|-------------|-----------------|  
|`\B`|<span data-ttu-id="e5078-226">不在单词边界处开始匹配。</span><span class="sxs-lookup"><span data-stu-id="e5078-226">Do not begin the match at a word boundary.</span></span>|  
|`qu`|<span data-ttu-id="e5078-227">匹配子字符串“qu”。</span><span class="sxs-lookup"><span data-stu-id="e5078-227">Match the substring "qu".</span></span>|  
|`\w+`|<span data-ttu-id="e5078-228">匹配一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="e5078-228">Match one or more word characters.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="e5078-229">请参阅</span><span class="sxs-lookup"><span data-stu-id="e5078-229">See also</span></span>

- [<span data-ttu-id="e5078-230">正则表达式语言 - 快速参考</span><span class="sxs-lookup"><span data-stu-id="e5078-230">Regular Expression Language - Quick Reference</span></span>](regular-expression-language-quick-reference.md)
- [<span data-ttu-id="e5078-231">正则表达式选项</span><span class="sxs-lookup"><span data-stu-id="e5078-231">Regular Expression Options</span></span>](regular-expression-options.md)
