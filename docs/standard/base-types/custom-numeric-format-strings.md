---
title: 自定义数字格式字符串
description: 了解如何创建自定义数字格式字符串，以便在 .NET 中设置数值数据的格式。 自定义数字格式字符串有一个或多个自定义数值说明符。
ms.date: 06/25/2018
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- numeric format strings [.NET Framework]
- formatting [.NET Framework], numbers
- format strings
- custom numeric format strings
- numbers [.NET Framework], formatting
- format specifiers, numeric
- formatting numbers [.NET Framework]
- format specifiers, custom numeric format strings
ms.assetid: 6f74fd32-6c6b-48ed-8241-3c2b86dea5f4
ms.openlocfilehash: 7cf61746e483fe5aa2ee5e3421219240e8700172
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/15/2020
ms.locfileid: "90541574"
---
# <a name="custom-numeric-format-strings"></a><span data-ttu-id="deff8-104">自定义数字格式字符串</span><span class="sxs-lookup"><span data-stu-id="deff8-104">Custom numeric format strings</span></span>

<span data-ttu-id="deff8-105">你可以创建自定义数字格式字符串，这种字符串由一个或多个自定义数字说明符组成，用于定义设置数值数据格式的方式。</span><span class="sxs-lookup"><span data-stu-id="deff8-105">You can create a custom numeric format string, which consists of one or more custom numeric specifiers, to define how to format numeric data.</span></span> <span data-ttu-id="deff8-106">自定义数字格式字符串是任何不属于 [标准数字格式字符串](standard-numeric-format-strings.md)的格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-106">A custom numeric format string is any format string that is not a [standard numeric format string](standard-numeric-format-strings.md).</span></span>

<span data-ttu-id="deff8-107">所有数字类型的 `ToString` 方法的某些重载支持自定义数字格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-107">Custom numeric format strings are supported by some overloads of the `ToString` method of all numeric types.</span></span> <span data-ttu-id="deff8-108">例如，可将数字格式字符串提供给 <xref:System.Int32.ToString%28System.String%29> 类型的 <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> 方法和 <xref:System.Int32> 方法。</span><span class="sxs-lookup"><span data-stu-id="deff8-108">For example, you can supply a numeric format string to the <xref:System.Int32.ToString%28System.String%29> and <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> methods of the <xref:System.Int32> type.</span></span> <span data-ttu-id="deff8-109">.NET [复合格式功能](composite-formatting.md)也支持自定义数字格式字符串，以供 <xref:System.Console> 和 <xref:System.IO.StreamWriter> 类的一些 `Write` 和 `WriteLine` 方法、<xref:System.String.Format%2A?displayProperty=nameWithType> 方法以及 <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> 方法使用。</span><span class="sxs-lookup"><span data-stu-id="deff8-109">Custom numeric format strings are also supported by the .NET [composite formatting feature](composite-formatting.md), which is used by some `Write` and `WriteLine` methods of the <xref:System.Console> and <xref:System.IO.StreamWriter> classes, the <xref:System.String.Format%2A?displayProperty=nameWithType> method, and the <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="deff8-110">[字符串内插](../../csharp/language-reference/tokens/interpolated.md)功能还支持自定义数字格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-110">[String interpolation](../../csharp/language-reference/tokens/interpolated.md) feature also supports custom numeric format strings.</span></span>

> [!TIP]
> <span data-ttu-id="deff8-111">你可以下载格式设置实用工具，它属于一种 .NET Core Windows 窗体应用程序，通过该应用程序，你可将格式字符串应用于数值或日期和时间值并显示结果字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-111">You can download the **Formatting Utility**, a .NET Core Windows Forms application that lets you apply format strings to either numeric or date and time values and displays the result string.</span></span> <span data-ttu-id="deff8-112">源代码适用于 [C#](/samples/dotnet/samples/windowsforms-formatting-utility-cs) 和 [Visual Basic](/samples/dotnet/samples/windowsforms-formatting-utility-vb)。</span><span class="sxs-lookup"><span data-stu-id="deff8-112">Source code is available for [C#](/samples/dotnet/samples/windowsforms-formatting-utility-cs) and [Visual Basic](/samples/dotnet/samples/windowsforms-formatting-utility-vb).</span></span>

<a name="table"></a> <span data-ttu-id="deff8-113">下表描述自定义数字格式说明符并显示由每个格式说明符产生的示例输出。</span><span class="sxs-lookup"><span data-stu-id="deff8-113">The following table describes the custom numeric format specifiers and displays sample output produced by each format specifier.</span></span> <span data-ttu-id="deff8-114">有关使用自定义数字格式字符串的其他信息，请参见 [说明](#NotesCustomFormatting) 一节，有关使用方法的完整演示，请参见 [示例](#example) 一节。</span><span class="sxs-lookup"><span data-stu-id="deff8-114">See the [Notes](#NotesCustomFormatting) section for additional information about using custom numeric format strings, and the [Example](#example) section for a comprehensive illustration of their use.</span></span>

|<span data-ttu-id="deff8-115">格式说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-115">Format specifier</span></span>|<span data-ttu-id="deff8-116">“属性”</span><span class="sxs-lookup"><span data-stu-id="deff8-116">Name</span></span>|<span data-ttu-id="deff8-117">描述</span><span class="sxs-lookup"><span data-stu-id="deff8-117">Description</span></span>|<span data-ttu-id="deff8-118">示例</span><span class="sxs-lookup"><span data-stu-id="deff8-118">Examples</span></span>|
|----------------------|----------|-----------------|--------------|
|<span data-ttu-id="deff8-119">“0”</span><span class="sxs-lookup"><span data-stu-id="deff8-119">"0"</span></span>|<span data-ttu-id="deff8-120">零占位符</span><span class="sxs-lookup"><span data-stu-id="deff8-120">Zero placeholder</span></span>|<span data-ttu-id="deff8-121">用对应的数字（如果存在）替换零；否则，将在结果字符串中显示零。</span><span class="sxs-lookup"><span data-stu-id="deff8-121">Replaces the zero with the corresponding digit if one is present; otherwise, zero appears in the result string.</span></span><br /><br /> <span data-ttu-id="deff8-122">更多信息：[“0”自定义说明符](#Specifier0)。</span><span class="sxs-lookup"><span data-stu-id="deff8-122">More information: [The "0" Custom Specifier](#Specifier0).</span></span>|<span data-ttu-id="deff8-123">1234.5678 ("00000") -> 01235</span><span class="sxs-lookup"><span data-stu-id="deff8-123">1234.5678 ("00000") -> 01235</span></span><br /><br /> <span data-ttu-id="deff8-124">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="deff8-124">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="deff8-125">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="deff8-125">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="deff8-126">"#"</span><span class="sxs-lookup"><span data-stu-id="deff8-126">"#"</span></span>|<span data-ttu-id="deff8-127">数字占位符</span><span class="sxs-lookup"><span data-stu-id="deff8-127">Digit placeholder</span></span>|<span data-ttu-id="deff8-128">用对应的数字（如果存在）替换“#”符号；否则，不会在结果字符串中显示任何数字。</span><span class="sxs-lookup"><span data-stu-id="deff8-128">Replaces the "#" symbol with the corresponding digit if one is present; otherwise, no digit appears in the result string.</span></span><br /><br /> <span data-ttu-id="deff8-129">请注意，如果输入字符串中的相应数字是无意义的 0，则在结果字符串中不会出现任何数字。</span><span class="sxs-lookup"><span data-stu-id="deff8-129">Note that no digit appears in the result string if the corresponding digit in the input string is a non-significant 0.</span></span> <span data-ttu-id="deff8-130">例如，0003 ("####") -> 3。</span><span class="sxs-lookup"><span data-stu-id="deff8-130">For example, 0003 ("####") -> 3.</span></span><br /><br /> <span data-ttu-id="deff8-131">更多信息：[“#”自定义说明符](#SpecifierD)。</span><span class="sxs-lookup"><span data-stu-id="deff8-131">More information: [The "#" Custom Specifier](#SpecifierD).</span></span>|<span data-ttu-id="deff8-132">1234.5678 ("#####") -> 1235</span><span class="sxs-lookup"><span data-stu-id="deff8-132">1234.5678 ("#####") -> 1235</span></span><br /><br /> <span data-ttu-id="deff8-133">0.45678 ("#.##", en-US) -> .46</span><span class="sxs-lookup"><span data-stu-id="deff8-133">0.45678 ("#.##", en-US) -> .46</span></span><br /><br /> <span data-ttu-id="deff8-134">0.45678 ("#.##", fr-FR) -> ,46</span><span class="sxs-lookup"><span data-stu-id="deff8-134">0.45678 ("#.##", fr-FR) -> ,46</span></span>|
|<span data-ttu-id="deff8-135">"."</span><span class="sxs-lookup"><span data-stu-id="deff8-135">"."</span></span>|<span data-ttu-id="deff8-136">小数点</span><span class="sxs-lookup"><span data-stu-id="deff8-136">Decimal point</span></span>|<span data-ttu-id="deff8-137">确定小数点分隔符在结果字符串中的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-137">Determines the location of the decimal separator in the result string.</span></span><br /><br /> <span data-ttu-id="deff8-138">更多信息：[“.”自定义说明符](#SpecifierPt)。</span><span class="sxs-lookup"><span data-stu-id="deff8-138">More information: [The "." Custom Specifier](#SpecifierPt).</span></span>|<span data-ttu-id="deff8-139">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="deff8-139">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="deff8-140">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="deff8-140">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="deff8-141">","</span><span class="sxs-lookup"><span data-stu-id="deff8-141">","</span></span>|<span data-ttu-id="deff8-142">组分隔符和数字比例换算</span><span class="sxs-lookup"><span data-stu-id="deff8-142">Group separator and number scaling</span></span>|<span data-ttu-id="deff8-143">用作组分隔符和数字比例换算说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-143">Serves as both a group separator and a number scaling specifier.</span></span> <span data-ttu-id="deff8-144">作为组分隔符时，它在各个组之间插入本地化的组分隔符字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-144">As a group separator, it inserts a localized group separator character between each group.</span></span> <span data-ttu-id="deff8-145">作为数字比例换算说明符，对于每个指定的逗号，它将数字除以 1000。</span><span class="sxs-lookup"><span data-stu-id="deff8-145">As a number scaling specifier, it divides a number by 1000 for each comma specified.</span></span><br /><br /> <span data-ttu-id="deff8-146">更多信息：[“,”自定义说明符](#SpecifierTh)。</span><span class="sxs-lookup"><span data-stu-id="deff8-146">More information: [The "," Custom Specifier](#SpecifierTh).</span></span>|<span data-ttu-id="deff8-147">组分隔符说明符：</span><span class="sxs-lookup"><span data-stu-id="deff8-147">Group separator specifier:</span></span><br /><br /> <span data-ttu-id="deff8-148">2147483647 ("##,#", en-US) -> 2,147,483,647</span><span class="sxs-lookup"><span data-stu-id="deff8-148">2147483647 ("##,#", en-US) -> 2,147,483,647</span></span><br /><br /> <span data-ttu-id="deff8-149">2147483647 ("##,#", es-ES) -> 2.147.483.647</span><span class="sxs-lookup"><span data-stu-id="deff8-149">2147483647 ("##,#", es-ES) -> 2.147.483.647</span></span><br /><br /> <span data-ttu-id="deff8-150">比例换算说明符：</span><span class="sxs-lookup"><span data-stu-id="deff8-150">Scaling specifier:</span></span><br /><br /> <span data-ttu-id="deff8-151">2147483647 ("#,#,,", en-US) -> 2,147</span><span class="sxs-lookup"><span data-stu-id="deff8-151">2147483647 ("#,#,,", en-US) -> 2,147</span></span><br /><br /> <span data-ttu-id="deff8-152">2147483647 ("#,#,,", es-ES) -> 2.147</span><span class="sxs-lookup"><span data-stu-id="deff8-152">2147483647 ("#,#,,", es-ES) -> 2.147</span></span>|
|<span data-ttu-id="deff8-153">"%"</span><span class="sxs-lookup"><span data-stu-id="deff8-153">"%"</span></span>|<span data-ttu-id="deff8-154">百分比占位符</span><span class="sxs-lookup"><span data-stu-id="deff8-154">Percentage placeholder</span></span>|<span data-ttu-id="deff8-155">将数字乘以 100，并在结果字符串中插入本地化的百分比符号。</span><span class="sxs-lookup"><span data-stu-id="deff8-155">Multiplies a number by 100 and inserts a localized percentage symbol in the result string.</span></span><br /><br /> <span data-ttu-id="deff8-156">更多信息：[“%”自定义说明符](#SpecifierPct)。</span><span class="sxs-lookup"><span data-stu-id="deff8-156">More information: [The "%" Custom Specifier](#SpecifierPct).</span></span>|<span data-ttu-id="deff8-157">0.3697 ("%#0.00", en-US) -> %36.97</span><span class="sxs-lookup"><span data-stu-id="deff8-157">0.3697 ("%#0.00", en-US) -> %36.97</span></span><br /><br /> <span data-ttu-id="deff8-158">0.3697 ("%#0.00", el-GR) -> %36,97</span><span class="sxs-lookup"><span data-stu-id="deff8-158">0.3697 ("%#0.00", el-GR) -> %36,97</span></span><br /><br /> <span data-ttu-id="deff8-159">0.3697 ("##.0 %", en-US) -> 37.0 %</span><span class="sxs-lookup"><span data-stu-id="deff8-159">0.3697 ("##.0 %", en-US) -> 37.0 %</span></span><br /><br /> <span data-ttu-id="deff8-160">0.3697 ("##.0 %", el-GR) -> 37,0 %</span><span class="sxs-lookup"><span data-stu-id="deff8-160">0.3697 ("##.0 %", el-GR) -> 37,0 %</span></span>|
|<span data-ttu-id="deff8-161">"‰"</span><span class="sxs-lookup"><span data-stu-id="deff8-161">"‰"</span></span>|<span data-ttu-id="deff8-162">千分比占位符</span><span class="sxs-lookup"><span data-stu-id="deff8-162">Per mille placeholder</span></span>|<span data-ttu-id="deff8-163">将数字乘以 1000，并在结果字符串中插入本地化的千分比符号。</span><span class="sxs-lookup"><span data-stu-id="deff8-163">Multiplies a number by 1000 and inserts a localized per mille symbol in the result string.</span></span><br /><br /> <span data-ttu-id="deff8-164">更多信息：[“‰”自定义说明符](#SpecifierPerMille)。</span><span class="sxs-lookup"><span data-stu-id="deff8-164">More information: [The "‰" Custom Specifier](#SpecifierPerMille).</span></span>|<span data-ttu-id="deff8-165">0.03697 ("#0.00‰", en-US) -> 36.97‰</span><span class="sxs-lookup"><span data-stu-id="deff8-165">0.03697 ("#0.00‰", en-US) -> 36.97‰</span></span><br /><br /> <span data-ttu-id="deff8-166">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span><span class="sxs-lookup"><span data-stu-id="deff8-166">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span></span>|
|<span data-ttu-id="deff8-167">“E0”</span><span class="sxs-lookup"><span data-stu-id="deff8-167">"E0"</span></span><br /><br /> <span data-ttu-id="deff8-168">“E+0”</span><span class="sxs-lookup"><span data-stu-id="deff8-168">"E+0"</span></span><br /><br /> <span data-ttu-id="deff8-169">“E-0”</span><span class="sxs-lookup"><span data-stu-id="deff8-169">"E-0"</span></span><br /><br /> <span data-ttu-id="deff8-170">“E0”</span><span class="sxs-lookup"><span data-stu-id="deff8-170">"e0"</span></span><br /><br /> <span data-ttu-id="deff8-171">“E+0”</span><span class="sxs-lookup"><span data-stu-id="deff8-171">"e+0"</span></span><br /><br /> <span data-ttu-id="deff8-172">“E-0”</span><span class="sxs-lookup"><span data-stu-id="deff8-172">"e-0"</span></span>|<span data-ttu-id="deff8-173">指数表示法</span><span class="sxs-lookup"><span data-stu-id="deff8-173">Exponential notation</span></span>|<span data-ttu-id="deff8-174">如果后跟至少一个 0（零），则使用指数表示法设置结果格式。</span><span class="sxs-lookup"><span data-stu-id="deff8-174">If followed by at least one 0 (zero), formats the result using exponential notation.</span></span> <span data-ttu-id="deff8-175">“E”或“e”指示指数符号在结果字符串中是大写还是小写。</span><span class="sxs-lookup"><span data-stu-id="deff8-175">The case of "E" or "e" indicates the case of the exponent symbol in the result string.</span></span> <span data-ttu-id="deff8-176">跟在“E”或“e”字符后面的零的数目确定指数中的最小位数。</span><span class="sxs-lookup"><span data-stu-id="deff8-176">The number of zeros following the "E" or "e" character determines the minimum number of digits in the exponent.</span></span> <span data-ttu-id="deff8-177">加号 (+) 指示符号字符总是置于指数前面。</span><span class="sxs-lookup"><span data-stu-id="deff8-177">A plus sign (+) indicates that a sign character always precedes the exponent.</span></span> <span data-ttu-id="deff8-178">减号 (-) 指示符号字符仅置于负指数前面。</span><span class="sxs-lookup"><span data-stu-id="deff8-178">A minus sign (-) indicates that a sign character precedes only negative exponents.</span></span><br /><br /> <span data-ttu-id="deff8-179">更多信息：[“E”和“e”自定义说明符](#SpecifierExponent)。</span><span class="sxs-lookup"><span data-stu-id="deff8-179">More information: [The "E" and "e" Custom Specifiers](#SpecifierExponent).</span></span>|<span data-ttu-id="deff8-180">987654 ("#0.0e0") -> 98.8e4</span><span class="sxs-lookup"><span data-stu-id="deff8-180">987654 ("#0.0e0") -> 98.8e4</span></span><br /><br /> <span data-ttu-id="deff8-181">1503.92311 ("0.0##e+00") -> 1.504e+03</span><span class="sxs-lookup"><span data-stu-id="deff8-181">1503.92311 ("0.0##e+00") -> 1.504e+03</span></span><br /><br /> <span data-ttu-id="deff8-182">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span><span class="sxs-lookup"><span data-stu-id="deff8-182">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span></span>|
|<span data-ttu-id="deff8-183">“\\”</span><span class="sxs-lookup"><span data-stu-id="deff8-183">"\\"</span></span>|<span data-ttu-id="deff8-184">转义符</span><span class="sxs-lookup"><span data-stu-id="deff8-184">Escape character</span></span>|<span data-ttu-id="deff8-185">使下一个字符被解释为文本而不是自定义格式说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-185">Causes the next character to be interpreted as a literal rather than as a custom format specifier.</span></span><br /><br /> <span data-ttu-id="deff8-186">更多信息：[“\\”转义字符](#SpecifierEscape)。</span><span class="sxs-lookup"><span data-stu-id="deff8-186">More information: [The "\\" Escape Character](#SpecifierEscape).</span></span>|<span data-ttu-id="deff8-187">987654 ("\\###00\\#") -> #987654#</span><span class="sxs-lookup"><span data-stu-id="deff8-187">987654 ("\\###00\\#") -> #987654#</span></span>|
|<span data-ttu-id="deff8-188">'string'</span><span class="sxs-lookup"><span data-stu-id="deff8-188">'*string*'</span></span><br /><br /> <span data-ttu-id="deff8-189">"*string*"</span><span class="sxs-lookup"><span data-stu-id="deff8-189">"*string*"</span></span>|<span data-ttu-id="deff8-190">文本字符串分隔符</span><span class="sxs-lookup"><span data-stu-id="deff8-190">Literal string delimiter</span></span>|<span data-ttu-id="deff8-191">指示应复制到未更改的结果字符串的封闭字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-191">Indicates that the enclosed characters should be copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="deff8-192">更多信息：[字符文本](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="deff8-192">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="deff8-193">68 ("# 'degrees'") -> 68 degrees</span><span class="sxs-lookup"><span data-stu-id="deff8-193">68 ("# 'degrees'") -> 68 degrees</span></span><br /><br /> <span data-ttu-id="deff8-194">68 ("# ' degrees'") -> 68  degrees</span><span class="sxs-lookup"><span data-stu-id="deff8-194">68 ("#' degrees'") -> 68 degrees</span></span>|
|<span data-ttu-id="deff8-195">;</span><span class="sxs-lookup"><span data-stu-id="deff8-195">;</span></span>|<span data-ttu-id="deff8-196">部分分隔符</span><span class="sxs-lookup"><span data-stu-id="deff8-196">Section separator</span></span>|<span data-ttu-id="deff8-197">通过分隔格式字符串定义正数、负数和零各部分。</span><span class="sxs-lookup"><span data-stu-id="deff8-197">Defines sections with separate format strings for positive, negative, and zero numbers.</span></span><br /><br /> <span data-ttu-id="deff8-198">更多信息：[“;”部分分隔符](#SectionSeparator)。</span><span class="sxs-lookup"><span data-stu-id="deff8-198">More information: [The ";" Section Separator](#SectionSeparator).</span></span>|<span data-ttu-id="deff8-199">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="deff8-199">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span></span><br /><br /> <span data-ttu-id="deff8-200">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span><span class="sxs-lookup"><span data-stu-id="deff8-200">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span></span><br /><br /> <span data-ttu-id="deff8-201">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="deff8-201">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span></span><br /><br /> <span data-ttu-id="deff8-202">12.345 ("#0.0#;(#0.0#)") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="deff8-202">12.345 ("#0.0#;(#0.0#)") -> 12.35</span></span><br /><br /> <span data-ttu-id="deff8-203">0 ("#0.0#;(#0.0#)") -> 0.0</span><span class="sxs-lookup"><span data-stu-id="deff8-203">0 ("#0.0#;(#0.0#)") -> 0.0</span></span><br /><br /> <span data-ttu-id="deff8-204">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="deff8-204">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span></span>|
|<span data-ttu-id="deff8-205">其他</span><span class="sxs-lookup"><span data-stu-id="deff8-205">Other</span></span>|<span data-ttu-id="deff8-206">所有其他字符</span><span class="sxs-lookup"><span data-stu-id="deff8-206">All other characters</span></span>|<span data-ttu-id="deff8-207">字符将复制到未更改的结果字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-207">The character is copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="deff8-208">更多信息：[字符文本](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="deff8-208">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="deff8-209">68 ("# °") -> 68 °</span><span class="sxs-lookup"><span data-stu-id="deff8-209">68 ("# °") -> 68 °</span></span>|

<span data-ttu-id="deff8-210">以下各节提供有关每个自定义数字格式说明符的详细信息。</span><span class="sxs-lookup"><span data-stu-id="deff8-210">The following sections provide detailed information about each of the custom numeric format specifiers.</span></span>

[!INCLUDE[C# interactive-note](~/includes/csharp-interactive-partial-note.md)]

<a name="Specifier0"></a>

## <a name="the-0-custom-specifier"></a><span data-ttu-id="deff8-211">“0”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-211">The "0" custom specifier</span></span>

<span data-ttu-id="deff8-212">“0”自定义格式说明符用作零占位符符号。</span><span class="sxs-lookup"><span data-stu-id="deff8-212">The "0" custom format specifier serves as a zero-placeholder symbol.</span></span> <span data-ttu-id="deff8-213">如果要设置格式的值在格式字符串中出现零的位置有一个数字，则将此数字复制到结果字符串中；否则，在结果字符串中显示零。</span><span class="sxs-lookup"><span data-stu-id="deff8-213">If the value that is being formatted has a digit in the position where the zero appears in the format string, that digit is copied to the result string; otherwise, a zero appears in the result string.</span></span> <span data-ttu-id="deff8-214">小数点前最左边的零的位置和小数点后最右边的零的位置确定总在结果字符串中出现的数字范围。</span><span class="sxs-lookup"><span data-stu-id="deff8-214">The position of the leftmost zero before the decimal point and the rightmost zero after the decimal point determines the range of digits that are always present in the result string.</span></span>

<span data-ttu-id="deff8-215">“00”说明符使得值被舍入到小数点前最近的数字，其中零位总被舍去。</span><span class="sxs-lookup"><span data-stu-id="deff8-215">The "00" specifier causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="deff8-216">例如，用“00”格式化 34.5 将得到值 35。</span><span class="sxs-lookup"><span data-stu-id="deff8-216">For example, formatting 34.5 with "00" would result in the value 35.</span></span>

<span data-ttu-id="deff8-217">下面的示例显示几个使用包含零占位符的自定义格式字符串设置格式的值。</span><span class="sxs-lookup"><span data-stu-id="deff8-217">The following example displays several values that are formatted by using custom format strings that include zero placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#1](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#1)]
[!code-csharp[Formatting.Numeric.Custom#1](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#1)]
[!code-vb[Formatting.Numeric.Custom#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#1)]

[<span data-ttu-id="deff8-218">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-218">Back to table</span></span>](#table)

<a name="SpecifierD"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="deff8-219">“#”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-219">The "#" custom specifier</span></span>

<span data-ttu-id="deff8-220">“#”自定义格式说明符用作数字占位符符号。</span><span class="sxs-lookup"><span data-stu-id="deff8-220">The "#" custom format specifier serves as a digit-placeholder symbol.</span></span> <span data-ttu-id="deff8-221">如果设置了格式的值在格式字符串中显示"#"符号的位置有一个数字，则此数字被复制到结果字符串中。</span><span class="sxs-lookup"><span data-stu-id="deff8-221">If the value that is being formatted has a digit in the position where the "#" symbol appears in the format string, that digit is copied to the result string.</span></span> <span data-ttu-id="deff8-222">否则，结果字符串中的此位置不存储任何值。</span><span class="sxs-lookup"><span data-stu-id="deff8-222">Otherwise, nothing is stored in that position in the result string.</span></span>

<span data-ttu-id="deff8-223">请注意，如果零不是有效数字，此说明符永不显示零，即使零是字符串中的唯一数字也是如此。</span><span class="sxs-lookup"><span data-stu-id="deff8-223">Note that this specifier never displays a zero that is not a significant digit, even if zero is the only digit in the string.</span></span> <span data-ttu-id="deff8-224">仅当零是所显示的数字中的有效数字时，才会显示零。</span><span class="sxs-lookup"><span data-stu-id="deff8-224">It will display zero only if it is a significant digit in the number that is being displayed.</span></span>

<span data-ttu-id="deff8-225">“##”格式字符串使得值被舍入到小数点前最近的数字，其中零总被舍去。</span><span class="sxs-lookup"><span data-stu-id="deff8-225">The "##" format string causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="deff8-226">例如，用“##”格式化 34.5 将得到值 35。</span><span class="sxs-lookup"><span data-stu-id="deff8-226">For example, formatting 34.5 with "##" would result in the value 35.</span></span>

<span data-ttu-id="deff8-227">下面的示例显示几个使用包含数字占位符的自定义格式字符串设置格式的值。</span><span class="sxs-lookup"><span data-stu-id="deff8-227">The following example displays several values that are formatted by using custom format strings that include digit placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#2](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#2)]
[!code-csharp[Formatting.Numeric.Custom#2](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#2)]
[!code-vb[Formatting.Numeric.Custom#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#2)]

<span data-ttu-id="deff8-228">若要返回空缺数字或前导零替换为空格的结果字符串，请使用 [复合格式功能](composite-formatting.md) 并指定字段宽度，如以下示例所示。</span><span class="sxs-lookup"><span data-stu-id="deff8-228">To return a result string in which absent digits or leading zeroes are replaced by spaces, use the [composite formatting feature](composite-formatting.md) and specify a field width, as the following example illustrates.</span></span>

[!code-cpp[Formatting.Numeric.Custom#12](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/SpaceOrDigit1.cpp#12)]
[!code-csharp[Formatting.Numeric.Custom#12](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/SpaceOrDigit1.cs#12)]
[!code-vb[Formatting.Numeric.Custom#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/SpaceOrDigit1.vb#12)]

[<span data-ttu-id="deff8-229">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-229">Back to table</span></span>](#table)

<a name="SpecifierPt"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="deff8-230">“.”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-230">The "." custom specifier</span></span>

<span data-ttu-id="deff8-231">"."自定义格式说明符在结果字符串中插入本地化的小数分隔符。</span><span class="sxs-lookup"><span data-stu-id="deff8-231">The "." custom format specifier inserts a localized decimal separator into the result string.</span></span> <span data-ttu-id="deff8-232">格式字符串中的第一个小数点确定设置了格式的值中的小数分隔符的位置；任何其他小数点会被忽略。</span><span class="sxs-lookup"><span data-stu-id="deff8-232">The first period in the format string determines the location of the decimal separator in the formatted value; any additional periods are ignored.</span></span>

<span data-ttu-id="deff8-233">在结果字符串中用作小数分隔符的字符并非总是小数点；它由控制格式设置的 <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> 对象的 <xref:System.Globalization.NumberFormatInfo> 属性确定。</span><span class="sxs-lookup"><span data-stu-id="deff8-233">The character that is used as the decimal separator in the result string is not always a period; it is determined by the <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> property of the <xref:System.Globalization.NumberFormatInfo> object that controls formatting.</span></span>

<span data-ttu-id="deff8-234">下面的示例使用"."格式说明符定义几个结果字符串中的小数点的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-234">The following example uses the "." format specifier to define the location of the decimal point in several result strings.</span></span>

[!code-cpp[Formatting.Numeric.Custom#3](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#3)]
[!code-csharp[Formatting.Numeric.Custom#3](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#3)]
[!code-vb[Formatting.Numeric.Custom#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#3)]

[<span data-ttu-id="deff8-235">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-235">Back to table</span></span>](#table)

<a name="SpecifierTh"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="deff8-236">“,”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-236">The "," custom specifier</span></span>

<span data-ttu-id="deff8-237">“,”字符用作组分隔符和数字比例换算说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-237">The "," character serves as both a group separator and a number scaling specifier.</span></span>

- <span data-ttu-id="deff8-238">组分隔符：如果在两个设置数字的整数位格式的数字占位符（0 或 #）之间指定一个或多个逗号，则在输出的整数部分中的每个数字组之间插入一个组分隔符字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-238">Group separator: If one or more commas are specified between two digit placeholders (0 or #) that format the integral digits of a number, a group separator character is inserted between each number group in the integral part of the output.</span></span>

  <span data-ttu-id="deff8-239">当前 <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> 对象的 <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> 和 <xref:System.Globalization.NumberFormatInfo> 属性将确定用作数字组分隔符的字符以及每个数字组的大小。</span><span class="sxs-lookup"><span data-stu-id="deff8-239">The <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> and <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> properties of the current <xref:System.Globalization.NumberFormatInfo> object determine the character used as the number group separator and the size of each number group.</span></span> <span data-ttu-id="deff8-240">例如，如果使用字符串“#,#”和固定区域性对数字 1000 进行格式化，则输出为“1,000”。</span><span class="sxs-lookup"><span data-stu-id="deff8-240">For example, if the string "#,#" and the invariant culture are used to format the number 1000, the output is "1,000".</span></span>

- <span data-ttu-id="deff8-241">数字比例换算符：如果在紧邻显式或隐式小数点的左侧指定一个或多个逗号，则对于每个逗号，将要设置格式的数字除以 1000。</span><span class="sxs-lookup"><span data-stu-id="deff8-241">Number scaling specifier: If one or more commas are specified immediately to the left of the explicit or implicit decimal point, the number to be formatted is divided by 1000 for each comma.</span></span> <span data-ttu-id="deff8-242">例如，如果使用字符串“0,,”对数字 100000000 进行格式化，则输出为“100”。</span><span class="sxs-lookup"><span data-stu-id="deff8-242">For example, if the string "0,," is used to format the number 100 million, the output is "100".</span></span>

<span data-ttu-id="deff8-243">可以在同一格式字符串中使用组分隔符和数字比例换算说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-243">You can use group separator and number scaling specifiers in the same format string.</span></span> <span data-ttu-id="deff8-244">例如，如果使用字符串“#,0,,”和固定区域性对数字 1000000000 进行格式化，则输出为“1,000”。</span><span class="sxs-lookup"><span data-stu-id="deff8-244">For example, if the string "#,0,," and the invariant culture are used to format the number one billion, the output is "1,000".</span></span>

<span data-ttu-id="deff8-245">下面的示例演示如何使用逗号作为组分隔符。</span><span class="sxs-lookup"><span data-stu-id="deff8-245">The following example illustrates the use of the comma as a group separator.</span></span>

[!code-cpp[Formatting.Numeric.Custom#4](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#4)]
[!code-csharp[Formatting.Numeric.Custom#4](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#4)]
[!code-vb[Formatting.Numeric.Custom#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#4)]

<span data-ttu-id="deff8-246">下面的示例演示如何使用逗号作为数字比例换算说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-246">The following example illustrates the use of the comma as a specifier for number scaling.</span></span>

[!code-cpp[Formatting.Numeric.Custom#5](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#5)]
[!code-csharp[Formatting.Numeric.Custom#5](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#5)]
[!code-vb[Formatting.Numeric.Custom#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#5)]

[<span data-ttu-id="deff8-247">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-247">Back to table</span></span>](#table)

<a name="SpecifierPct"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="deff8-248">“%”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-248">The "%" custom specifier</span></span>

<span data-ttu-id="deff8-249">格式字符串中的百分号 (%) 将使数字在设置格式之前乘以 100。</span><span class="sxs-lookup"><span data-stu-id="deff8-249">A percent sign (%) in a format string causes a number to be multiplied by 100 before it is formatted.</span></span> <span data-ttu-id="deff8-250">本地化的百分比符号插入到数字在格式字符串中出现 % 的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-250">The localized percent symbol is inserted in the number at the location where the % appears in the format string.</span></span> <span data-ttu-id="deff8-251">使用的百分比字符由当前 <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> 对象的 <xref:System.Globalization.NumberFormatInfo> 属性定义。</span><span class="sxs-lookup"><span data-stu-id="deff8-251">The percent character used is defined by the <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> property of the current <xref:System.Globalization.NumberFormatInfo> object.</span></span>

<span data-ttu-id="deff8-252">下面的示例定义几个包含“%”自定义说明符的自定义格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-252">The following example defines several custom format strings that include the "%" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#6](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#6)]
[!code-csharp[Formatting.Numeric.Custom#6](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#6)]
[!code-vb[Formatting.Numeric.Custom#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#6)]

[<span data-ttu-id="deff8-253">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-253">Back to table</span></span>](#table)

<a name="SpecifierPerMille"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="deff8-254">“‰”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-254">The "‰" custom specifier</span></span>

<span data-ttu-id="deff8-255">格式字符串中的千分比字符（‰ 或 \u2030）将使数字在设置格式之前乘以 1000。</span><span class="sxs-lookup"><span data-stu-id="deff8-255">A per mille character (‰ or \u2030) in a format string causes a number to be multiplied by 1000 before it is formatted.</span></span> <span data-ttu-id="deff8-256">在返回的字符串中，相应的千分比符号插在格式字符串中出现 ‰ 符号的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-256">The appropriate per mille symbol is inserted in the returned string at the location where the ‰ symbol appears in the format string.</span></span> <span data-ttu-id="deff8-257">所用的千分比字符由提供特定于区域性的格式设置信息的对象的 <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> 属性定义。</span><span class="sxs-lookup"><span data-stu-id="deff8-257">The per mille character used is defined by the <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> property of the object that provides culture-specific formatting information.</span></span>

<span data-ttu-id="deff8-258">下面的示例定义一个包含“‰”自定义说明符的自定义格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-258">The following example defines a custom format string that includes the "‰" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#9](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#9)]
[!code-csharp[Formatting.Numeric.Custom#9](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#9)]
[!code-vb[Formatting.Numeric.Custom#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#9)]

[<span data-ttu-id="deff8-259">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-259">Back to table</span></span>](#table)

<a name="SpecifierExponent"></a>

## <a name="the-e-and-e-custom-specifiers"></a><span data-ttu-id="deff8-260">“E”和“e”自定义说明符</span><span class="sxs-lookup"><span data-stu-id="deff8-260">The "E" and "e" custom specifiers</span></span>

<span data-ttu-id="deff8-261">如果“E”、“E+”、“E-”、“e”、“e+”或“e-”中的任何一个字符串出现在格式字符串中，而且后面紧跟至少一个零，则数字用科学记数法来设置格式，在数字和指数之间插入“E”或“e”。</span><span class="sxs-lookup"><span data-stu-id="deff8-261">If any of the strings "E", "E+", "E-", "e", "e+", or "e-" are present in the format string and are followed immediately by at least one zero, the number is formatted by using scientific notation with an "E" or "e" inserted between the number and the exponent.</span></span> <span data-ttu-id="deff8-262">跟在科学记数法指示符后面的零的数目确定指数输出的最小位数。</span><span class="sxs-lookup"><span data-stu-id="deff8-262">The number of zeros following the scientific notation indicator determines the minimum number of digits to output for the exponent.</span></span> <span data-ttu-id="deff8-263">“E+”和“e+”格式指示加号或减号应总是置于指数前面。</span><span class="sxs-lookup"><span data-stu-id="deff8-263">The "E+" and "e+" formats indicate that a plus sign or minus sign should always precede the exponent.</span></span> <span data-ttu-id="deff8-264">“E”、“E-”、“e”或“e-”格式指示符号字符应仅置于负指数前面。</span><span class="sxs-lookup"><span data-stu-id="deff8-264">The "E", "E-", "e", or "e-" formats indicate that a sign character should precede only negative exponents.</span></span>

<span data-ttu-id="deff8-265">下面的示例使用科学记数法说明符设置几个数值的格式。</span><span class="sxs-lookup"><span data-stu-id="deff8-265">The following example formats several numeric values using the specifiers for scientific notation.</span></span>

[!code-cpp[Formatting.Numeric.Custom#7](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#7)]
[!code-csharp[Formatting.Numeric.Custom#7](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#7)]
[!code-vb[Formatting.Numeric.Custom#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#7)]

[<span data-ttu-id="deff8-266">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-266">Back to table</span></span>](#table)

<a name="SpecifierEscape"></a>

## <a name="the--escape-character"></a><span data-ttu-id="deff8-267">“\\”转义字符</span><span class="sxs-lookup"><span data-stu-id="deff8-267">The "\\" escape character</span></span>

<span data-ttu-id="deff8-268">格式字符串中的“#”、“0”、“.”、“,”、“%”和“‰”符号被解释为格式说明符而不是文本字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-268">The "#", "0", ".", ",", "%", and "‰" symbols in a format string are interpreted as format specifiers rather than as literal characters.</span></span> <span data-ttu-id="deff8-269">大写和小写“E”以及 + 和 - 符号也可能被解释为格式说明符，具体取决于它们在自定义格式字符串中的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-269">Depending on their position in a custom format string, the uppercase and lowercase "E" as well as the + and - symbols may also be interpreted as format specifiers.</span></span>

<span data-ttu-id="deff8-270">若要防止某个字符被解释为格式说明符，你可以在该字符前面加上反斜杠（即转义字符）。</span><span class="sxs-lookup"><span data-stu-id="deff8-270">To prevent a character from being interpreted as a format specifier, you can precede it with a backslash, which is the escape character.</span></span> <span data-ttu-id="deff8-271">转义字符表示以下字符为应包含在未更改的结果字符串中的字符文本。</span><span class="sxs-lookup"><span data-stu-id="deff8-271">The escape character signifies that the following character is a character literal that should be included in the result string unchanged.</span></span>

<span data-ttu-id="deff8-272">若在要结果字符串中包括反斜杠，必须使用另一个反斜杠 (`\\`) 对其转义。</span><span class="sxs-lookup"><span data-stu-id="deff8-272">To include a backslash in a result string, you must escape it with another backslash (`\\`).</span></span>

> [!NOTE]
> <span data-ttu-id="deff8-273">一些编译器（如 C++ 和 C# 编译器）也可能会将单个反斜杠字符解释为转义字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-273">Some compilers, such as the C++ and C# compilers, may also interpret a single backslash character as an escape character.</span></span> <span data-ttu-id="deff8-274">若要确保在设置格式时正确解释字符串，在 C# 中，可以在字符串之前使用原义字符串文本字符（@ 字符），或者在 C# 和 C++ 中，在每个反斜杠之前另外添加一个反斜杠字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-274">To ensure that a string is interpreted correctly when formatting, you can use the verbatim string literal character (the @ character) before the string in C#, or add another backslash character before each backslash in C# and C++.</span></span> <span data-ttu-id="deff8-275">下面的 C# 示例阐释了这两种方法。</span><span class="sxs-lookup"><span data-stu-id="deff8-275">The following C# example illustrates both approaches.</span></span>

<span data-ttu-id="deff8-276">下面的示例使用转义字符，以防格式设置操作将“#”、“0”和“\\”字符解释为转义字符或格式说明符。</span><span class="sxs-lookup"><span data-stu-id="deff8-276">The following example uses the escape character to prevent the formatting operation from interpreting the "#", "0", and "\\" characters as either escape characters or format specifiers.</span></span> <span data-ttu-id="deff8-277">C# 示例使用附加的反斜杠以确保将原反斜杠解释为文本字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-277">The C# examples uses an additional backslash to ensure that a backslash is interpreted as a literal character.</span></span>

[!code-cpp[Formatting.Numeric.Custom#11](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/escape1.cpp#11)]
[!code-csharp-interactive[Formatting.Numeric.Custom#11](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/escape1.cs#11)]
[!code-vb[Formatting.Numeric.Custom#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/escape1.vb#11)]

[<span data-ttu-id="deff8-278">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-278">Back to table</span></span>](#table)

<a name="SectionSeparator"></a>

## <a name="the--section-separator"></a><span data-ttu-id="deff8-279">“;”部分分隔符</span><span class="sxs-lookup"><span data-stu-id="deff8-279">The ";" section separator</span></span>

<span data-ttu-id="deff8-280">分号 (;) 是条件格式说明符，它可以对数字应用不同的格式设置，具体取决于值为正、为负还是为零。</span><span class="sxs-lookup"><span data-stu-id="deff8-280">The semicolon (;) is a conditional format specifier that applies different formatting to a number depending on whether its value is positive, negative, or zero.</span></span> <span data-ttu-id="deff8-281">为产生这种行为，自定义格式字符串可以包含最多三个用分号分隔的部分。</span><span class="sxs-lookup"><span data-stu-id="deff8-281">To produce this behavior, a custom format string can contain up to three sections separated by semicolons.</span></span> <span data-ttu-id="deff8-282">下表描述了这些部分。</span><span class="sxs-lookup"><span data-stu-id="deff8-282">These sections are described in the following table.</span></span>

|<span data-ttu-id="deff8-283">部分数目</span><span class="sxs-lookup"><span data-stu-id="deff8-283">Number of sections</span></span>|<span data-ttu-id="deff8-284">描述</span><span class="sxs-lookup"><span data-stu-id="deff8-284">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="deff8-285">一个部分</span><span class="sxs-lookup"><span data-stu-id="deff8-285">One section</span></span>|<span data-ttu-id="deff8-286">格式字符串应用于所有值。</span><span class="sxs-lookup"><span data-stu-id="deff8-286">The format string applies to all values.</span></span>|
|<span data-ttu-id="deff8-287">两个部分</span><span class="sxs-lookup"><span data-stu-id="deff8-287">Two sections</span></span>|<span data-ttu-id="deff8-288">第一部分应用于正值和零，第二部分应用于负值。</span><span class="sxs-lookup"><span data-stu-id="deff8-288">The first section applies to positive values and zeros, and the second section applies to negative values.</span></span><br /><br /> <span data-ttu-id="deff8-289">如果要设置格式的数字为负，但根据第二部分中的格式舍入后为零，则最终的零根据第一部分进行格式设置。</span><span class="sxs-lookup"><span data-stu-id="deff8-289">If the number to be formatted is negative, but becomes zero after rounding according to the format in the second section, the resulting zero is formatted according to the first section.</span></span>|
|<span data-ttu-id="deff8-290">三个部分</span><span class="sxs-lookup"><span data-stu-id="deff8-290">Three sections</span></span>|<span data-ttu-id="deff8-291">第一部分应用于正值，第二部分应用于负值，第三部分应用于零。</span><span class="sxs-lookup"><span data-stu-id="deff8-291">The first section applies to positive values, the second section applies to negative values, and the third section applies to zeros.</span></span><br /><br /> <span data-ttu-id="deff8-292">第二部分可以留空（分号间没有任何内容），在这种情况下，第一部分应用于所有非零值。</span><span class="sxs-lookup"><span data-stu-id="deff8-292">The second section can be left empty (by having nothing between the semicolons), in which case the first section applies to all nonzero values.</span></span><br /><br /> <span data-ttu-id="deff8-293">如果要设置格式的数字为非零值，但根据第一部分或第二部分中的格式舍入后为零，则最终的零根据第三部分进行格式设置。</span><span class="sxs-lookup"><span data-stu-id="deff8-293">If the number to be formatted is nonzero, but becomes zero after rounding according to the format in the first or second section, the resulting zero is formatted according to the third section.</span></span>|

<span data-ttu-id="deff8-294">格式化最终值时，部分分隔符忽略所有先前存在的与数字关联的格式设置。</span><span class="sxs-lookup"><span data-stu-id="deff8-294">Section separators ignore any preexisting formatting associated with a number when the final value is formatted.</span></span> <span data-ttu-id="deff8-295">例如，使用部分分隔符时，显示的负值永远不带负号。</span><span class="sxs-lookup"><span data-stu-id="deff8-295">For example, negative values are always displayed without a minus sign when section separators are used.</span></span> <span data-ttu-id="deff8-296">如果你希望格式化后的最终值带有负号，则应明确包含负号，让它作为自定义格式说明符的组成部分。</span><span class="sxs-lookup"><span data-stu-id="deff8-296">If you want the final formatted value to have a minus sign, you should explicitly include the minus sign as part of the custom format specifier.</span></span>

<span data-ttu-id="deff8-297">下面的示例使用“;”格式说明符来分别设置正数、负数和零的格式。</span><span class="sxs-lookup"><span data-stu-id="deff8-297">The following example uses the ";" format specifier to format positive, negative, and zero numbers differently.</span></span>

[!code-cpp[Formatting.Numeric.Custom#8](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#8)]
[!code-csharp-interactive[Formatting.Numeric.Custom#8](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#8)]
[!code-vb[Formatting.Numeric.Custom#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#8)]

[<span data-ttu-id="deff8-298">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-298">Back to table</span></span>](#table)

## <a name="character-literals"></a><span data-ttu-id="deff8-299">字符文本</span><span class="sxs-lookup"><span data-stu-id="deff8-299">Character literals</span></span>

<span data-ttu-id="deff8-300">出现在自定义数值格式字符串中的格式说明符始终解释为格式字符而不是文本字符。</span><span class="sxs-lookup"><span data-stu-id="deff8-300">Format specifiers that appear in a custom numeric format string are always interpreted as formatting characters and never as literal characters.</span></span> <span data-ttu-id="deff8-301">这包括以下字符：</span><span class="sxs-lookup"><span data-stu-id="deff8-301">This includes the following characters:</span></span>

- [<span data-ttu-id="deff8-302">0</span><span class="sxs-lookup"><span data-stu-id="deff8-302">0</span></span>](#Specifier0)
- [\#](#SpecifierD)
- [%](#SpecifierPct)
- [<span data-ttu-id="deff8-303">‰</span><span class="sxs-lookup"><span data-stu-id="deff8-303">‰</span></span>](#SpecifierPerMille)
- <span data-ttu-id="deff8-304">'</span><span class="sxs-lookup"><span data-stu-id="deff8-304">'</span></span>
- [\\](#SpecifierEscape)
- [<span data-ttu-id="deff8-305">.</span><span class="sxs-lookup"><span data-stu-id="deff8-305">.</span></span>](#SpecifierPt)
- [<span data-ttu-id="deff8-306">，</span><span class="sxs-lookup"><span data-stu-id="deff8-306">,</span></span>](#SpecifierTh)
- <span data-ttu-id="deff8-307">[E 或 e](#SpecifierExponent)，取决于它在格式字符串中的位置。</span><span class="sxs-lookup"><span data-stu-id="deff8-307">[E or e](#SpecifierExponent), depending on its position in the format string.</span></span>

<span data-ttu-id="deff8-308">所有其他字符始终解释为字符文本，在格式设置操作中，将按原样包含在结果字符串中。</span><span class="sxs-lookup"><span data-stu-id="deff8-308">All other characters are always interpreted as character literals and, in a formatting operation, are included in the result string unchanged.</span></span>  <span data-ttu-id="deff8-309">在分析操作中，这些字符必须与输入字符串中的字符完全匹配；比较时区分大小写。</span><span class="sxs-lookup"><span data-stu-id="deff8-309">In a parsing operation, they must match the characters in the input string exactly; the comparison is case-sensitive.</span></span>

<span data-ttu-id="deff8-310">以下示例演示了文本字符单位（这里是“千”）的一种常见用法：</span><span class="sxs-lookup"><span data-stu-id="deff8-310">The following example illustrates one common use of literal character units (in this case, thousands):</span></span>

[!code-csharp-interactive[literal characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal2.cs#1)]
[!code-vb[literal characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal2.vb#1)]

<span data-ttu-id="deff8-311">可通过两种方法来指示要将字符解释为文本字符而不是格式字符，以便这些字符可以包含在结果字符串中，或者在输入字符串中成功完成分析：</span><span class="sxs-lookup"><span data-stu-id="deff8-311">There are two ways to indicate that characters are to be interpreted as literal characters and not as formatting characters, so that they can be included in a result string or successfully parsed in an input string:</span></span>

- <span data-ttu-id="deff8-312">通过对格式字符进行转义处理。</span><span class="sxs-lookup"><span data-stu-id="deff8-312">By escaping a formatting character.</span></span> <span data-ttu-id="deff8-313">有关详细信息，请参阅[“\\”转义字符](#SpecifierEscape)。</span><span class="sxs-lookup"><span data-stu-id="deff8-313">For more information, see [The "\\" escape character](#SpecifierEscape).</span></span>

- <span data-ttu-id="deff8-314">通过将整个文本字符串括在单引号中。</span><span class="sxs-lookup"><span data-stu-id="deff8-314">By enclosing the entire literal string in quotation apostrophes.</span></span>

<span data-ttu-id="deff8-315">以下示例使用这两种方法将保留字符包含在自定义数值格式字符串中。</span><span class="sxs-lookup"><span data-stu-id="deff8-315">The following example uses both approaches to include reserved characters in a custom numeric format string.</span></span>

[!code-csharp-interactive[including reserved characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal1.cs#1)]
[!code-vb[including reserved characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal1.vb#1)]

<a name="NotesCustomFormatting"></a>

## <a name="notes"></a><span data-ttu-id="deff8-316">说明</span><span class="sxs-lookup"><span data-stu-id="deff8-316">Notes</span></span>

### <a name="floating-point-infinities-and-nan"></a><span data-ttu-id="deff8-317">浮点型无穷大和 NaN</span><span class="sxs-lookup"><span data-stu-id="deff8-317">Floating-Point infinities and NaN</span></span>

<span data-ttu-id="deff8-318">无论格式字符串原来是什么值，只要 <xref:System.Single> 或 <xref:System.Double> 浮点类型的值为正无穷大、负无穷大或非数值 (NaN)，格式字符串就分别是当前适用的 <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>对象指定的 <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>、 <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> 或 <xref:System.Globalization.NumberFormatInfo> 属性的值。</span><span class="sxs-lookup"><span data-stu-id="deff8-318">Regardless of the format string, if the value of a <xref:System.Single> or <xref:System.Double> floating-point type is positive infinity, negative infinity, or not a number (NaN), the formatted string is the value of the respective <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>, <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>, or <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> property specified by the currently applicable <xref:System.Globalization.NumberFormatInfo> object.</span></span>

### <a name="control-panel-settings"></a><span data-ttu-id="deff8-319">控制面板设置</span><span class="sxs-lookup"><span data-stu-id="deff8-319">Control Panel settings</span></span>

<span data-ttu-id="deff8-320">控制面板中 **“区域和语言选项”** 项中的设置会影响由格式化操作产生的结果字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-320">The settings in the **Regional and Language Options** item in Control Panel influence the result string produced by a formatting operation.</span></span> <span data-ttu-id="deff8-321">这些设置用于初始化与当前线程区域性关联的 <xref:System.Globalization.NumberFormatInfo> 对象，并且当前线程区域性将提供用于控制格式设置的值。</span><span class="sxs-lookup"><span data-stu-id="deff8-321">Those settings are used to initialize the <xref:System.Globalization.NumberFormatInfo> object associated with the current thread culture, and the current thread culture provides values used to govern formatting.</span></span> <span data-ttu-id="deff8-322">使用不同设置的计算机将生成不同的结果字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-322">Computers that use different settings generate different result strings.</span></span>

<span data-ttu-id="deff8-323">此外，如果使用 <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> 构造函数实例化一个新的 <xref:System.Globalization.CultureInfo> 对象以表示与当前的系统区域性相同的区域性，则通过控制面板中的 **“区域和语言选项”** 建立的任何自定义都将应用到新的 <xref:System.Globalization.CultureInfo> 对象。</span><span class="sxs-lookup"><span data-stu-id="deff8-323">In addition, if you use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> constructor to instantiate a new <xref:System.Globalization.CultureInfo> object that represents the same culture as the current system culture, any customizations established by the **Regional and Language Options** item in Control Panel will be applied to the new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="deff8-324">可以使用 <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> 构造函数来创建不会反映系统的自定义项的 <xref:System.Globalization.CultureInfo> 对象。</span><span class="sxs-lookup"><span data-stu-id="deff8-324">You can use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> constructor to create a <xref:System.Globalization.CultureInfo> object that does not reflect a system's customizations.</span></span>

### <a name="rounding-and-fixed-point-format-strings"></a><span data-ttu-id="deff8-325">舍入和定点格式字符串</span><span class="sxs-lookup"><span data-stu-id="deff8-325">Rounding and fixed-point format strings</span></span>

<span data-ttu-id="deff8-326">对于固定点格式字符串（即不包含科学记数法格式字符的格式字符串），数字被舍入为与小数点右边的数字占位符数目相同的小数位数。</span><span class="sxs-lookup"><span data-stu-id="deff8-326">For fixed-point format strings (that is, format strings that do not contain scientific notation format characters), numbers are rounded to as many decimal places as there are digit placeholders to the right of the decimal point.</span></span> <span data-ttu-id="deff8-327">如果格式字符串不包含小数点，数字被舍入为最接近的整数。</span><span class="sxs-lookup"><span data-stu-id="deff8-327">If the format string does not contain a decimal point, the number is rounded to the nearest integer.</span></span> <span data-ttu-id="deff8-328">如果数字位数多于小数点左边数字占位符的个数，多余的数字被复制到结果字符串中紧挨着第一个数字占位符的前面。</span><span class="sxs-lookup"><span data-stu-id="deff8-328">If the number has more digits than there are digit placeholders to the left of the decimal point, the extra digits are copied to the result string immediately before the first digit placeholder.</span></span>

[<span data-ttu-id="deff8-329">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-329">Back to table</span></span>](#table)

<a name="example"></a>

## <a name="example"></a><span data-ttu-id="deff8-330">示例</span><span class="sxs-lookup"><span data-stu-id="deff8-330">Example</span></span>

<span data-ttu-id="deff8-331">下面的示例演示两个自定义数字格式字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-331">The following example demonstrates two custom numeric format strings.</span></span> <span data-ttu-id="deff8-332">在这两个示例中，数字占位符 (`#`) 显示数值数据，且所有其他字符被复制到结果字符串。</span><span class="sxs-lookup"><span data-stu-id="deff8-332">In both cases, the digit placeholder (`#`) displays the numeric data, and all other characters are copied to the result string.</span></span>

[!code-cpp[Formatting.Numeric.Custom#10](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/example1.cpp#10)]
[!code-csharp-interactive[Formatting.Numeric.Custom#10](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/example1.cs#10)]
[!code-vb[Formatting.Numeric.Custom#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/example1.vb#10)]

[<span data-ttu-id="deff8-333">返回表首</span><span class="sxs-lookup"><span data-stu-id="deff8-333">Back to table</span></span>](#table)

## <a name="see-also"></a><span data-ttu-id="deff8-334">请参阅</span><span class="sxs-lookup"><span data-stu-id="deff8-334">See also</span></span>

- <xref:System.Globalization.NumberFormatInfo?displayProperty=nameWithType>
- [<span data-ttu-id="deff8-335">格式设置类型</span><span class="sxs-lookup"><span data-stu-id="deff8-335">Formatting Types</span></span>](formatting-types.md)
- [<span data-ttu-id="deff8-336">标准数字格式字符串</span><span class="sxs-lookup"><span data-stu-id="deff8-336">Standard Numeric Format Strings</span></span>](standard-numeric-format-strings.md)
- [<span data-ttu-id="deff8-337">如何：用前导零填充数字</span><span class="sxs-lookup"><span data-stu-id="deff8-337">How to: Pad a Number with Leading Zeros</span></span>](how-to-pad-a-number-with-leading-zeros.md)
- [<span data-ttu-id="deff8-338">示例：.NET Core WinForms 格式设置实用工具 (C#)</span><span class="sxs-lookup"><span data-stu-id="deff8-338">Sample: .NET Core WinForms Formatting Utility (C#)</span></span>](/samples/dotnet/samples/windowsforms-formatting-utility-cs)
- [<span data-ttu-id="deff8-339">示例：.NET Core WinForms 格式设置实用工具 (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="deff8-339">Sample: .NET Core WinForms Formatting Utility (Visual Basic)</span></span>](/samples/dotnet/samples/windowsforms-formatting-utility-vb)
