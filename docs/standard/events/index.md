---
title: 处理和引发事件
description: 了解如何处理并引发基于委托模型的 .NET 事件。 此模型允许订阅者向提供商注册或接收通知。
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- delegate model for events
- application development [.NET], events
- application development [.NET Framework], events
- application development [.NET Core], events
- events [.NET]
- events [.NET Core]
- events [.NET Framework]
ms.assetid: b6f65241-e0ad-4590-a99f-200ce741bb1f
ms.openlocfilehash: 83799b0f4c6d6503825ce271fed4bffa7a9775b9
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/15/2020
ms.locfileid: "90545698"
---
# <a name="handling-and-raising-events"></a><span data-ttu-id="f38e6-104">处理和引发事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-104">Handling and raising events</span></span>

<span data-ttu-id="f38e6-105">.NET 中的事件基于委托模型。</span><span class="sxs-lookup"><span data-stu-id="f38e6-105">Events in .NET are based on the delegate model.</span></span> <span data-ttu-id="f38e6-106">委托模型遵循[观察者设计模式](observer-design-pattern.md)，使订阅者能够向提供方注册并接收相关通知。</span><span class="sxs-lookup"><span data-stu-id="f38e6-106">The delegate model follows the [observer design pattern](observer-design-pattern.md), which enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="f38e6-107">事件发送方推送事件发生的通知，事件接收器接收该通知并定义对它的响应。</span><span class="sxs-lookup"><span data-stu-id="f38e6-107">An event sender pushes a notification that an event has happened, and an event receiver receives that notification and defines a response to it.</span></span> <span data-ttu-id="f38e6-108">本文介绍委托模型的主要组件、如何在应用程序中使用事件以及如何在你的代码中实现事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-108">This article describes the major components of the delegate model, how to consume events in applications, and how to implement events in your code.</span></span>  
  
 <span data-ttu-id="f38e6-109">有关在 Windows 8.x Store 应用中处理事件的信息，请参阅[事件和路由事件概述](/previous-versions/windows/apps/hh758286(v=win.10))。</span><span class="sxs-lookup"><span data-stu-id="f38e6-109">For information about handling events in Windows 8.x Store apps, see [Events and routed events overview](/previous-versions/windows/apps/hh758286(v=win.10)).</span></span>  
  
## <a name="events"></a><span data-ttu-id="f38e6-110">事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-110">Events</span></span>

<span data-ttu-id="f38e6-111">事件是由对象发送的用于发出操作信号的消息。</span><span class="sxs-lookup"><span data-stu-id="f38e6-111">An event is a message sent by an object to signal the occurrence of an action.</span></span> <span data-ttu-id="f38e6-112">该操作可能是由用户交互引起，例如单击按钮；也可能是由某些其他程序的逻辑导致，例如更改属性值。</span><span class="sxs-lookup"><span data-stu-id="f38e6-112">The action can be caused by user interaction, such as a button click, or it can result from some other program logic, such as changing a property’s value.</span></span> <span data-ttu-id="f38e6-113">引发事件的对象称为“事件发送方”。</span><span class="sxs-lookup"><span data-stu-id="f38e6-113">The object that raises the event is called the *event sender*.</span></span> <span data-ttu-id="f38e6-114">事件发送方不知道哪个对象或方法将接收（处理）它引发的事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-114">The event sender doesn't know which object or method will receive (handle) the events it raises.</span></span> <span data-ttu-id="f38e6-115">事件通常是事件发送方的成员，例如 <xref:System.Web.UI.WebControls.Button.Click> 事件是 <xref:System.Web.UI.WebControls.Button> 类的成员，<xref:System.ComponentModel.INotifyPropertyChanged.PropertyChanged> 事件是实现  <xref:System.ComponentModel.INotifyPropertyChanged> 接口的类的成员。</span><span class="sxs-lookup"><span data-stu-id="f38e6-115">The event is typically a member of the event sender; for example, the <xref:System.Web.UI.WebControls.Button.Click> event is a member of the <xref:System.Web.UI.WebControls.Button> class, and the <xref:System.ComponentModel.INotifyPropertyChanged.PropertyChanged> event is a member of the class that implements the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span>  
  
<span data-ttu-id="f38e6-116">若要定义一个事件，可以在事件类签名中使用 [`event`](../../csharp/language-reference/keywords/event.md)（在 C# 中）或 [`Event`](../../visual-basic/language-reference/statements/event-statement.md)（在 Visual Basic 中）关键字，并指定事件的委托类型。</span><span class="sxs-lookup"><span data-stu-id="f38e6-116">To define an event, you use the C# [`event`](../../csharp/language-reference/keywords/event.md) or the Visual Basic [`Event`](../../visual-basic/language-reference/statements/event-statement.md) keyword in the signature of your event class, and specify the type of delegate for the event.</span></span> <span data-ttu-id="f38e6-117">委托在下一节中介绍。</span><span class="sxs-lookup"><span data-stu-id="f38e6-117">Delegates are described in the next section.</span></span>  
  
<span data-ttu-id="f38e6-118">通常，为了引发事件，您可以在 C# 中添加一个标记为 `protected` 和 `virtual` 或在 Visual Basic 中标记为 `Protected` 和 `Overridable` 的方法。</span><span class="sxs-lookup"><span data-stu-id="f38e6-118">Typically, to raise an event, you add a method that is marked as `protected` and `virtual` (in C#) or `Protected` and `Overridable` (in Visual Basic).</span></span> <span data-ttu-id="f38e6-119">将此方法命名为 `On`*EventName*；例如，`OnDataReceived`。</span><span class="sxs-lookup"><span data-stu-id="f38e6-119">Name this method `On`*EventName*; for example, `OnDataReceived`.</span></span> <span data-ttu-id="f38e6-120">此方法应接受一个指定事件数据对象（<xref:System.EventArgs> 类型或派生类型）的参数。</span><span class="sxs-lookup"><span data-stu-id="f38e6-120">The method should take one parameter that specifies an event data object, which is an object of type <xref:System.EventArgs> or a derived type.</span></span> <span data-ttu-id="f38e6-121">您提供此方法以允许派生类重写引发事件的逻辑。</span><span class="sxs-lookup"><span data-stu-id="f38e6-121">You provide this method to enable derived classes to override the logic for raising the event.</span></span> <span data-ttu-id="f38e6-122">派生类应始终调用基类的 `On`*EventName* 方法，以确保注册的委托接收事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-122">A derived class should always call the `On`*EventName* method of the base class to ensure that registered delegates receive the event.</span></span>  

<span data-ttu-id="f38e6-123">下面的示例显示如何声明名为 `ThresholdReached` 事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-123">The following example shows how to declare an event named `ThresholdReached`.</span></span> <span data-ttu-id="f38e6-124">该事件与 <xref:System.EventHandler> 委托相关联并且由 `OnThresholdReached` 方法引发。</span><span class="sxs-lookup"><span data-stu-id="f38e6-124">The event is associated with the <xref:System.EventHandler> delegate and raised in a method named `OnThresholdReached`.</span></span>  
  
 [!code-csharp[EventsOverview#1](~/samples/snippets/csharp/VS_Snippets_CLR/eventsoverview/cs/programtruncated.cs#1)]
 [!code-vb[EventsOverview#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/eventsoverview/vb/module1truncated.vb#1)]  
  
## <a name="delegates"></a><span data-ttu-id="f38e6-125">委托</span><span class="sxs-lookup"><span data-stu-id="f38e6-125">Delegates</span></span>

<span data-ttu-id="f38e6-126">委托是一种保存对方法的引用的类型。</span><span class="sxs-lookup"><span data-stu-id="f38e6-126">A delegate is a type that holds a reference to a method.</span></span> <span data-ttu-id="f38e6-127">委托是通过显示所引用方法的返回类型和参数的签名来声明的，并可以仅保存与其签名匹配的方法的引用。</span><span class="sxs-lookup"><span data-stu-id="f38e6-127">A delegate is declared with a signature that shows the return type and parameters for the methods it references, and it can hold references only to methods that match its signature.</span></span> <span data-ttu-id="f38e6-128">因此，委托等同于类型安全函数指针或回叫。</span><span class="sxs-lookup"><span data-stu-id="f38e6-128">A delegate is thus equivalent to a type-safe function pointer or a callback.</span></span> <span data-ttu-id="f38e6-129">委托声明足以定义委托类。</span><span class="sxs-lookup"><span data-stu-id="f38e6-129">A delegate declaration is sufficient to define a delegate class.</span></span>  
  
<span data-ttu-id="f38e6-130">委托在 .NET 中有许多用途。</span><span class="sxs-lookup"><span data-stu-id="f38e6-130">Delegates have many uses in .NET.</span></span> <span data-ttu-id="f38e6-131">在事件上下文中，委托是事件源和处理事件的代码之间的媒介（或类似指针的机制）。</span><span class="sxs-lookup"><span data-stu-id="f38e6-131">In the context of events, a delegate is an intermediary (or pointer-like mechanism) between the event source and the code that handles the event.</span></span> <span data-ttu-id="f38e6-132">如上一节的例子所示，可以通过在事件声明中包括委托类型来将委托和事件相关联。</span><span class="sxs-lookup"><span data-stu-id="f38e6-132">You associate a delegate with an event by including the delegate type in the event declaration, as shown in the example in the previous section.</span></span> <span data-ttu-id="f38e6-133">有关委托的详细信息，请参阅 <xref:System.Delegate> 类。</span><span class="sxs-lookup"><span data-stu-id="f38e6-133">For more information about delegates, see the <xref:System.Delegate> class.</span></span>  
  
<span data-ttu-id="f38e6-134">.NET 提供了 <xref:System.EventHandler> 和 <xref:System.EventHandler%601> 委托来支持大部分事件场景。</span><span class="sxs-lookup"><span data-stu-id="f38e6-134">.NET provides the <xref:System.EventHandler> and <xref:System.EventHandler%601> delegates to support most event scenarios.</span></span> <span data-ttu-id="f38e6-135">使用 <xref:System.EventHandler> 委托处理不包含事件数据的所有事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-135">Use the <xref:System.EventHandler> delegate for all events that do not include event data.</span></span> <span data-ttu-id="f38e6-136">使用 <xref:System.EventHandler%601> 委托处理包含事件相关数据的事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-136">Use the <xref:System.EventHandler%601> delegate for events that include data about the event.</span></span> <span data-ttu-id="f38e6-137">这些委托没有返回类型值，并且接受两个参数（事件源的对象和事件数据的对象）。</span><span class="sxs-lookup"><span data-stu-id="f38e6-137">These delegates have no return type value and take two parameters (an object for the source of the event, and an object for event data).</span></span>  
  
<span data-ttu-id="f38e6-138">委托是[多播](xref:System.MulticastDelegate)，这意味着它们可以保存对多个事件处理方法的引用。</span><span class="sxs-lookup"><span data-stu-id="f38e6-138">Delegates are [multicast](xref:System.MulticastDelegate), which means that they can hold references to more than one event-handling method.</span></span> <span data-ttu-id="f38e6-139">有关详细信息，请参阅 <xref:System.Delegate> 参考页。</span><span class="sxs-lookup"><span data-stu-id="f38e6-139">For details, see the <xref:System.Delegate> reference page.</span></span> <span data-ttu-id="f38e6-140">委托提供了事件处理中的灵活性和精确控制。</span><span class="sxs-lookup"><span data-stu-id="f38e6-140">Delegates provide flexibility and fine-grained control in event handling.</span></span> <span data-ttu-id="f38e6-141">委托人通过维护事件的已注册事件处理程序列表来充当引发事件的类的事件调度程序。</span><span class="sxs-lookup"><span data-stu-id="f38e6-141">A delegate acts as an event dispatcher for the class that raises the event by maintaining a list of registered event handlers for the event.</span></span>  
  
<span data-ttu-id="f38e6-142">在 <xref:System.EventHandler> 和 <xref:System.EventHandler%601> 委托不可用的场景下，您可以定义一个委托。</span><span class="sxs-lookup"><span data-stu-id="f38e6-142">For scenarios where the <xref:System.EventHandler> and <xref:System.EventHandler%601> delegates do not work, you can define a delegate.</span></span> <span data-ttu-id="f38e6-143">要求你定义委托的场景非常少见的，例如，当你必须处理无法识别泛型的代码时。</span><span class="sxs-lookup"><span data-stu-id="f38e6-143">Scenarios that require you to define a delegate are very rare, such as when you must work with code that does not recognize generics.</span></span> <span data-ttu-id="f38e6-144">在声明中使用 [`delegate`](../../csharp/language-reference/builtin-types/reference-types.md#the-delegate-type)（在 C# 中）和 [`Delegate`](../../visual-basic/language-reference/statements/delegate-statement.md)（在 Visual Basic 中）关键字标记委托。</span><span class="sxs-lookup"><span data-stu-id="f38e6-144">You mark a delegate with the C# [`delegate`](../../csharp/language-reference/builtin-types/reference-types.md#the-delegate-type) and Visual Basic [`Delegate`](../../visual-basic/language-reference/statements/delegate-statement.md) keyword in the declaration.</span></span> <span data-ttu-id="f38e6-145">下面的示例说明如何声明 `ThresholdReachedEventHandler` 委托。</span><span class="sxs-lookup"><span data-stu-id="f38e6-145">The following example shows how to declare a delegate named `ThresholdReachedEventHandler`.</span></span>  
  
[!code-csharp[EventsOverview#4](~/samples/snippets/csharp/VS_Snippets_CLR/eventsoverview/cs/programtruncated.cs#4)]
[!code-vb[EventsOverview#4](~/samples/snippets/visualbasic/VS_Snippets_CLR/eventsoverview/vb/module1truncated.vb#4)]  
  
## <a name="event-data"></a><span data-ttu-id="f38e6-146">事件数据</span><span class="sxs-lookup"><span data-stu-id="f38e6-146">Event data</span></span>

<span data-ttu-id="f38e6-147">与事件相关的数据可以通过事件数据类提供。</span><span class="sxs-lookup"><span data-stu-id="f38e6-147">Data that is associated with an event can be provided through an event data class.</span></span> <span data-ttu-id="f38e6-148">.NET 提供了许多事件数据类，用户可以在自己的应用程序中使用它们。</span><span class="sxs-lookup"><span data-stu-id="f38e6-148">.NET provides many event data classes that you can use in your applications.</span></span> <span data-ttu-id="f38e6-149">例如，<xref:System.IO.Ports.SerialDataReceivedEventArgs> 类是 <xref:System.IO.Ports.SerialPort.DataReceived?displayProperty=nameWithType> 事件的事件数据类。</span><span class="sxs-lookup"><span data-stu-id="f38e6-149">For example, the <xref:System.IO.Ports.SerialDataReceivedEventArgs> class is the event data class for the <xref:System.IO.Ports.SerialPort.DataReceived?displayProperty=nameWithType> event.</span></span> <span data-ttu-id="f38e6-150">.NET 遵循所有事件数据类以 `EventArgs` 结尾的命名模式。</span><span class="sxs-lookup"><span data-stu-id="f38e6-150">.NET follows a naming pattern of ending all event data classes with `EventArgs`.</span></span> <span data-ttu-id="f38e6-151">您通过查看事件的委托来确定哪个事件数据类与事件相关联。</span><span class="sxs-lookup"><span data-stu-id="f38e6-151">You determine which event data class is associated with an event by looking at the delegate for the event.</span></span> <span data-ttu-id="f38e6-152">例如，<xref:System.IO.Ports.SerialDataReceivedEventHandler> 委托包含 <xref:System.IO.Ports.SerialDataReceivedEventArgs> 类作为它的一个参数。</span><span class="sxs-lookup"><span data-stu-id="f38e6-152">For example, the <xref:System.IO.Ports.SerialDataReceivedEventHandler> delegate includes the <xref:System.IO.Ports.SerialDataReceivedEventArgs> class as one of its parameters.</span></span>  
  
<span data-ttu-id="f38e6-153"><xref:System.EventArgs> 类是所有事件数据类的基类型。</span><span class="sxs-lookup"><span data-stu-id="f38e6-153">The <xref:System.EventArgs> class is the base type for all event data classes.</span></span> <span data-ttu-id="f38e6-154">当一个事件没有任何与其相关联的数据时，您也会用到 <xref:System.EventArgs> 类。</span><span class="sxs-lookup"><span data-stu-id="f38e6-154"><xref:System.EventArgs> is also the class you use when an event does not have any data associated with it.</span></span> <span data-ttu-id="f38e6-155">当您创建一个事件仅用来通知其他类出问题了，不需要传递任何数据时，请包括 <xref:System.EventArgs> 类作为委托中的第二个参数。</span><span class="sxs-lookup"><span data-stu-id="f38e6-155">When you create an event that is only meant to notify other classes that something happened and does not need to pass any data, include the <xref:System.EventArgs> class as the second parameter in the delegate.</span></span> <span data-ttu-id="f38e6-156">当没有数据提供时，您可以传递 <xref:System.EventArgs.Empty?displayProperty=nameWithType> 值。</span><span class="sxs-lookup"><span data-stu-id="f38e6-156">You can pass the <xref:System.EventArgs.Empty?displayProperty=nameWithType> value when no data is provided.</span></span> <span data-ttu-id="f38e6-157"><xref:System.EventHandler> 委托包括 <xref:System.EventArgs> 类作为一个参数。</span><span class="sxs-lookup"><span data-stu-id="f38e6-157">The <xref:System.EventHandler> delegate includes the <xref:System.EventArgs> class as a parameter.</span></span>  
  
<span data-ttu-id="f38e6-158">当您想创建一个自定义的事件数据类时，请创建一个派生自 <xref:System.EventArgs> 的类，然后提供所需的所有成员，来传递与该事件相关的数据。</span><span class="sxs-lookup"><span data-stu-id="f38e6-158">When you want to create a customized event data class, create a class that derives from <xref:System.EventArgs>, and then provide any members needed to pass data that is related to the event.</span></span> <span data-ttu-id="f38e6-159">通常，应使用与 .NET 相同的命名模式，并且事件数据类名称应以 `EventArgs` 结尾。</span><span class="sxs-lookup"><span data-stu-id="f38e6-159">Typically, you should use the same naming pattern as .NET and end your event data class name with `EventArgs`.</span></span>  
  
<span data-ttu-id="f38e6-160">下面的示例演示了一个名为 `ThresholdReachedEventArgs` 的事件数据类。</span><span class="sxs-lookup"><span data-stu-id="f38e6-160">The following example shows an event data class named `ThresholdReachedEventArgs`.</span></span> <span data-ttu-id="f38e6-161">它包含特定于引发事件的属性。</span><span class="sxs-lookup"><span data-stu-id="f38e6-161">It contains properties that are specific to the event being raised.</span></span>  
  
[!code-csharp[EventsOverview#3](~/samples/snippets/csharp/VS_Snippets_CLR/eventsoverview/cs/programtruncated.cs#3)]
[!code-vb[EventsOverview#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/eventsoverview/vb/module1truncated.vb#3)]  
  
## <a name="event-handlers"></a><span data-ttu-id="f38e6-162">事件处理程序</span><span class="sxs-lookup"><span data-stu-id="f38e6-162">Event handlers</span></span>

<span data-ttu-id="f38e6-163">若要响应事件，您需要在事件接收器中定义一个事件处理程序方法。</span><span class="sxs-lookup"><span data-stu-id="f38e6-163">To respond to an event, you define an event handler method in the event receiver.</span></span> <span data-ttu-id="f38e6-164">此方法必须与您正处理的事件的委托签名匹配。</span><span class="sxs-lookup"><span data-stu-id="f38e6-164">This method must match the signature of the delegate for the event you are handling.</span></span> <span data-ttu-id="f38e6-165">在事件处理程序中，当事件引发时会执行所需操作，例如在用户单击按钮之后收集用户输入。</span><span class="sxs-lookup"><span data-stu-id="f38e6-165">In the event handler, you perform the actions that are required when the event is raised, such as collecting user input after the user clicks a button.</span></span> <span data-ttu-id="f38e6-166">若当事件发生时收到通知，您的事件处理程序方法必须订阅该事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-166">To receive notifications when the event occurs, your event handler method must subscribe to the event.</span></span>  
  
<span data-ttu-id="f38e6-167">下面的示例演示与 `c_ThresholdReached` 委托的签名匹配的 <xref:System.EventHandler> 事件处理程序方法。</span><span class="sxs-lookup"><span data-stu-id="f38e6-167">The following example shows an event handler method named `c_ThresholdReached` that matches the signature for the <xref:System.EventHandler> delegate.</span></span> <span data-ttu-id="f38e6-168">该方法订阅 `ThresholdReached` 事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-168">The method subscribes to the `ThresholdReached` event.</span></span>  
  
[!code-csharp[EventsOverview#2](~/samples/snippets/csharp/VS_Snippets_CLR/eventsoverview/cs/programtruncated.cs#2)]
[!code-vb[EventsOverview#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/eventsoverview/vb/module1truncated.vb#2)]  
  
## <a name="static-and-dynamic-event-handlers"></a><span data-ttu-id="f38e6-169">静态和动态事件处理程序</span><span class="sxs-lookup"><span data-stu-id="f38e6-169">Static and dynamic event handlers</span></span>  

<span data-ttu-id="f38e6-170">借助 .NET，订阅者可以进行静态或动态注册以获得事件通知。</span><span class="sxs-lookup"><span data-stu-id="f38e6-170">.NET allows subscribers to register for event notifications either statically or dynamically.</span></span> <span data-ttu-id="f38e6-171">对于其事件由静态事件处理程序进行处理的类，静态事件处理程序对其整个生命周期有效。</span><span class="sxs-lookup"><span data-stu-id="f38e6-171">Static event handlers are in effect for the entire life of the class whose events they handle.</span></span> <span data-ttu-id="f38e6-172">通常为响应某些条件程序逻辑，会在程序执行期间显式激活和停用动态事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="f38e6-172">Dynamic event handlers are explicitly activated and deactivated during program execution, usually in response to some conditional program logic.</span></span> <span data-ttu-id="f38e6-173">例如，如果仅在特定条件下需要事件通知，或如果应用程序提供多个事件处理程序且由运行时条件定义要使用的适当事件处理程序，则可以使用动态事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="f38e6-173">For example, they can be used if event notifications are needed only under certain conditions or if an application provides multiple event handlers and run-time conditions define the appropriate one to use.</span></span> <span data-ttu-id="f38e6-174">上一节中的示例演示如何动态添加事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="f38e6-174">The example in the previous section shows how to dynamically add an event handler.</span></span> <span data-ttu-id="f38e6-175">有关详细信息，请查看 Visual Basic 中的[事件](../../visual-basic/programming-guide/language-features/events/index.md)和 C# 中的[事件](../../csharp/programming-guide/events/index.md)。</span><span class="sxs-lookup"><span data-stu-id="f38e6-175">For more information, see [Events](../../visual-basic/programming-guide/language-features/events/index.md) (in Visual Basic) and [Events](../../csharp/programming-guide/events/index.md) (in C#).</span></span>  
  
## <a name="raising-multiple-events"></a><span data-ttu-id="f38e6-176">引发多个事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-176">Raising multiple events</span></span>  
 <span data-ttu-id="f38e6-177">如果您的类引发多个事件，编译器会为每一个事件委托实例生成一个字段。</span><span class="sxs-lookup"><span data-stu-id="f38e6-177">If your class raises multiple events, the compiler generates one field per event delegate instance.</span></span> <span data-ttu-id="f38e6-178">如果事件数量很大，则可能无法接受按一个委托计算一个字段的存储成本。</span><span class="sxs-lookup"><span data-stu-id="f38e6-178">If the number of events is large, the storage cost of one field per delegate may not be acceptable.</span></span> <span data-ttu-id="f38e6-179">对于这些情况，.NET 提供一个事件属性，可以将其与选择的另一数据结构一起用于存储事件委托。</span><span class="sxs-lookup"><span data-stu-id="f38e6-179">For those situations, .NET provides event properties that you can use with another data structure of your choice to store event delegates.</span></span>  
  
 <span data-ttu-id="f38e6-180">事件属性由事件声明和事件访问器组成。</span><span class="sxs-lookup"><span data-stu-id="f38e6-180">Event properties consist of event declarations accompanied by event accessors.</span></span> <span data-ttu-id="f38e6-181">事件访问器是您定义的方法，用来从存储数据结构添加和移除事件委托实例。</span><span class="sxs-lookup"><span data-stu-id="f38e6-181">Event accessors are methods that you define to add or remove event delegate instances from the storage data structure.</span></span> <span data-ttu-id="f38e6-182">请注意，事件属性要比事件字段慢，这是因为必须先检索每个事件委托，然后才能调用它。</span><span class="sxs-lookup"><span data-stu-id="f38e6-182">Note that event properties are slower than event fields, because each event delegate must be retrieved before it can be invoked.</span></span> <span data-ttu-id="f38e6-183">需在内存和速度之间进行权衡。</span><span class="sxs-lookup"><span data-stu-id="f38e6-183">The trade-off is between memory and speed.</span></span> <span data-ttu-id="f38e6-184">如果类定义许多不常引发的事件，那么需要实现事件属性。</span><span class="sxs-lookup"><span data-stu-id="f38e6-184">If your class defines many events that are infrequently raised, you will want to implement event properties.</span></span> <span data-ttu-id="f38e6-185">有关详细信息，请参阅[如何：使用事件属性处理多个事件](how-to-handle-multiple-events-using-event-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="f38e6-185">For more information, see [How to: Handle Multiple Events Using Event Properties](how-to-handle-multiple-events-using-event-properties.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="f38e6-186">相关主题</span><span class="sxs-lookup"><span data-stu-id="f38e6-186">Related topics</span></span>  
  
|<span data-ttu-id="f38e6-187">Title</span><span class="sxs-lookup"><span data-stu-id="f38e6-187">Title</span></span>|<span data-ttu-id="f38e6-188">描述</span><span class="sxs-lookup"><span data-stu-id="f38e6-188">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="f38e6-189">如何：抛出和使用事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-189">How to: Raise and Consume Events</span></span>](how-to-raise-and-consume-events.md)|<span data-ttu-id="f38e6-190">包含引发和使用事件的示例。</span><span class="sxs-lookup"><span data-stu-id="f38e6-190">Contains examples of raising and consuming events.</span></span>|  
|[<span data-ttu-id="f38e6-191">如何：使用事件属性处理多个事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-191">How to: Handle Multiple Events Using Event Properties</span></span>](how-to-handle-multiple-events-using-event-properties.md)|<span data-ttu-id="f38e6-192">演示如何使用事件属性处理多个事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-192">Shows how to use event properties to handle multiple events.</span></span>|  
|[<span data-ttu-id="f38e6-193">观察程序设计模式</span><span class="sxs-lookup"><span data-stu-id="f38e6-193">Observer Design Pattern</span></span>](observer-design-pattern.md)|<span data-ttu-id="f38e6-194">描述允许订阅者向提供方注册和接收通知的设计模式。</span><span class="sxs-lookup"><span data-stu-id="f38e6-194">Describes the design pattern that enables a subscriber to register with, and receive notifications from, a provider.</span></span>|  
|[<span data-ttu-id="f38e6-195">如何：在 Web 窗体应用程序中使用事件</span><span class="sxs-lookup"><span data-stu-id="f38e6-195">How to: Consume Events in a Web Forms Application</span></span>](how-to-consume-events-in-a-web-forms-application.md)|<span data-ttu-id="f38e6-196">演示如何处理 Web 窗体控件引发的事件。</span><span class="sxs-lookup"><span data-stu-id="f38e6-196">Shows how to handle an event that is raised by a Web Forms control.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="f38e6-197">请参阅</span><span class="sxs-lookup"><span data-stu-id="f38e6-197">See also</span></span>

- <xref:System.EventHandler>
- <xref:System.EventHandler%601>
- <xref:System.EventArgs>
- <xref:System.Delegate>
- [<span data-ttu-id="f38e6-198">事件 (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="f38e6-198">Events (Visual Basic)</span></span>](../../visual-basic/programming-guide/language-features/events/index.md)
- [<span data-ttu-id="f38e6-199">事件（C# 编程指南）</span><span class="sxs-lookup"><span data-stu-id="f38e6-199">Events (C# Programming Guide)</span></span>](../../csharp/programming-guide/events/index.md)
- [<span data-ttu-id="f38e6-200">事件和路由事件概述（UWP 应用）</span><span class="sxs-lookup"><span data-stu-id="f38e6-200">Events and routed events overview (UWP apps)</span></span>](/windows/uwp/xaml-platform/events-and-routed-events-overview)
