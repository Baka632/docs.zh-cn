---
title: 使用 Azure 云和 Windows 容器更新现有 .NET 应用程序
description: 阅读此电子书，了解如何将现有应用程序直接迁移到 Azure 云和 Windows 容器以实现现代化。
ms.date: 01/07/2021
ms.openlocfilehash: bf6e6dff75c939508947aabeda14955b880f5a89
ms.sourcegitcommit: 5d9cee27d9ffe8f5670e5f663434511e81b8ac38
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/08/2021
ms.locfileid: "98025462"
---
# <a name="modernize-existing-net-applications-with-azure-cloud-and-windows-containers"></a><span data-ttu-id="2be3c-103">使用 Azure 云和 Windows 容器现代化现有 .NET 应用程序</span><span class="sxs-lookup"><span data-stu-id="2be3c-103">Modernize existing .NET applications with Azure cloud and Windows Containers</span></span>

![现代化 .NET 应用程序指南的封面图像。](./media/index/web-application-guide-cover-image.png)

<span data-ttu-id="2be3c-105">**EDITION v5.0**</span><span class="sxs-lookup"><span data-stu-id="2be3c-105">**EDITION v5.0**</span></span>

<span data-ttu-id="2be3c-106">请参阅[更改记录](https://aka.ms/modernize-ebook-changelog)了解书籍更新和社区贡献。</span><span class="sxs-lookup"><span data-stu-id="2be3c-106">Refer [changelog](https://aka.ms/modernize-ebook-changelog) for the book updates and community contributions.</span></span>

<span data-ttu-id="2be3c-107">由 Microsoft 出版社和 Microsoft Corporation 的 Microsoft DevDiv 部门出版，华盛顿州雷蒙德市 One Microsoft Way 98052-6399</span><span class="sxs-lookup"><span data-stu-id="2be3c-107">PUBLISHED BY Microsoft Press and Microsoft DevDiv Divisions of Microsoft Corporation One Microsoft Way Redmond, Washington 98052-6399</span></span>

<span data-ttu-id="2be3c-108">版权所有 © 2021 Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="2be3c-108">Copyright © 2021 by Microsoft Corporation</span></span>

<span data-ttu-id="2be3c-109">保留所有权利。</span><span class="sxs-lookup"><span data-stu-id="2be3c-109">All rights reserved.</span></span> <span data-ttu-id="2be3c-110">未经发布者书面许可，不得以任何形式或任何方式复制本书中的任何内容。</span><span class="sxs-lookup"><span data-stu-id="2be3c-110">No part of the contents of this book may be reproduced in any form or by any means without the written permission of the publisher.</span></span>

<span data-ttu-id="2be3c-111">本书以电子书 (e-book) 形式免费提供，可通过 Microsoft 的多个通道获得，如 <https://dot.net/architecture>。</span><span class="sxs-lookup"><span data-stu-id="2be3c-111">This book is available for free in the form of an electronic book (e-book) available through multiple channels at Microsoft such as <https://dot.net/architecture>.</span></span>

<span data-ttu-id="2be3c-112">若要了解本书的相关问题，请发送电子邮件至 [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book)。</span><span class="sxs-lookup"><span data-stu-id="2be3c-112">If you have questions related to this book, email at [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book).</span></span>

<span data-ttu-id="2be3c-113">本书“按原样”提供，表达作者的观点和看法。</span><span class="sxs-lookup"><span data-stu-id="2be3c-113">This book is provided "as-is" and expresses the author's views and opinions.</span></span> <span data-ttu-id="2be3c-114">本书中表达的观点、看法和信息（包括 URL 和其他 Internet 网站引用）如有更改，恕不另行通知。</span><span class="sxs-lookup"><span data-stu-id="2be3c-114">The views, opinions, and information expressed in this book, including URL and other Internet website references, may change without notice.</span></span>

<span data-ttu-id="2be3c-115">本书中提及的一些示例仅用于说明，纯属虚构。</span><span class="sxs-lookup"><span data-stu-id="2be3c-115">Some examples depicted herein are provided for illustration only and are fictitious.</span></span> <span data-ttu-id="2be3c-116">不存在任何实际关联或联系，请勿妄加推断。</span><span class="sxs-lookup"><span data-stu-id="2be3c-116">No real association or connection is intended or should be inferred.</span></span>

<span data-ttu-id="2be3c-117">Microsoft 和 <https://www.microsoft.com> 上“商标”网页列出的商标是 Microsoft 集团公司的商标。</span><span class="sxs-lookup"><span data-stu-id="2be3c-117">Microsoft and the trademarks listed at <https://www.microsoft.com> on the "Trademarks" webpage are trademarks of the Microsoft group of companies.</span></span> <span data-ttu-id="2be3c-118">所有其他标记均为其各自所有者的财产。</span><span class="sxs-lookup"><span data-stu-id="2be3c-118">All other marks are property of their respective owners.</span></span>

<span data-ttu-id="2be3c-119">作者:</span><span class="sxs-lookup"><span data-stu-id="2be3c-119">Author:</span></span>
> <span data-ttu-id="2be3c-120">**Cesar de la Torre**，Microsoft Corp .NET 产品团队的高级项目经理。</span><span class="sxs-lookup"><span data-stu-id="2be3c-120">**Cesar de la Torre**, Sr. PM, .NET Product Team, Microsoft Corp.</span></span>

<span data-ttu-id="2be3c-121">参与者和审阅者：</span><span class="sxs-lookup"><span data-stu-id="2be3c-121">Participants and reviewers:</span></span>
> <span data-ttu-id="2be3c-122">.NET 团队的合作伙伴总监项目经理 Scott Hunter、Microsoft Visual Studio Tools 团队的主要项目经理 Paul Yuknewicz、Microsoft Visual Studio Tools 团队的高级项目经理 Lisa Guthrie、Microsoft .NET 团队的主要项目经理 Ankit Asthana、Microsoft Plain Concepts 的开发者领导 Unai Zorrilla、Grupo Solutio 的首席运营官 Javier Valero</span><span class="sxs-lookup"><span data-stu-id="2be3c-122">**Scott Hunter**, Partner Director PM, .NET team, Microsoft **Paul Yuknewicz**, Principal PM Manager, Visual Studio Tools team, Microsoft **Lisa Guthrie**, Sr. PM, Visual Studio Tools team, Microsoft **Ankit Asthana**, Principal PM Manager, .NET team, Microsoft **Unai Zorrilla**, Developer Lead, Plain Concepts **Javier Valero**, Chief Operating Officer at Grupo Solutio</span></span>

## <a name="introduction"></a><span data-ttu-id="2be3c-123">介绍</span><span class="sxs-lookup"><span data-stu-id="2be3c-123">Introduction</span></span>

<span data-ttu-id="2be3c-124">决定现代化 Web 应用程序或服务并将其迁移到云时，无需完全重新构建应用。</span><span class="sxs-lookup"><span data-stu-id="2be3c-124">When you decide to modernize your web applications or services and move them to the cloud, you don't necessarily have to fully rearchitect your apps.</span></span> <span data-ttu-id="2be3c-125">由于成本和时间限制，使用微服务之类的高级方法来重新构建应用程序并非始终可行。</span><span class="sxs-lookup"><span data-stu-id="2be3c-125">Rearchitecting an application by using an advanced approach like microservices isn't always an option because of cost and time restraints.</span></span> <span data-ttu-id="2be3c-126">根据应用程序的类型，也可能无需重新构建应用。</span><span class="sxs-lookup"><span data-stu-id="2be3c-126">Depending on the type of application, rearchitecting an app also might not be necessary.</span></span> <span data-ttu-id="2be3c-127">为了优化组织云迁移策略的成本效益，必须考虑业务和应用的需求。</span><span class="sxs-lookup"><span data-stu-id="2be3c-127">To optimize the cost-effectiveness of your organization's cloud migration strategy, it's important to consider the needs of your business and the requirements of your apps.</span></span> <span data-ttu-id="2be3c-128">需要确定：</span><span class="sxs-lookup"><span data-stu-id="2be3c-128">You'll need to determine:</span></span>

- <span data-ttu-id="2be3c-129">哪些应用需要转换或重新构建。</span><span class="sxs-lookup"><span data-stu-id="2be3c-129">Which apps require a transformation or rearchitecting.</span></span>

- <span data-ttu-id="2be3c-130">哪些应用只需部分更新。</span><span class="sxs-lookup"><span data-stu-id="2be3c-130">Which apps need to be only partially modernized.</span></span>

- <span data-ttu-id="2be3c-131">哪些应用能直接“直接迁移”到云。</span><span class="sxs-lookup"><span data-stu-id="2be3c-131">Which apps you can "lift and shift" directly to the cloud.</span></span>

## <a name="about-this-guide"></a><span data-ttu-id="2be3c-132">关于本指南</span><span class="sxs-lookup"><span data-stu-id="2be3c-132">About this guide</span></span>

<span data-ttu-id="2be3c-133">本指南主要重点介绍现有 Microsoft .NET Framework Web 应用程序或面向服务的应用程序的初始现代化，即将工作负载移动到更新或更现代化的环境，而不会显著改变应用程序的代码和基本体系结构。</span><span class="sxs-lookup"><span data-stu-id="2be3c-133">This guide focuses primarily on the initial modernization of existing Microsoft .NET Framework web or service-oriented applications, meaning the action of moving a workload to a newer or more modern environment without significantly altering the application's code and basic architecture.</span></span>

<span data-ttu-id="2be3c-134">本指南还强调使用一组特定的新技术和方法（如，Windows 容器和 Azure 中支持 Windows 容器的相关计算平台）将应用移动到云并部分现代化应用的益处。</span><span class="sxs-lookup"><span data-stu-id="2be3c-134">This guide also highlights the benefits of moving your apps to the cloud and partially modernizing apps by using a specific set of new technologies and approaches, like Windows Containers and related compute-platforms in Azure supporting Windows Containers.</span></span>

## <a name="path-to-the-cloud-for-existing-net-applications"></a><span data-ttu-id="2be3c-135">将现有 .NET 应用程序迁移到云的途径</span><span class="sxs-lookup"><span data-stu-id="2be3c-135">Path to the cloud for existing .NET applications</span></span>

<span data-ttu-id="2be3c-136">组织通常选择移动到云来使其应用程序获得敏捷性和速度。</span><span class="sxs-lookup"><span data-stu-id="2be3c-136">Organizations typically choose to move to the cloud for the agility and speed they can get for their applications.</span></span> <span data-ttu-id="2be3c-137">只需几分钟即可在云中设置数千台服务器 (VM)，而设置本地服务器通常需要数周。</span><span class="sxs-lookup"><span data-stu-id="2be3c-137">You can set up thousands of servers (VMs) in the cloud in minutes, compared to the weeks it typically takes to set up on-premises servers.</span></span>

<span data-ttu-id="2be3c-138">将应用程序迁移到云没有普遍通用的策略。</span><span class="sxs-lookup"><span data-stu-id="2be3c-138">There isn't a single, one-size-fits-all strategy for migrating applications to the cloud.</span></span> <span data-ttu-id="2be3c-139">合适的迁移方法由组织的需求和优先考虑事项，以及要迁移的应用程序种类决定。</span><span class="sxs-lookup"><span data-stu-id="2be3c-139">The right migration strategy for you will depend on your organization's needs and priorities, and the kind of applications you are migrating.</span></span> <span data-ttu-id="2be3c-140">并非所有应用程序都保证可以移动到平台即服务 ([PaaS](https://azure.microsoft.com/overview/what-is-paas/)) 模型或开发[云原生](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序模型。</span><span class="sxs-lookup"><span data-stu-id="2be3c-140">Not all applications warrant the investment of moving to a platform as a service ([PaaS](https://azure.microsoft.com/overview/what-is-paas/)) model or developing a [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) application model.</span></span> <span data-ttu-id="2be3c-141">许多情况下都可根据业务需求采用阶段性或递增性方法将资产移动到云。</span><span class="sxs-lookup"><span data-stu-id="2be3c-141">In many cases, you can take a phased or incremental approach to invest in moving your assets to the cloud, based on your business needs.</span></span>

<span data-ttu-id="2be3c-142">对于可为组织带来最佳长期敏捷性和价值的现代化应用程序，投资云本机应用程序体系结构是有益的。 </span><span class="sxs-lookup"><span data-stu-id="2be3c-142">For modern applications with the best long-term agility and value for the organization, you might benefit from investing in *cloud-native* application architectures.</span></span> <span data-ttu-id="2be3c-143">但是，对于现有或旧的应用程序资产，关键在于用最少的时间和金钱将应用程序移动到云（无需重新构建或更改代码），从而实现显著的效益。</span><span class="sxs-lookup"><span data-stu-id="2be3c-143">However, for applications that are existing or legacy assets, the key is to spend minimal time and money (no rearchitecting or code changes) while moving them to the cloud, to realize significant benefits.</span></span>

<span data-ttu-id="2be3c-144">图 1-1 显示了采用递增性方法将现有 .NET 应用程序移动到云时可能使用的途径。</span><span class="sxs-lookup"><span data-stu-id="2be3c-144">Figure 1-1 shows the possible paths you can take when you move existing .NET applications to the cloud in incremental phases.</span></span>

 ![现有 .NET 应用程序和服务的更新途径](./media/image1-1.png)

<span data-ttu-id="2be3c-146">**图 1-1**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-146">**Figure 1-1**.</span></span> <span data-ttu-id="2be3c-147">现有 .NET 应用程序和服务的更新途径</span><span class="sxs-lookup"><span data-stu-id="2be3c-147">Modernization paths for existing .NET applications and services</span></span>

<span data-ttu-id="2be3c-148">每种迁移方法的优点和使用原因各不相同。</span><span class="sxs-lookup"><span data-stu-id="2be3c-148">Each migration approach has different benefits and reasons for using it.</span></span> <span data-ttu-id="2be3c-149">可以选择一种方法将应用迁移到云，也可以从多种方法中选择某些组件。</span><span class="sxs-lookup"><span data-stu-id="2be3c-149">You can choose a single approach when you migrate apps to the cloud, or choose certain components from multiple approaches.</span></span> <span data-ttu-id="2be3c-150">单个应用程序不限于单一的方法或成熟度状态。</span><span class="sxs-lookup"><span data-stu-id="2be3c-150">Individual applications aren't limited to a single approach or maturity state.</span></span> <span data-ttu-id="2be3c-151">例如，常见的混合方法将包含某些本地组件以及云中的其他组件。</span><span class="sxs-lookup"><span data-stu-id="2be3c-151">For instance, a common hybrid approach would have certain on-premises components plus other components in the cloud.</span></span>

<span data-ttu-id="2be3c-152">每个应用程序成熟度的定义和简短说明如下所示：</span><span class="sxs-lookup"><span data-stu-id="2be3c-152">The definition and short explanation for each application maturity level are the following:</span></span>

<span data-ttu-id="2be3c-153">**级别 1：云基础结构就绪** 的应用程序：使用此迁移方法，只需将当前本地应用程序迁移或重新托管到基础结构即服务 ([IaaS](https://azure.microsoft.com/overview/what-is-iaas/)) 平台。</span><span class="sxs-lookup"><span data-stu-id="2be3c-153">**Level 1: Cloud Infrastructure-Ready** applications: In this migration approach, you just migrate or rehost your current on-premises applications to an infrastructure as a service ([IaaS](https://azure.microsoft.com/overview/what-is-iaas/)) platform.</span></span> <span data-ttu-id="2be3c-154">应用的组成与之前基本一致，但现在可将它们部署到云中的 VM。</span><span class="sxs-lookup"><span data-stu-id="2be3c-154">Your apps have almost the same composition as before, but now you deploy them to VMs in the cloud.</span></span>
<span data-ttu-id="2be3c-155">这种简单类型的迁移在业内通常称为“直接迁移”。</span><span class="sxs-lookup"><span data-stu-id="2be3c-155">This simple type of migration is typically known in the industry as "Lift & Shift."</span></span>

<span data-ttu-id="2be3c-156">**级别 2：云优化** 的应用程序：在此级别，仍无需重新架构或改写大量代码，可以利用容器和其他云托管服务等现代化技术在云中运行应用，从而获得更多益处。</span><span class="sxs-lookup"><span data-stu-id="2be3c-156">**Level 2: Cloud Optimized** applications: At this level and still without rearchitecting or altering significant code, you can gain additional benefits from running your app in the cloud with modern technologies like containers and additional cloud-managed services.</span></span> <span data-ttu-id="2be3c-157">通过优化企业开发操作 (DevOps) 流程，可以提高应用程序的敏捷性，以实现更快交付。</span><span class="sxs-lookup"><span data-stu-id="2be3c-157">You improve the agility of your applications to ship faster by refining your enterprise development operations (DevOps) processes.</span></span> <span data-ttu-id="2be3c-158">此功能可以通过使用某种技术（如基于 Docker 引擎的 Windows 容器）实现。</span><span class="sxs-lookup"><span data-stu-id="2be3c-158">You achieve this functionality by using technologies like Windows Containers, which is based on Docker Engine.</span></span> <span data-ttu-id="2be3c-159">分多个阶段部署时，容器可以消除因应用程序依赖项造成的冲突。</span><span class="sxs-lookup"><span data-stu-id="2be3c-159">Containers remove the friction that's caused by application dependencies when you deploy in multiple stages.</span></span> <span data-ttu-id="2be3c-160">在此成熟度模型中，可以在 IaaS 或 PaaS 上部署容器，同时使用与数据库、缓存即服务、监视以及持续集成/持续部署 (CI/CD) 管道相关的其他云托管服务。</span><span class="sxs-lookup"><span data-stu-id="2be3c-160">In this maturity model, you can deploy containers on IaaS or PaaS while using additional cloud-managed services related to databases, cache as a service, monitoring, and continuous integration/continuous deployment (CI/CD) pipelines.</span></span>

<span data-ttu-id="2be3c-161">第三个成熟度级别是云中的最终目标，但对于很多应用它是可选的，并不是本指南的主要重点：</span><span class="sxs-lookup"><span data-stu-id="2be3c-161">The third level of maturity is the ultimate goal in the cloud, but it's optional for many apps and not the main focus of this guide:</span></span>

<span data-ttu-id="2be3c-162">**级别 3：云本机** 应用程序：此迁移方法通常由业务需求驱动，目的是更新任务关键型应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-162">**Level 3: Cloud-Native** applications: This migration approach typically is driven by business need and targets modernizing your mission-critical applications.</span></span> <span data-ttu-id="2be3c-163">在此级别，使用 PaaS 服务将应用移动到 PaaS 计算平台。</span><span class="sxs-lookup"><span data-stu-id="2be3c-163">At this level, you use PaaS services to move your apps to PaaS computing platforms.</span></span> <span data-ttu-id="2be3c-164">实现[云原生](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序和微服务体系结构，以改进应用程序，使其具有长期的敏捷性并扩展至新的限制。</span><span class="sxs-lookup"><span data-stu-id="2be3c-164">You implement [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) applications and microservices architecture to evolve applications with long-term agility, and to scale to new limits.</span></span> <span data-ttu-id="2be3c-165">此类更新通常需要专门针对云进行构建。</span><span class="sxs-lookup"><span data-stu-id="2be3c-165">This type of modernization usually requires architecting specifically for the cloud.</span></span> <span data-ttu-id="2be3c-166">通常必须编写新代码，尤其是移动到基于云原生应用程序和微服务的模型时。</span><span class="sxs-lookup"><span data-stu-id="2be3c-166">New code often must be written, especially when you move to cloud-native application and microservice-based models.</span></span> <span data-ttu-id="2be3c-167">此方法有助于获得一些益处，这些益处在单片和本地应用程序环境中很难实现。</span><span class="sxs-lookup"><span data-stu-id="2be3c-167">This approach can help you gain benefits that are difficult to achieve in your monolithic and on-premises application environment.</span></span>

<span data-ttu-id="2be3c-168">表 1-1 介绍了选择每种迁移或更新方法的主要优点和原因。</span><span class="sxs-lookup"><span data-stu-id="2be3c-168">Table 1-1 describes the main benefits of and reasons for choosing each migration or modernization approach.</span></span>

| <span data-ttu-id="2be3c-169">**云基础结构就绪**</span><span class="sxs-lookup"><span data-stu-id="2be3c-169">**Cloud Infrastructure-Ready**</span></span> <br /> <span data-ttu-id="2be3c-170">*直接迁移*</span><span class="sxs-lookup"><span data-stu-id="2be3c-170">*Lift and shift*</span></span> | <span data-ttu-id="2be3c-171">**云优化**</span><span class="sxs-lookup"><span data-stu-id="2be3c-171">**Cloud-Optimized**</span></span> <br /> <span data-ttu-id="2be3c-172">*现代化*</span><span class="sxs-lookup"><span data-stu-id="2be3c-172">*Modernize*</span></span> | <span data-ttu-id="2be3c-173">**云本机**</span><span class="sxs-lookup"><span data-stu-id="2be3c-173">**Cloud-Native**</span></span> <br /> <span data-ttu-id="2be3c-174">现代化、重新架构和重写</span><span class="sxs-lookup"><span data-stu-id="2be3c-174">*Modernize, rearchitect, and rewrite*</span></span> |
|---|---|---|
| <span data-ttu-id="2be3c-175">**应用程序的计算目标**</span><span class="sxs-lookup"><span data-stu-id="2be3c-175">**Application's compute target**</span></span> |
| <span data-ttu-id="2be3c-176">部署到 Azure 中 VM 的应用程序</span><span class="sxs-lookup"><span data-stu-id="2be3c-176">Applications deployed to VMs in Azure</span></span> | <span data-ttu-id="2be3c-177">部署到 Azure 应用服务、Azure 容器实例 (ACI)、包含容器的 VM 或 AKS（Azure Kubernetes 服务）的单层或 N 层应用</span><span class="sxs-lookup"><span data-stu-id="2be3c-177">Monolithic or N-Tier apps deployed to Azure App Service, Azure Container Instance (ACI), VMs with containers, or AKS (Azure Kubernetes Service)</span></span> | <span data-ttu-id="2be3c-178">Azure Kubernetes 服务 (AKS) 上的容器化的微服务和/或基于 Azure Functions 的无服务器微服务。</span><span class="sxs-lookup"><span data-stu-id="2be3c-178">Containerized microservices on Azure Kubernetes Service (AKS) and/or serverless microservices based on Azure Functions.</span></span> |
| <span data-ttu-id="2be3c-179">**数据目标**</span><span class="sxs-lookup"><span data-stu-id="2be3c-179">**Data target**</span></span> |
| <span data-ttu-id="2be3c-180">VM 中的 SQL 或任何关系数据库</span><span class="sxs-lookup"><span data-stu-id="2be3c-180">SQL or any relational database on a VM</span></span> | <span data-ttu-id="2be3c-181">Azure SQL 数据库托管实例或云中的其他托管数据库。</span><span class="sxs-lookup"><span data-stu-id="2be3c-181">Azure SQL Database Managed Instance or another managed database in the cloud.</span></span> | <span data-ttu-id="2be3c-182">针对每项微服务的精细数据库，基于 Azure SQL 数据库、Azure Cosmos DB 或云中其他托管数据库</span><span class="sxs-lookup"><span data-stu-id="2be3c-182">Fined-grain databases per microservice, based on Azure SQL Database, Azure Cosmos DB, or another managed database in the cloud</span></span> |
| <span data-ttu-id="2be3c-183">**优点**</span><span class="sxs-lookup"><span data-stu-id="2be3c-183">**Advantages**</span></span>|
| <li><span data-ttu-id="2be3c-184">无需重新架构，无需编写新代码</span><span class="sxs-lookup"><span data-stu-id="2be3c-184">No rearchitecting, no new code</span></span> <li> <span data-ttu-id="2be3c-185">需要的工作量最少，实现快速迁移</span><span class="sxs-lookup"><span data-stu-id="2be3c-185">Least effort for quick migration</span></span> <li> <span data-ttu-id="2be3c-186">Azure 中支持最小公分母</span><span class="sxs-lookup"><span data-stu-id="2be3c-186">Least-common denominator supported in Azure</span></span> <li> <span data-ttu-id="2be3c-187">保证基本可用性</span><span class="sxs-lookup"><span data-stu-id="2be3c-187">Basic availability guarantees</span></span> <li> <span data-ttu-id="2be3c-188">移动到云后，更容易更新</span><span class="sxs-lookup"><span data-stu-id="2be3c-188">After moving to the cloud, it's easier to modernize even more</span></span> | <li> <span data-ttu-id="2be3c-189">无需重新架构</span><span class="sxs-lookup"><span data-stu-id="2be3c-189">No rearchitecting</span></span> <li> <span data-ttu-id="2be3c-190">极少代码/配置更改</span><span class="sxs-lookup"><span data-stu-id="2be3c-190">Minimal code/config changes</span></span> <li> <span data-ttu-id="2be3c-191">由于容器的原因，改进了部署和 DevOps 发布敏捷性</span><span class="sxs-lookup"><span data-stu-id="2be3c-191">Improved deployment and DevOps agility to release because of containers</span></span> <li> <span data-ttu-id="2be3c-192">增加了密度，降低了部署成本</span><span class="sxs-lookup"><span data-stu-id="2be3c-192">Increased density and lower deployment costs</span></span> <li> <span data-ttu-id="2be3c-193">应用的可移植性和依赖项</span><span class="sxs-lookup"><span data-stu-id="2be3c-193">Portability of apps and dependencies</span></span> <li> <span data-ttu-id="2be3c-194">主机目标的灵活性：PaaS 方法或 IaaS</span><span class="sxs-lookup"><span data-stu-id="2be3c-194">Flexibility of host targets: PaaS approaches or IaaS</span></span> | <li> <span data-ttu-id="2be3c-195">针对云进行架构，可以从云获得最大优势，但需要新代码</span><span class="sxs-lookup"><span data-stu-id="2be3c-195">Architect for the cloud, you get the best benefits from the cloud but new code is needed</span></span> <li> <span data-ttu-id="2be3c-196">微服务云原生方法</span><span class="sxs-lookup"><span data-stu-id="2be3c-196">Microservices cloud-native approaches</span></span> <li> <span data-ttu-id="2be3c-197">现代化任务关键型应用程序，具有云复原能力，可实现超大规模缩放</span><span class="sxs-lookup"><span data-stu-id="2be3c-197">Modern mission-critical applications, cloud-resilient hyper-scalable</span></span> <li> <span data-ttu-id="2be3c-198">完全托管服务</span><span class="sxs-lookup"><span data-stu-id="2be3c-198">Fully managed services</span></span> <li> <span data-ttu-id="2be3c-199">优化了规模</span><span class="sxs-lookup"><span data-stu-id="2be3c-199">Optimized for scale</span></span> <li> <span data-ttu-id="2be3c-200">通过子系统优化了自主敏捷性</span><span class="sxs-lookup"><span data-stu-id="2be3c-200">Optimized for autonomous agility by subsystem</span></span> <li> <span data-ttu-id="2be3c-201">基于部署和 DevOps</span><span class="sxs-lookup"><span data-stu-id="2be3c-201">Built on deployment and DevOps</span></span> |
| <span data-ttu-id="2be3c-202">**挑战**</span><span class="sxs-lookup"><span data-stu-id="2be3c-202">**Challenges**</span></span> |
| <li> <span data-ttu-id="2be3c-203">除转移运营费用或关闭数据中心之外，云价值较小</span><span class="sxs-lookup"><span data-stu-id="2be3c-203">Smaller cloud value, other than the shift in operating expense or closing datacenters</span></span> <li> <span data-ttu-id="2be3c-204">几乎无需管理：无 OS 或中间件修补；可使用基础架构解决方案，如 Terraform、Spinnaker 或 Puppet</span><span class="sxs-lookup"><span data-stu-id="2be3c-204">Little is managed: No OS or middleware patching; might use infrastructure solutions, like Terraform, Spinnaker, or Puppet</span></span> | <li> <span data-ttu-id="2be3c-205">容器化是开发者和 IT 运营学习曲线中一个额外的步骤</span><span class="sxs-lookup"><span data-stu-id="2be3c-205">Containerizing is an additional step in the learning curve for developers and IT Operations</span></span> <li> <span data-ttu-id="2be3c-206">DevOps 和 CI/CD 管道通常是此方法的“必备项”。</span><span class="sxs-lookup"><span data-stu-id="2be3c-206">DevOps and CI/CD pipelines are usually 'a must' for this approach.</span></span> <span data-ttu-id="2be3c-207">如果组织文化中当前没有这些必备品，这可能是一个额外的挑战</span><span class="sxs-lookup"><span data-stu-id="2be3c-207">If not currently present in the culture of the organization, it might be an additional challenge</span></span>| <li> <span data-ttu-id="2be3c-208">进行现代化时，需要重新架构云本机应用和微服务体系结构，并且通常需要进行大量的代码重构或重写（增加时间和预算）</span><span class="sxs-lookup"><span data-stu-id="2be3c-208">Requires rearchitecture for cloud-native apps and microservice architectures and usually requires significant code refactoring or rewriting when modernizing (increased time and budget)</span></span>|
> <span data-ttu-id="2be3c-209">**表 1-1**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-209">**Table 1-1.**</span></span> <span data-ttu-id="2be3c-210">现有 .NET 应用程序和服务的更新途径的优势和挑战</span><span class="sxs-lookup"><span data-stu-id="2be3c-210">Benefits and challenges of modernization paths for existing .NET applications and services</span></span>

### <a name="key-technologies-and-architectures-by-maturity-level"></a><span data-ttu-id="2be3c-211">各成熟度级别使用的关键技术和体系结构</span><span class="sxs-lookup"><span data-stu-id="2be3c-211">Key technologies and architectures by maturity level</span></span>

<span data-ttu-id="2be3c-212">.NET Framework 应用程序的初始版本为 .NET Framework 1.0，该版本于 2001 年年底发布。</span><span class="sxs-lookup"><span data-stu-id="2be3c-212">.NET Framework applications initially started with the .NET Framework version 1.0, which was released in late 2001.</span></span> <span data-ttu-id="2be3c-213">然后，公司发布了更新的版本（如 2.0、3.5 和 .NET Framework 4.x）。</span><span class="sxs-lookup"><span data-stu-id="2be3c-213">Then, companies moved towards newer versions (such as 2.0, 3.5 and .NET Framework 4.x).</span></span> <span data-ttu-id="2be3c-214">这些应用程序中的大部分都在 Windows Server 和 Internet Information Server (IIS) 上运行，并使用关系数据库，如 SQL Server、Oracle、MySQL 或任何其他关系数据库管理系统。</span><span class="sxs-lookup"><span data-stu-id="2be3c-214">Most of those applications ran on Windows Server and Internet Information Server (IIS), and used a relational database, like SQL Server, Oracle, MySQL, or any other RDBMS.</span></span>

<span data-ttu-id="2be3c-215">当今大部分现有 .NET 应用程序可能都基于 .NET Framework 4.x，甚至 .NET Framework 3.5，并使用 Web 框架，如 ASP.NET MVC、ASP.NET Web 窗体、ASP.NET Web API、Windows Communication Foundation (WCF)、ASP.NET SignalR 和 ASP.NET 网页。</span><span class="sxs-lookup"><span data-stu-id="2be3c-215">Most existing .NET applications might nowadays be based on .NET Framework 4.x, or even on .NET Framework 3.5, and use web frameworks like ASP.NET MVC, ASP.NET Web Forms, ASP.NET Web API, Windows Communication Foundation (WCF), ASP.NET SignalR, and ASP.NET Web Pages.</span></span> <span data-ttu-id="2be3c-216">这些既定的 .NET Framework 技术都依赖于 Windows。</span><span class="sxs-lookup"><span data-stu-id="2be3c-216">These established .NET Framework technologies depend on Windows.</span></span> <span data-ttu-id="2be3c-217">如果只是简单地迁移旧版应用并希望对应用程序基础结构作出最少的更改，依赖项是一项重要的考虑因素。</span><span class="sxs-lookup"><span data-stu-id="2be3c-217">That dependency is important to consider if you are simply migrating legacy apps and you want to make minimal changes to your application infrastructure.</span></span>

<span data-ttu-id="2be3c-218">图 1-2 显示了三个云成熟度级别中每一个级别所使用的主要技术和体系结构样式：</span><span class="sxs-lookup"><span data-stu-id="2be3c-218">Figure 1-2 shows the primary technologies and architecture styles used at each of the three cloud maturity levels:</span></span>

![用于更新现有 .NET Web 应用程序的每个成熟度级别的主要技术](./media/image1-2.png)

<span data-ttu-id="2be3c-220">**图 1-2**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-220">**Figure 1-2.**</span></span> <span data-ttu-id="2be3c-221">用于更新现有 .NET Web 应用程序的每个成熟度级别的主要技术</span><span class="sxs-lookup"><span data-stu-id="2be3c-221">Primary technologies for each maturity level for modernizing existing .NET web applications</span></span>

<span data-ttu-id="2be3c-222">图 1-2 强调了最常见的方案，但在体系结构方面，可能存在许多混合变体。</span><span class="sxs-lookup"><span data-stu-id="2be3c-222">Figure 1-2 highlights the most common scenarios, but many hybrid and mixed variations are possible when it comes to architecture.</span></span> <span data-ttu-id="2be3c-223">例如，成熟度模型不仅适用于现有 Web 应用的单片体系结构，还适用于服务方向、N 层以及其他体系结构样式变体。</span><span class="sxs-lookup"><span data-stu-id="2be3c-223">For example, the maturity models apply not only to monolithic architectures in existing web apps, but also to service orientation, N-Tier, and other architecture style variations.</span></span> <span data-ttu-id="2be3c-224">一种或另一种体系结构类型及相关技术的关注度或占比更高，决定了应用程序的总体成熟度。</span><span class="sxs-lookup"><span data-stu-id="2be3c-224">The higher focus or percentage on one or another architecture type and related technologies determines the overall maturity level of your applications.</span></span>

<span data-ttu-id="2be3c-225">更新流程中的每个成熟度级别与以下关键技术和方法相关：</span><span class="sxs-lookup"><span data-stu-id="2be3c-225">Each maturity level in the modernization process is associated with the following key technologies and approaches:</span></span>

- <span data-ttu-id="2be3c-226">**云基础结构就绪**（重新托管或基础直接迁移）：作为第一步，很多组织只想快速执行云迁移策略。</span><span class="sxs-lookup"><span data-stu-id="2be3c-226">**Cloud Infrastructure-Ready** (rehost or basic lift & shift): As a first step, many organizations want only to quickly execute a cloud-migration strategy.</span></span> <span data-ttu-id="2be3c-227">在这种情况下，要重新托管应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-227">In this case, applications are rehosted.</span></span> <span data-ttu-id="2be3c-228">大多数重新托管均可使用 [Azure Migrate](https://aka.ms/azuremigrate) 自动完成，该服务提供指南、见解和机制，帮助迁移到基于 Azure 的云工具（如 [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) 和 [Azure 数据库迁移服务](https://azure.microsoft.com/campaigns/database-migration/)）。</span><span class="sxs-lookup"><span data-stu-id="2be3c-228">Most rehosting can be automated by using [Azure Migrate](https://aka.ms/azuremigrate), a service that provides the guidance, insights, and mechanisms needed to assist you in migrating to Azure based on cloud tools like [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) and [Azure Database Migration Service](https://azure.microsoft.com/campaigns/database-migration/).</span></span> <span data-ttu-id="2be3c-229">也可以手动设置重新托管，以便在将旧版应用移动到云时了解关于这些资产的基础结构详细信息。</span><span class="sxs-lookup"><span data-stu-id="2be3c-229">You can also set up rehosting manually, so that you can learn infrastructure details about your assets when you move legacy apps to the cloud.</span></span> <span data-ttu-id="2be3c-230">例如，可以在只做些许更改（或许只对配置做出细微更改）的情况下将应用程序移动到 Azure 中的 VM。</span><span class="sxs-lookup"><span data-stu-id="2be3c-230">For example, you can move your applications to VMs in Azure with little modification-probably with only minor configuration changes.</span></span> <span data-ttu-id="2be3c-231">这种情况下的网络类似于本地环境，尤其是在 Azure 中创建虚拟网络时。</span><span class="sxs-lookup"><span data-stu-id="2be3c-231">The networking in this case is similar to an on-premises environment, especially if you create virtual networks in Azure.</span></span>

- <span data-ttu-id="2be3c-232">**云优化**（托管服务和 Windows 容器）：此模型进行了一些重要的部署优化，可获得云带来的显著益处，并且不需要更改应用程序的核心体系结构。</span><span class="sxs-lookup"><span data-stu-id="2be3c-232">**Cloud-Optimized** (Managed Services and Windows Containers): This model is about making a few important deployment optimizations to gain some significant benefits from the cloud, without changing the core architecture of the application.</span></span> <span data-ttu-id="2be3c-233">此处的基本步骤是对现有 .NET Framework 应用程序增加 [Windows 容器](/virtualization/windowscontainers/about/) 支持。</span><span class="sxs-lookup"><span data-stu-id="2be3c-233">The fundamental step here is to add [Windows Containers](/virtualization/windowscontainers/about/) support to your existing .NET Framework applications.</span></span> <span data-ttu-id="2be3c-234">此重要步骤（容器化）不需要触及代码，因此直接迁移的总体工作量很少。</span><span class="sxs-lookup"><span data-stu-id="2be3c-234">This important step (containerization) doesn't require touching the code, so the overall lift and shift effort is light.</span></span> <span data-ttu-id="2be3c-235">可以使用 [Image2Docker](https://github.com/docker/communitytools-image2docker-win) 或 Visual Studio 之类的工具，Visual Studio 带有适用于 [Docker](https://www.docker.com/) 的工具。</span><span class="sxs-lookup"><span data-stu-id="2be3c-235">You can use tools like [Image2Docker](https://github.com/docker/communitytools-image2docker-win) or Visual Studio, with its tools for [Docker](https://www.docker.com/).</span></span> <span data-ttu-id="2be3c-236">Visual Studio 自动为 ASP.NET 应用程序和 Windows 容器映像选择智能默认值。</span><span class="sxs-lookup"><span data-stu-id="2be3c-236">Visual Studio automatically chooses smart defaults for ASP.NET applications and Windows Containers images.</span></span> <span data-ttu-id="2be3c-237">这些工具提供快速内部循环，并提供将容器迁移到 Azure 的快速途径。</span><span class="sxs-lookup"><span data-stu-id="2be3c-237">These tools offer both a rapid inner loop, and a fast path to get the containers to Azure.</span></span> <span data-ttu-id="2be3c-238">部署到多个环境中时，敏捷性得到提高。</span><span class="sxs-lookup"><span data-stu-id="2be3c-238">Your agility is improved when you deploy to multiple environments.</span></span>
<span data-ttu-id="2be3c-239">然后，要迁移到生产环境，可以将 Windows 容器部署到[用于容器的 Azure Web 应用](https://azure.microsoft.com/services/app-service/containers/)、[Azure 容器实例 (ACI)](https://azure.microsoft.com/services/container-instances/)；如果更希望采用 IaaS 方法，还可部署到具有 Windows Server 2016 和容器的 Azure VM。</span><span class="sxs-lookup"><span data-stu-id="2be3c-239">Then, moving to production, you can deploy your Windows Containers to [Azure Web App for Containers](https://azure.microsoft.com/services/app-service/containers/), [Azure Container Instances (ACI)](https://azure.microsoft.com/services/container-instances/), and Azure VMs with Windows Server 2016 and containers if you prefer an IaaS approach.</span></span> <span data-ttu-id="2be3c-240">对于更复杂的多容器应用程序，请考虑使用 [Azure Kubernetes 服务 (AKS/ACS)](https://azure.microsoft.com/services/container-service/) 等业务流程协调程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-240">For more complex multi-container applications, consider using orchestrators like [Azure Kubernetes Service (AKS/ACS)](https://azure.microsoft.com/services/container-service/).</span></span>

<span data-ttu-id="2be3c-241">初次更新期间，还可以从云中添加资产，如使用如下工具进行监视：[Azure Application Insights](/azure/application-insights/app-insights-overview)适用于应用生命周期且带 [Azure DevOps 服务](https://azure.microsoft.com/services/devops/)的 CI/CD 管道，以及 Azure 中提供的许多其他数据资源服务。</span><span class="sxs-lookup"><span data-stu-id="2be3c-241">During this initial modernization, you can also add assets from the cloud, such as monitoring with tools like [Azure Application Insights](/azure/application-insights/app-insights-overview); CI/CD pipelines for your app lifecycles with [Azure DevOps Services](https://azure.microsoft.com/services/devops/); and many more data resource services that are available in Azure.</span></span> <span data-ttu-id="2be3c-242">例如，可以修改单片 Web 应用，该应用最初使用传统 [ASP.NET Web 窗体](https://www.asp.net/web-forms)或 [ASP.NET MVC](https://www.asp.net/mvc) 开发，但现在使用 Windows 容器部署。</span><span class="sxs-lookup"><span data-stu-id="2be3c-242">For instance, you can modify a monolithic web app that was originally developed by using traditional [ASP.NET Web Forms](https://www.asp.net/web-forms) or [ASP.NET MVC](https://www.asp.net/mvc), but now you deploy it by using Windows Containers.</span></span> <span data-ttu-id="2be3c-243">使用 Windows 容器时，还需要将数据迁移到 [Azure SQL 数据库托管实例](/azure/sql-database/)中的数据库，但不需要更改应用程序的核心体系结构。</span><span class="sxs-lookup"><span data-stu-id="2be3c-243">When you use Windows Containers, you should also migrate your data to a database in [Azure SQL Database Managed Instance](/azure/sql-database/), all without changing the core architecture of your application.</span></span>

- <span data-ttu-id="2be3c-244">**云本机**：如上所述，在以大型复杂应用程序为目标，由多个独立开发团队独立开发和部署不同的微服务时，应考虑架构 [云本机](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-244">**Cloud-Native**: As introduced, you should think about architecting [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) applications when you are targeting large and complex applications with multiple independent development teams working on different microservices that can be developed and deployed autonomously.</span></span> <span data-ttu-id="2be3c-245">此外，还有一个原因是每个微服务有精细化且独立的可扩展性。</span><span class="sxs-lookup"><span data-stu-id="2be3c-245">Also, due to granularized and independent scalability per microservice.</span></span> <span data-ttu-id="2be3c-246">这种体系结构方法面临着非常重要的挑战和复杂性，但使用云 PaaS、[Azure Kubernetes 服务 (AKS/ACS)](https://azure.microsoft.com/services/container-service/)（托管 Kubernetes）等业务流程协调程序和 [Azure Functions](https://azure.microsoft.com/services/functions/) 构建无服务器方法，可大大简化工作。</span><span class="sxs-lookup"><span data-stu-id="2be3c-246">These architectural approaches face very important challenges and complexities but can be greatly simplified by using cloud PaaS and orchestrators like [Azure Kubernetes Service (AKS/ACS)](https://azure.microsoft.com/services/container-service/) (managed Kubernetes), and [Azure Functions](https://azure.microsoft.com/services/functions/) for a serverless approach.</span></span> <span data-ttu-id="2be3c-247">以上所有方法（如微服务和无服务器）通常需要架构云并编写新代码，新代码应适用于特定的 PaaS 平台或符合特定的体系结构（如微服务）。</span><span class="sxs-lookup"><span data-stu-id="2be3c-247">All these approaches (like microservices and Serverless) typically require you to architect for the cloud and write new code—code that is adapted to specific PaaS platforms, or code that aligns with specific architectures, like microservices.</span></span>

<span data-ttu-id="2be3c-248">图 1-3 显示了每个成熟度级别可使用的内部技术：</span><span class="sxs-lookup"><span data-stu-id="2be3c-248">Figure 1-3 shows the internal technologies that you can use for each maturity level:</span></span>

![每个更新成熟度级别可使用的内部技术](./media/image1-3.png)

<span data-ttu-id="2be3c-250">**图 1-3**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-250">**Figure 1-3.**</span></span> <span data-ttu-id="2be3c-251">每个更新成熟度级别可使用的内部技术</span><span class="sxs-lookup"><span data-stu-id="2be3c-251">Internal technologies for each modernization maturity level</span></span>

## <a name="lift-and-shift-scenario"></a><span data-ttu-id="2be3c-252">直接迁移方案</span><span class="sxs-lookup"><span data-stu-id="2be3c-252">Lift and shift scenario</span></span>

<span data-ttu-id="2be3c-253">对于直接迁移，请记住，在应用程序方案中可以使用很多不同的直接迁移变体。</span><span class="sxs-lookup"><span data-stu-id="2be3c-253">For lift and shift migrations, keep in mind that you can use many different variations of lift and shift in your application scenarios.</span></span> <span data-ttu-id="2be3c-254">如果仅重新托管应用程序，则可能拥有类似于图 1-4 中所示的方案，在此方案中，仅对应用程序和数据库服务器使用云中的 VM。</span><span class="sxs-lookup"><span data-stu-id="2be3c-254">If you only rehost your application, you might have a scenario like the one shown in Figure 1-4, where you use VMs in the cloud only for your application and for your database server.</span></span>

![云中纯 IaaS 方案的示例](./media/image1-4.png)

<span data-ttu-id="2be3c-256">**图 1-4**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-256">**Figure 1-4**.</span></span> <span data-ttu-id="2be3c-257">云中纯 IaaS 方案的示例</span><span class="sxs-lookup"><span data-stu-id="2be3c-257">Example of a pure IaaS scenario in the cloud</span></span>

## <a name="modernization-scenarios"></a><span data-ttu-id="2be3c-258">现代化方案</span><span class="sxs-lookup"><span data-stu-id="2be3c-258">Modernization scenarios</span></span>

<span data-ttu-id="2be3c-259">对于现代化方案，你可能拥有一个纯云优化的应用程序，该应用程序仅使用该成熟度级别的元素。</span><span class="sxs-lookup"><span data-stu-id="2be3c-259">For modernization scenarios, you might have a pure Cloud-Optimized application that uses elements only from that maturity level.</span></span> <span data-ttu-id="2be3c-260">或者，你可能拥有中间状态的应用程序，该应用程序同时使用云基础结构就绪级别的元素以及云优化级别的其他元素（“挑选”或混合模型），如图 1-5。</span><span class="sxs-lookup"><span data-stu-id="2be3c-260">Or, you might have an intermediate-state application with some elements from Cloud Infrastructure-Ready and other elements from Cloud-Optimized (a "pick and choose" or mixed model), like in Figure 1-5.</span></span>

![“挑选”方案示例，使用 IaaS 数据库、DevOps 和容器化资产](./media/image1-5.png)

<span data-ttu-id="2be3c-262">**图 1-5**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-262">**Figure 1-5.**</span></span> <span data-ttu-id="2be3c-263">“挑选”方案示例，使用 IaaS 数据库、DevOps 和容器化资产</span><span class="sxs-lookup"><span data-stu-id="2be3c-263">Example "pick and choose" scenario, with database on IaaS, DevOps, and containerization assets</span></span>

<span data-ttu-id="2be3c-264">对于要迁移的许多现有 .NET Framework 应用程序而言，理想的方案是迁移到云优化应用程序，以实现事半功倍。</span><span class="sxs-lookup"><span data-stu-id="2be3c-264">Next, as the ideal scenario for many existing .NET Framework applications to migrate, you could migrate to a Cloud-Optimized application, to get significant benefits from little work.</span></span> <span data-ttu-id="2be3c-265">使用这种方法，将来还可进一步实现云本机。</span><span class="sxs-lookup"><span data-stu-id="2be3c-265">This approach also sets you up for Cloud-Native as a possible future evolution.</span></span> <span data-ttu-id="2be3c-266">图 1-6 显示了一个示例。</span><span class="sxs-lookup"><span data-stu-id="2be3c-266">Figure 1-6 shows an example.</span></span>

![云优化应用方案示例，使用 Windows 容器和托管服务](./media/image1-6.png)

<span data-ttu-id="2be3c-268">**图 1-6**。</span><span class="sxs-lookup"><span data-stu-id="2be3c-268">**Figure 1-6.**</span></span> <span data-ttu-id="2be3c-269">云优化应用方案示例，使用 Windows 容器和托管服务</span><span class="sxs-lookup"><span data-stu-id="2be3c-269">Example Cloud-Optimized apps scenario, with Windows Containers and managed services</span></span>

<span data-ttu-id="2be3c-270">你可以通过为特定方案添加若干微服务来扩展现有的云优化应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-270">Going even further, you could extend your existing Cloud-Optimized application by adding a few microservices for specific scenarios.</span></span> <span data-ttu-id="2be3c-271">此方法可将你部分移动到云本机模型级别，当前指南不重点介绍此部分。</span><span class="sxs-lookup"><span data-stu-id="2be3c-271">This approach would move you partially to the level of Cloud-Native model, which is not the main focus of the present guidance.</span></span>

## <a name="what-this-guide-does-not-cover"></a><span data-ttu-id="2be3c-272">本指南未涵盖的内容</span><span class="sxs-lookup"><span data-stu-id="2be3c-272">What this guide does not cover</span></span>

<span data-ttu-id="2be3c-273">本指南涵盖了一小部分特定的示例方案，如图 1-7 所示。</span><span class="sxs-lookup"><span data-stu-id="2be3c-273">This guide covers a specific subset of the example scenarios, as shown in Figure 1-7.</span></span> <span data-ttu-id="2be3c-274">本指南仅着重介绍直接迁移方案，最终着重介绍云优化模型。</span><span class="sxs-lookup"><span data-stu-id="2be3c-274">This guide focuses only on the lift and shift scenarios, and ultimately, on the Cloud-Optimized model.</span></span> <span data-ttu-id="2be3c-275">在云优化模型中，.NET Framework 应用程序使用 Windows 容器以及额外的组件（如监视和 CI/CD 管道）进行更新。</span><span class="sxs-lookup"><span data-stu-id="2be3c-275">In the Cloud-Optimized model, a .NET Framework application is modernized by using Windows Containers, plus additional components like monitoring and CI/CD pipelines.</span></span> <span data-ttu-id="2be3c-276">每个组件都是确保将应用程序更快地、敏捷地部署到云的基础。</span><span class="sxs-lookup"><span data-stu-id="2be3c-276">Each component is fundamental to deploying applications to the cloud, faster, and with agility.</span></span>

![本指南不涉及云本机](./media/image1-7.png)

<span data-ttu-id="2be3c-278">**图 1-7**</span><span class="sxs-lookup"><span data-stu-id="2be3c-278">**Figure 1-7.**</span></span> <span data-ttu-id="2be3c-279">本指南不涉及云本机</span><span class="sxs-lookup"><span data-stu-id="2be3c-279">Cloud-Native is not covered in this guide</span></span>

<span data-ttu-id="2be3c-280">本指南的重点具有一定的针对性。</span><span class="sxs-lookup"><span data-stu-id="2be3c-280">The focus of this guide is specific.</span></span> <span data-ttu-id="2be3c-281">本指南介绍了直接迁移现有 .NET 应用程序而不重新构建和更改代码的途径。</span><span class="sxs-lookup"><span data-stu-id="2be3c-281">It shows you the path you can take to achieve a lift and shift of your existing .NET applications, without rearchitecting, and with no code changes.</span></span> <span data-ttu-id="2be3c-282">最终，介绍了如何实现应用程序云优化。</span><span class="sxs-lookup"><span data-stu-id="2be3c-282">Ultimately, it shows you how to make your application Cloud-Optimized.</span></span>

<span data-ttu-id="2be3c-283">本指南不介绍如何创建云本机应用程序，例如如何进步成为微服务体系结构。</span><span class="sxs-lookup"><span data-stu-id="2be3c-283">This guide doesn't show you how to create Cloud-Native applications, such as how to evolve to a microservices architecture.</span></span> <span data-ttu-id="2be3c-284">若要重新构建应用程序或创建基于微服务的全新应用程序，请参阅电子书 [.NET 微服务：适用于容器化 .NET 应用程序的体系结构](https://aka.ms/microservicesebook)。</span><span class="sxs-lookup"><span data-stu-id="2be3c-284">To rearchitect your applications or to create brand-new applications that are based on microservices, see the e-book [.NET Microservices: Architecture for containerized .NET applications](https://aka.ms/microservicesebook).</span></span>

### <a name="additional-resources"></a><span data-ttu-id="2be3c-285">其他资源</span><span class="sxs-lookup"><span data-stu-id="2be3c-285">Additional resources</span></span>

- <span data-ttu-id="2be3c-286">**使用 Microsoft 平台和工具的容器化 Docker 应用程序生命周期**（可下载的电子书）</span><span class="sxs-lookup"><span data-stu-id="2be3c-286">**Containerized Docker application lifecycle with Microsoft platform and tools** (downloadable e-book) </span></span>\
  <https://aka.ms/dockerlifecycleebook>

- <span data-ttu-id="2be3c-287">**.NET 微服务：适用于容器化 .NET 应用程序的体系结构**（可下载的电子书）</span><span class="sxs-lookup"><span data-stu-id="2be3c-287">**.NET Microservices: Architecture for containerized .NET applications** (downloadable e-book) </span></span>\
  <https://aka.ms/microservicesebook>

- <span data-ttu-id="2be3c-288">**使用 ASP.NET Core 和 Azure 构建新式 Web 应用程序**（可下载电子书）</span><span class="sxs-lookup"><span data-stu-id="2be3c-288">**Architecting modern web applications with ASP.NET Core and Azure** (downloadable e-book) </span></span>\
  <https://aka.ms/webappebook>

## <a name="who-should-use-this-guide"></a><span data-ttu-id="2be3c-289">本指南的目标读者</span><span class="sxs-lookup"><span data-stu-id="2be3c-289">Who should use this guide</span></span>

<span data-ttu-id="2be3c-290">本指南适用于以下开发者和解决方案架构师：希望更新基于 .NET Framework 的现有 ASP.NET Web 应用程序或 WCF 服务，以提高交付和发布应用程序的敏捷性。</span><span class="sxs-lookup"><span data-stu-id="2be3c-290">This guide was written for developers and solution architects who want to modernize existing ASP.NET web applications or WCF services that are based on the .NET Framework, for improved agility in shipping and releasing applications.</span></span>

<span data-ttu-id="2be3c-291">本指南可能也对技术决策者有帮助，例如希望大概了解使用 Windows 容器和使用 Microsoft Azure 部署到云可以获得哪些好处的企业架构师或开发负责人/主管。</span><span class="sxs-lookup"><span data-stu-id="2be3c-291">You also might find this guide useful if you are a technical decision maker, such as an enterprise architect or a development lead/director who just wants an overview of the benefits that you can get by using Windows Containers, and by deploying to the cloud when using Microsoft Azure.</span></span>

## <a name="how-to-use-this-guide"></a><span data-ttu-id="2be3c-292">如何使用本指南</span><span class="sxs-lookup"><span data-stu-id="2be3c-292">How to use this guide</span></span>

<span data-ttu-id="2be3c-293">本指南解释了需要更新现有应用程序的原因，以及使用 Windows 容器将应用移动到云能获得的具体好处。</span><span class="sxs-lookup"><span data-stu-id="2be3c-293">This guide addresses the "why"-why you might want to modernize your existing applications, and the specific benefits you get from using Windows Containers when you move your apps to the cloud.</span></span> <span data-ttu-id="2be3c-294">本指南前几章的内容适用于架构师和技术决策者，他们只需大概了解，不需要实现和技术分步细节。</span><span class="sxs-lookup"><span data-stu-id="2be3c-294">The content in the first few chapters of the guide is designed for architects and technical decision makers who want an overview, but who don't need to focus on implementation and technical, step-by-step details.</span></span>

<span data-ttu-id="2be3c-295">本指南最后一章介绍重点针对特定部署方案的多个演练。</span><span class="sxs-lookup"><span data-stu-id="2be3c-295">The last chapter of this guide introduces multiple walkthroughs that focus on specific deployment scenarios.</span></span> <span data-ttu-id="2be3c-296">本指南提供了简要的演练版本，概况各种方案并突出其优点。</span><span class="sxs-lookup"><span data-stu-id="2be3c-296">This guide offers shorter versions of the walkthroughs, to summarize the scenarios and highlight their benefits.</span></span> <span data-ttu-id="2be3c-297">完整演练深入到了设置和实现细节，并作为一组 [Wiki 文章](https://github.com/dotnet-architecture/eShopModernizing/wiki)在相同的公共 [GitHub 存储库](https://github.com/dotnet-architecture/eShopModernizing)中发布，该存储库中还存放着相关示例应用（将在下一节讨论）。</span><span class="sxs-lookup"><span data-stu-id="2be3c-297">The full walkthroughs drill down into setup and implementation details, and are published as a set of [wiki posts](https://github.com/dotnet-architecture/eShopModernizing/wiki) in the same public [GitHub repo](https://github.com/dotnet-architecture/eShopModernizing) where related sample apps reside (discussed in the next section).</span></span> <span data-ttu-id="2be3c-298">关注实现细节的开发者和架构师将对最后一章以及 GitHub 上的分步 Wiki 演练更感兴趣。</span><span class="sxs-lookup"><span data-stu-id="2be3c-298">The last chapter and the step-by-step wiki walkthroughs on GitHub will be of more interest to developers and architects who want to focus on implementation details.</span></span>

## <a name="sample-apps-for-modernizing-legacy-apps-eshopmodernizing"></a><span data-ttu-id="2be3c-299">用于更新旧版应用的示例应用：eShopModernizing</span><span class="sxs-lookup"><span data-stu-id="2be3c-299">Sample apps for modernizing legacy apps: eShopModernizing</span></span>

<span data-ttu-id="2be3c-300">GitHub 上的 [EShopModernizing](https://github.com/dotnet-architecture/eShopModernizing) 存储库提供了两个示例应用程序，用以模拟旧版单片 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-300">The [eShopModernizing](https://github.com/dotnet-architecture/eShopModernizing) repo on GitHub offers two sample applications that simulate legacy monolithic web applications.</span></span> <span data-ttu-id="2be3c-301">第一个 Web 应用是用 ASP.NET MVC 开发的；第二个 Web 应用是用 ASP.NET Web Forms 开发的；三个应用是一个 N 层应用，其 WinForms 客户端桌面应用使用 WCF 服务后端。</span><span class="sxs-lookup"><span data-stu-id="2be3c-301">One web app is developed by using ASP.NET MVC; the second web app is developed by using ASP.NET Web Forms and the third app is an N-Tier app with a WinForms client desktop app consuming a WCF service backend.</span></span> <span data-ttu-id="2be3c-302">这些应用都基于传统 .NET Framework。</span><span class="sxs-lookup"><span data-stu-id="2be3c-302">All these apps are based on the traditional .NET Framework.</span></span> <span data-ttu-id="2be3c-303">这些示例应用不使用 .NET Core/.NET 5.0 或 ASP.NET Core，它们是要更新的现有/旧版 .NET Framework 应用程序。</span><span class="sxs-lookup"><span data-stu-id="2be3c-303">These sample apps don't use .NET Core or .NET 5.0 or ASP.NET Core as they are supposed to be existing/legacy .NET Framework applications to be modernized.</span></span>

<span data-ttu-id="2be3c-304">这些示例应用都有第二个版本，它们使用现代化代码，十分直接。</span><span class="sxs-lookup"><span data-stu-id="2be3c-304">These sample apps have a second version, with modernized code, and which are fairly straightforward.</span></span> <span data-ttu-id="2be3c-305">两个应用版本之间最重要的差异是第二个版本使用 Windows 容器作为部署选项。</span><span class="sxs-lookup"><span data-stu-id="2be3c-305">The most important difference between the app versions is that the second versions use Windows Containers as the deployment choice.</span></span> <span data-ttu-id="2be3c-306">第二个版本中还新增了一些组件，如用于管理映像的 Azure 存储 Blobs、管理安全的 Azure Active Directory，以及用于监视和审核应用程序的 Azure Application Insights。</span><span class="sxs-lookup"><span data-stu-id="2be3c-306">There also are a few additions to the second versions, like Azure Storage Blobs for managing images, Azure Active Directory for managing security, and Azure Application Insights for monitoring and auditing the applications.</span></span>

## <a name="send-your-feedback"></a><span data-ttu-id="2be3c-307">提供你的反馈</span><span class="sxs-lookup"><span data-stu-id="2be3c-307">Send your feedback</span></span>

<span data-ttu-id="2be3c-308">我们创作本指南，是为了帮助你了解改进和现代化现有 .NET Web 应用程序的选项。</span><span class="sxs-lookup"><span data-stu-id="2be3c-308">This guide was written to help you understand your options for improving and modernizing existing .NET web applications.</span></span> <span data-ttu-id="2be3c-309">本指南以及相关示例应用程序不断更新。</span><span class="sxs-lookup"><span data-stu-id="2be3c-309">The guide and related sample applications are evolving.</span></span> <span data-ttu-id="2be3c-310">欢迎提供反馈意见！</span><span class="sxs-lookup"><span data-stu-id="2be3c-310">Your feedback is welcome!</span></span> <span data-ttu-id="2be3c-311">如有关于本指南的改进建议，请将其发送到 [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book)。</span><span class="sxs-lookup"><span data-stu-id="2be3c-311">If you have comments about how this guide might be more helpful, please send them to [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book).</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="2be3c-312">下一页</span><span class="sxs-lookup"><span data-stu-id="2be3c-312">Next</span></span>](lift-and-shift-existing-apps-azure-iaas.md) <!-- Next Chapter -->
