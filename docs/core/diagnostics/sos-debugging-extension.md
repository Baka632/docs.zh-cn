---
title: 适用于 .NET 的 SOS 调试扩展
description: 了解适用于 .NET 的 SOS 调试扩展，该扩展提供有关内部 CLR 环境的信息。
ms.date: 12/21/2020
helpviewer_keywords:
- debugging extensions
- SOS debugging extensions
- SOS.dll
ms.openlocfilehash: a24b946c4ffda59e17f61c065d2846dc1a6effe0
ms.sourcegitcommit: c0b803bffaf101e12f071faf94ca21b46d04ff30
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/24/2020
ms.locfileid: "97764963"
---
# <a name="sos-debugging-extension"></a><span data-ttu-id="7e086-103">SOS 调试扩展</span><span class="sxs-lookup"><span data-stu-id="7e086-103">SOS debugging extension</span></span>

<span data-ttu-id="7e086-104">SOS 调试扩展让你可查看有关在在 .NET Core 运行时（包括实时进程和转储）内运行的代码的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-104">The SOS Debugging Extension lets you view information about code that is running inside the .NET Core runtime, both on live processes and dumps.</span></span> <span data-ttu-id="7e086-105">该扩展已预安装 [dotnet-dump](dotnet-dump.md) 和 [Windbg/dbg](/windows-hardware/drivers/debugger/debugger-download-tools)，并可供[下载](dotnet-sos.md)，以便与 LLDB 配合使用。</span><span class="sxs-lookup"><span data-stu-id="7e086-105">The extension is preinstalled with [dotnet-dump](dotnet-dump.md) and [Windbg/dbg](/windows-hardware/drivers/debugger/debugger-download-tools), and can be [downloaded](dotnet-sos.md) for use with LLDB.</span></span>  <span data-ttu-id="7e086-106">SOS 调试扩展可用于收集有关托管堆的信息、查找堆损坏情况、显示运行时所使用的内部数据类型以及查看有关在运行时内运行的所有托管代码的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-106">The SOS Debugging Extension is useful for collecting information about the managed heap, looking for heap corruptions, displaying internal data types used by the runtime, and viewing information about all managed code running inside the runtime.</span></span>

## <a name="syntax"></a><span data-ttu-id="7e086-107">语法</span><span class="sxs-lookup"><span data-stu-id="7e086-107">Syntax</span></span>

### <a name="windows"></a><span data-ttu-id="7e086-108">Windows</span><span class="sxs-lookup"><span data-stu-id="7e086-108">Windows</span></span>

`![command] [options]`

### <a name="linux-and-macos"></a><span data-ttu-id="7e086-109">Linux 和 macOS</span><span class="sxs-lookup"><span data-stu-id="7e086-109">Linux and macOS</span></span>

`sos [command] [options]`

<span data-ttu-id="7e086-110">许多命令在 lldb 下都有别名或快捷方式：</span><span class="sxs-lookup"><span data-stu-id="7e086-110">Many of the commands have aliases or shortcuts under lldb:</span></span>

`clrstack [options]`

## <a name="commands"></a><span data-ttu-id="7e086-111">命令</span><span class="sxs-lookup"><span data-stu-id="7e086-111">Commands</span></span>

<span data-ttu-id="7e086-112">下表的命令还可在 Help 或 soshelp 下使用 。</span><span class="sxs-lookup"><span data-stu-id="7e086-112">The following table of commands is also available under **Help** or **soshelp**.</span></span>  <span data-ttu-id="7e086-113">使用 `soshelp <command>` 可提供单个命令帮助。</span><span class="sxs-lookup"><span data-stu-id="7e086-113">Individual command help is available using `soshelp <command>`.</span></span>

|<span data-ttu-id="7e086-114">Command</span><span class="sxs-lookup"><span data-stu-id="7e086-114">Command</span></span>|<span data-ttu-id="7e086-115">说明</span><span class="sxs-lookup"><span data-stu-id="7e086-115">Description</span></span>|
|-------------|-----------------|
|<span data-ttu-id="7e086-116">**bpmd** [ **-nofuturemodule**] [\<*module name*> \<*method name*>] [ **-md** <`MethodDesc`>] **-list** **-clear** \<*pending breakpoint number*> **-clearall**</span><span class="sxs-lookup"><span data-stu-id="7e086-116">**bpmd** [**-nofuturemodule**] [\<*module name*> \<*method name*>] [**-md** <`MethodDesc`>] **-list** **-clear** \<*pending breakpoint number*> **-clearall**</span></span>|<span data-ttu-id="7e086-117">在指定模块中的指定方法处创建断点。</span><span class="sxs-lookup"><span data-stu-id="7e086-117">Creates a breakpoint at the specified method in the specified module.</span></span><br /><br /> <span data-ttu-id="7e086-118">如果尚未加载指定的模块和方法，则此命令将在创建断点之前等待已加载并进行实时 (JIT) 编译的模块的通知。</span><span class="sxs-lookup"><span data-stu-id="7e086-118">If the specified module and method have not been loaded, this command waits for a notification that the module was loaded and just-in-time (JIT) compiled before creating a breakpoint.</span></span><br /><br /> <span data-ttu-id="7e086-119">可以通过使用 **-list**、 **-clear** 和 **-clearall** 选项来管理挂起断点的列表：</span><span class="sxs-lookup"><span data-stu-id="7e086-119">You can manage the list of pending breakpoints by using the **-list**, **-clear**, and **-clearall** options:</span></span><br /><br /> <span data-ttu-id="7e086-120">该 **-list** 选项生成所有挂起断点的列表。</span><span class="sxs-lookup"><span data-stu-id="7e086-120">The **-list** option generates a list of all the pending breakpoints.</span></span> <span data-ttu-id="7e086-121">如果挂起断点有一个非零模块 ID，则该断点特定于该特定已加载模块中的函数。</span><span class="sxs-lookup"><span data-stu-id="7e086-121">If a pending breakpoint has a non-zero module ID, that breakpoint is specific to a function in that particular loaded module.</span></span> <span data-ttu-id="7e086-122">如果挂起断点有一个零模块 ID，则该断点适用于尚未加载的模块。</span><span class="sxs-lookup"><span data-stu-id="7e086-122">If the pending breakpoint has a zero module ID, that breakpoint applies to modules that have not yet been loaded.</span></span><br /><br /> <span data-ttu-id="7e086-123">使用 **-clear** 或 **-clearall** 选项可从该列表中移除挂起断点。</span><span class="sxs-lookup"><span data-stu-id="7e086-123">Use the **-clear** or **-clearall** option to remove pending breakpoints from the list.</span></span>|
|<span data-ttu-id="7e086-124">**CLRStack** [ **-a**] [ **-l**] [ **-p**] [ **-n**] [ **-f**] [ **-r**] [ **-all**]</span><span class="sxs-lookup"><span data-stu-id="7e086-124">**CLRStack** [**-a**] [**-l**] [**-p**] [**-n**] [**-f**] [**-r**] [**-all**]</span></span>|<span data-ttu-id="7e086-125">仅提供托管代码的堆栈跟踪。</span><span class="sxs-lookup"><span data-stu-id="7e086-125">Provides a stack trace of managed code only.</span></span><br /><br /> <span data-ttu-id="7e086-126">**-p** 选项显示托管函数的自变量。</span><span class="sxs-lookup"><span data-stu-id="7e086-126">The **-p** option shows arguments to the managed function.</span></span><br /><br /> <span data-ttu-id="7e086-127">**-l** 选项显示有关帧中的局部变量的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-127">The **-l** option shows information on local variables in a frame.</span></span> <span data-ttu-id="7e086-128">SOS 调试扩展无法检索本地名称，因此本地名称的输出采用的格式为 \<*local address*> **=** \<*value*>。</span><span class="sxs-lookup"><span data-stu-id="7e086-128">The SOS Debugging Extension cannot retrieve local names, so the output for local names is in the format \<*local address*> **=** \<*value*>.</span></span><br /><br /> <span data-ttu-id="7e086-129">“-a”选项是 -l 和 -p 组合的快捷方式  。</span><span class="sxs-lookup"><span data-stu-id="7e086-129">The **-a** option is a shortcut for **-l** and **-p** combined.</span></span><br /><br /> <span data-ttu-id="7e086-130">**-n** 选项禁止显示源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-130">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="7e086-131">如果调试器已指定选项 SYMOPT_LOAD_LINES，则 SOS 将查找每个托管帧的符号，如果成功，则将显示对应的源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-131">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS will look up the symbols for every managed frame and if successful will display the corresponding source file name and line number.</span></span> <span data-ttu-id="7e086-132">可以指定 **-n**（无行号）参数来禁用此行为。</span><span class="sxs-lookup"><span data-stu-id="7e086-132">The **-n** (No line numbers) parameter can be specified to disable this behavior.</span></span><br /><br /><span data-ttu-id="7e086-133">“-f”选项（完整模式）显示原生帧，将其与托管帧混合在一起，并显示托管帧的程序集名称和函数偏移量。</span><span class="sxs-lookup"><span data-stu-id="7e086-133">The **-f** option (full mode) displays the native frames intermixing them with the managed frames and the assembly name and function offset for the managed frames.</span></span>  <span data-ttu-id="7e086-134">与 `dotnet-dump` 一起使用时，此选项不显示原生帧。</span><span class="sxs-lookup"><span data-stu-id="7e086-134">This option does not display native frames when used with `dotnet-dump`.</span></span><br /><br /><span data-ttu-id="7e086-135">“-r”选项转储每个堆栈帧的寄存器。</span><span class="sxs-lookup"><span data-stu-id="7e086-135">The **-r** option dumps the registers for each stack frame.</span></span><br /><br /><span data-ttu-id="7e086-136">“-all”选项转储所有托管线程的堆栈。</span><span class="sxs-lookup"><span data-stu-id="7e086-136">The **-all** option dumps all the managed threads' stacks.</span></span>|
|<span data-ttu-id="7e086-137">**COMState**</span><span class="sxs-lookup"><span data-stu-id="7e086-137">**COMState**</span></span>|<span data-ttu-id="7e086-138">列出每个线程的 COM 单元模型和 `Context` 指针（如果可用）。</span><span class="sxs-lookup"><span data-stu-id="7e086-138">Lists the COM apartment model for each thread and a `Context` pointer, if available.</span></span> <span data-ttu-id="7e086-139">此命令仅可用于 Windows。</span><span class="sxs-lookup"><span data-stu-id="7e086-139">This command is only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-140">**DumpArray** [ **-start** \<*startIndex*>] [ **-length** \<*length*>] [ **-details**] [ **-nofields**] \<*array object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-140">**DumpArray** [**-start** \<*startIndex*>] [**-length** \<*length*>] [**-details**] [**-nofields**] \<*array object address*></span></span><br /><br /> <span data-ttu-id="7e086-141">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="7e086-141">-or-</span></span><br /><br /> <span data-ttu-id="7e086-142">**DA** [ **-start** \<*startIndex*>] [ **-length** \<*length*>] [ **-detail**] [ **-nofields**] *array object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-142">**DA** [**-start** \<*startIndex*>] [**-length** \<*length*>] [**-detail**] [**-nofields**] *array object address*></span></span>|<span data-ttu-id="7e086-143">检查数组对象的元素。</span><span class="sxs-lookup"><span data-stu-id="7e086-143">Examines elements of an array object.</span></span><br /><br /> <span data-ttu-id="7e086-144">**-start** 选项指定开始显示元素的起始索引。</span><span class="sxs-lookup"><span data-stu-id="7e086-144">The **-start** option specifies the starting index at which to display elements.</span></span><br /><br /> <span data-ttu-id="7e086-145">**-length** 选项指定要显示的元素数量。</span><span class="sxs-lookup"><span data-stu-id="7e086-145">The **-length** option specifies how many elements to show.</span></span><br /><br /> <span data-ttu-id="7e086-146">**-details** 选项使用 **DumpObj** 和 **DumpVC** 格式显示元素的详细信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-146">The **-details** option displays details of the element using the **DumpObj** and **DumpVC** formats.</span></span><br /><br /> <span data-ttu-id="7e086-147">**-nofields** 选项可阻止显示数组。</span><span class="sxs-lookup"><span data-stu-id="7e086-147">The **-nofields** option prevents arrays from displaying.</span></span> <span data-ttu-id="7e086-148">此选项仅在指定 **-detail** 选项后可用。</span><span class="sxs-lookup"><span data-stu-id="7e086-148">This option is available only when the **-detail** option is specified.</span></span>|
|<span data-ttu-id="7e086-149">**DumpAsync** (**dumpasync**) [ **-mt** \<*MethodTable address*>] [ **-type** \<*partial type name*>] [ **-waiting**] [ **-roots**]</span><span class="sxs-lookup"><span data-stu-id="7e086-149">**DumpAsync** (**dumpasync**) [**-mt** \<*MethodTable address*>] [**-type** \<*partial type name*>] [**-waiting**] [**-roots**]</span></span>|<span data-ttu-id="7e086-150">DumpAsync 遍历垃圾回收堆，查找表示异步状态机的对象（在将异步方法的状态传输到堆时创建）。</span><span class="sxs-lookup"><span data-stu-id="7e086-150">DumpAsync traverses the garbage collected heap, looking for objects representing async state machines as created when an async method's state is transferred to the heap.</span></span>  <span data-ttu-id="7e086-151">此命令识别定义为 `async void`、`async Task`、`async Task<T>`、`async ValueTask` 和 `async ValueTask<T>` 的异步状态机。</span><span class="sxs-lookup"><span data-stu-id="7e086-151">This command recognizes async state machines defined as `async void`, `async Task`, `async Task<T>`, `async ValueTask`, and `async ValueTask<T>`.</span></span><br /><br /><span data-ttu-id="7e086-152">输出包括找到的每个异步状态机对象的详细信息块。</span><span class="sxs-lookup"><span data-stu-id="7e086-152">The output includes a block of details for each async state machine object found.</span></span> <span data-ttu-id="7e086-153">这些详细信息包括：</span><span class="sxs-lookup"><span data-stu-id="7e086-153">These details include:</span></span><br /><span data-ttu-id="7e086-154">- 一行为异步状态机对象的类型，其中包括其 MethodTable 地址、对象地址、大小和类型名称。</span><span class="sxs-lookup"><span data-stu-id="7e086-154">- a line for the type of the async state machine object, including its MethodTable address, its object address, its size, and its type name.</span></span><br /><span data-ttu-id="7e086-155">- 一行为对象中包含的状态机类型名称。</span><span class="sxs-lookup"><span data-stu-id="7e086-155">- a line for the state machine type name as contained in the object.</span></span><br /><span data-ttu-id="7e086-156">- 状态机上每个字段的列表。</span><span class="sxs-lookup"><span data-stu-id="7e086-156">- a listing of each field on the state machine.</span></span><br /><span data-ttu-id="7e086-157">- 一行为此状态机对象的延续（如果已注册一个或多个）。</span><span class="sxs-lookup"><span data-stu-id="7e086-157">- a line for a continuation from this state machine object, if one or more has been registered.</span></span><br /><span data-ttu-id="7e086-158">- 为此异步状态机对象发现的 GC 根。</span><span class="sxs-lookup"><span data-stu-id="7e086-158">- discovered GC roots for this async state machine object.</span></span><br />|
|<span data-ttu-id="7e086-159">**DumpAssembly** \<*assembly address*></span><span class="sxs-lookup"><span data-stu-id="7e086-159">**DumpAssembly** \<*assembly address*></span></span>|<span data-ttu-id="7e086-160">显示有关程序集的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-160">Displays information about an assembly.</span></span><br /><br /> <span data-ttu-id="7e086-161">**DumpAssembly** 命令将列出多个模块（如果存在）。</span><span class="sxs-lookup"><span data-stu-id="7e086-161">The **DumpAssembly** command lists multiple modules, if they exist.</span></span><br /><br /> <span data-ttu-id="7e086-162">可以通过使用 **DumpDomain** 命令获取程序集地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-162">You can get an assembly address by using the **DumpDomain** command.</span></span>|
|<span data-ttu-id="7e086-163">**DumpClass** \<*EEClass address*></span><span class="sxs-lookup"><span data-stu-id="7e086-163">**DumpClass** \<*EEClass address*></span></span>|<span data-ttu-id="7e086-164">显示有关与类型关联的 `EEClass` 结构的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-164">Displays information about the `EEClass` structure associated with a type.</span></span><br /><br /> <span data-ttu-id="7e086-165">**DumpClass** 命令显示静态字段值，但不显示非静态字段值。</span><span class="sxs-lookup"><span data-stu-id="7e086-165">The **DumpClass** command displays static field values but does not display nonstatic field values.</span></span><br /><br /> <span data-ttu-id="7e086-166">使用 **DumpMT**、**DumpObj**、**Name2EE** 或 **Token2EE** 命令获取 `EEClass` 结构地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-166">Use the **DumpMT**, **DumpObj**, **Name2EE**, or **Token2EE** command to get an `EEClass` structure address.</span></span>|
|<span data-ttu-id="7e086-167">**DumpDomain** [\<*domain address*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-167">**DumpDomain** [\<*domain address*>]</span></span>|<span data-ttu-id="7e086-168">枚举在指定的 <xref:System.Reflection.Assembly> 对象地址内加载的每个 <xref:System.AppDomain> 对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-168">Enumerates each <xref:System.Reflection.Assembly> object that is loaded within the specified <xref:System.AppDomain> object address.</span></span>  <span data-ttu-id="7e086-169">若在调用 DumpDomain 命令时不提供任何参数，则将列出过程中的所有 <xref:System.AppDomain> 对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-169">When called with no parameters, the **DumpDomain** command lists all <xref:System.AppDomain> objects in a process.</span></span> <span data-ttu-id="7e086-170">由于 .NET Core 仅有一个 <xref:System.AppDomain>，因此 DumpDomain 将仅返回一个对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-170">Since .NET Core only has one <xref:System.AppDomain>, **DumpDomain** will only return one object.</span></span>|
|<span data-ttu-id="7e086-171">**DumpHeap** [ **-stat**] [ **-strings**] [ **-short**] [ **-min** \<*size*>] [ **-max** \<*size*>] [ **-thinlock**] [ **-startAtLowerBound**] [ **-mt** \<*MethodTable address*>] [ **-type** \<*partial type name*>][*start* [*end*]]</span><span class="sxs-lookup"><span data-stu-id="7e086-171">**DumpHeap** [**-stat**] [**-strings**] [**-short**] [**-min** \<*size*>] [**-max** \<*size*>] [**-thinlock**] [**-startAtLowerBound**] [**-mt** \<*MethodTable address*>] [**-type** \<*partial type name*>][*start* [*end*]]</span></span>|<span data-ttu-id="7e086-172">显示有关垃圾回收堆的信息和有关对象的收集统计信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-172">Displays information about the garbage-collected heap and collection statistics about objects.</span></span><br /><br /> <span data-ttu-id="7e086-173">如果 **DumpHeap** 命令在垃圾回收器堆中检测到过多碎片，将会显示警告。</span><span class="sxs-lookup"><span data-stu-id="7e086-173">The **DumpHeap** command displays a warning if it detects excessive fragmentation in the garbage collector heap.</span></span><br /><br /> <span data-ttu-id="7e086-174">**-stat** 选项将输出限制为统计类型摘要。</span><span class="sxs-lookup"><span data-stu-id="7e086-174">The **-stat** option restricts the output to the statistical type summary.</span></span><br /><br /> <span data-ttu-id="7e086-175">**-strings** 选项将输出限制为统计字符串值摘要。</span><span class="sxs-lookup"><span data-stu-id="7e086-175">The **-strings** option restricts the output to a statistical string value summary.</span></span><br /><br /> <span data-ttu-id="7e086-176">**-short** 选项将输出限制为只是每个对象的地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-176">The **-short** option limits output to just the address of each object.</span></span> <span data-ttu-id="7e086-177">这使你能够轻松地以管道方式将输出从该命令转移到另一个调试器命令以实现自动化。</span><span class="sxs-lookup"><span data-stu-id="7e086-177">This lets you easily pipe output from the command to another debugger command for automation.</span></span><br /><br /> <span data-ttu-id="7e086-178">**-min** 选项忽略小于 `size` 参数指定的大小（以字节为单位）的对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-178">The **-min** option ignores objects that are less than the `size` parameter, specified in bytes.</span></span><br /><br /> <span data-ttu-id="7e086-179">**-max** 选项忽略大于 `size` 参数指定的大小（以字节为单位）的对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-179">The **-max** option ignores objects that are larger than the `size` parameter, specified in bytes.</span></span><br /><br /> <span data-ttu-id="7e086-180">**-thinlock** 选项报告 ThinLocks。</span><span class="sxs-lookup"><span data-stu-id="7e086-180">The **-thinlock** option reports ThinLocks.</span></span>  <span data-ttu-id="7e086-181">有关详细信息，请参阅 **SyncBlk** 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-181">For more information, see the **SyncBlk** command.</span></span><br /><br /> <span data-ttu-id="7e086-182">`-startAtLowerBound` 选项将强制在提供的地址范围的下限开始堆审核。</span><span class="sxs-lookup"><span data-stu-id="7e086-182">The `-startAtLowerBound` option forces the heap walk to begin at the lower bound of a supplied address range.</span></span> <span data-ttu-id="7e086-183">在计划阶段，堆通常不可移动，因为对象正在移动。</span><span class="sxs-lookup"><span data-stu-id="7e086-183">During the planning phase, the heap is often not walkable because objects are being moved.</span></span> <span data-ttu-id="7e086-184">此选项将强制 **DumpHeap** 在指定的下限开始其审核。</span><span class="sxs-lookup"><span data-stu-id="7e086-184">This option forces **DumpHeap** to begin its walk at the specified lower bound.</span></span> <span data-ttu-id="7e086-185">你必须提供有效的对象的地址作为使此选项工作的下限。</span><span class="sxs-lookup"><span data-stu-id="7e086-185">You must supply the address of a valid object as the lower bound for this option to work.</span></span> <span data-ttu-id="7e086-186">你可以显示错误对象的地址的内存来手动寻找下一个方法表。</span><span class="sxs-lookup"><span data-stu-id="7e086-186">You can display memory at the address of a bad object to manually find the next method table.</span></span> <span data-ttu-id="7e086-187">如果垃圾回收当前处于对 `memcopy` 的调用中，则你还可以通过将大小添加到作为参数提供的起始地址中来查找下一个对象的地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-187">If the garbage collection is currently in a call to `memcopy`, you may also be able to find the address of the next object by adding the size to the start address, which is supplied as a parameter.</span></span><br /><br /> <span data-ttu-id="7e086-188">**-mt** 选项仅列出与指定的 `MethodTable` 结构对应的那些对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-188">The **-mt** option lists only those objects that correspond to the specified `MethodTable` structure.</span></span><br /><br /> <span data-ttu-id="7e086-189">**-type** 选项仅列出其类型名称为指定字符串的子字符串匹配项的那些对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-189">The **-type** option lists only those objects whose type name is a substring match of the specified string.</span></span><br /><br /> <span data-ttu-id="7e086-190">`start` 参数从指定的地址处开始列出。</span><span class="sxs-lookup"><span data-stu-id="7e086-190">The `start` parameter begins listing from the specified address.</span></span><br /><br /> <span data-ttu-id="7e086-191">`end` 参数在指定的地址处停止列出。</span><span class="sxs-lookup"><span data-stu-id="7e086-191">The `end` parameter stops listing at the specified address.</span></span>|
|<span data-ttu-id="7e086-192">**DumpIL** \<*Managed DynamicMethod object*> &#124;       \<*DynamicMethodDesc pointer*> &#124;        \<*MethodDesc pointer*></span><span class="sxs-lookup"><span data-stu-id="7e086-192">**DumpIL** \<*Managed DynamicMethod object*> &#124;       \<*DynamicMethodDesc pointer*> &#124;        \<*MethodDesc pointer*></span></span>|<span data-ttu-id="7e086-193">显示与托管方法关联的 Microsoft 中间语言 (MSIL)。</span><span class="sxs-lookup"><span data-stu-id="7e086-193">Displays the Microsoft intermediate language (MSIL) that is associated with a managed method.</span></span><br /><br /> <span data-ttu-id="7e086-194">发出的动态 MSIL 与从程序集加载的 MSIL 不同。</span><span class="sxs-lookup"><span data-stu-id="7e086-194">Dynamic MSIL is emitted differently than MSIL that's loaded from an assembly.</span></span> <span data-ttu-id="7e086-195">动态 MSIL 引用托管对象数组中的对象而不是引用元数据标记。</span><span class="sxs-lookup"><span data-stu-id="7e086-195">Dynamic MSIL refers to objects in a managed object array rather than to metadata tokens.</span></span>|
|<span data-ttu-id="7e086-196">**DumpLog** [ **-addr** \<*addressOfStressLog*>] [<*Filename*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-196">**DumpLog** [**-addr** \<*addressOfStressLog*>] [<*Filename*>]</span></span>|<span data-ttu-id="7e086-197">将内存中压力日志的内容写入到指定文件。</span><span class="sxs-lookup"><span data-stu-id="7e086-197">Writes the contents of an in-memory stress log to the specified file.</span></span> <span data-ttu-id="7e086-198">如果你不指定名称，则此命令将在当前目录中创建一个名为 StressLog.txt 的文件。</span><span class="sxs-lookup"><span data-stu-id="7e086-198">If you do not specify a name, this command creates a file called StressLog.txt in the current directory.</span></span><br /><br /> <span data-ttu-id="7e086-199">内存中压力日志可帮助你在不使用锁或 I/O 的情况下诊断压力故障。</span><span class="sxs-lookup"><span data-stu-id="7e086-199">The in-memory stress log helps you diagnose stress failures without using locks or I/O.</span></span> <span data-ttu-id="7e086-200">若要启用压力日志，请在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework 下设置以下注册表项：</span><span class="sxs-lookup"><span data-stu-id="7e086-200">To enable the stress log, set the following registry keys under HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework:</span></span><br /><br /> <span data-ttu-id="7e086-201">(DWORD) StressLog = 1</span><span class="sxs-lookup"><span data-stu-id="7e086-201">(DWORD) StressLog = 1</span></span><br /><br /> <span data-ttu-id="7e086-202">(DWORD) LogFacility = 0xffffffff</span><span class="sxs-lookup"><span data-stu-id="7e086-202">(DWORD) LogFacility = 0xffffffff</span></span><br /><br /> <span data-ttu-id="7e086-203">(DWORD) StressLogSize = 65536</span><span class="sxs-lookup"><span data-stu-id="7e086-203">(DWORD) StressLogSize = 65536</span></span><br /><br /> <span data-ttu-id="7e086-204">利用可选的 `-addr` 选项，你可以指定压力日志而非默认日志。</span><span class="sxs-lookup"><span data-stu-id="7e086-204">The optional `-addr` option lets you specify a stress log other than the default log.</span></span>|
|<span data-ttu-id="7e086-205">**DumpMD** \<*MethodDesc address*></span><span class="sxs-lookup"><span data-stu-id="7e086-205">**DumpMD** \<*MethodDesc address*></span></span>|<span data-ttu-id="7e086-206">显示有关指定地址处的 `MethodDesc` 结构的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-206">Displays information about a `MethodDesc` structure at the specified address.</span></span><br /><br /> <span data-ttu-id="7e086-207">可以使用 **IP2MD** 命令从托管函数中获取 `MethodDesc` 结构地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-207">You can use the **IP2MD** command to get the `MethodDesc` structure address from a managed function.</span></span>|
|<span data-ttu-id="7e086-208">**DumpMT** [ **-MD**] \<*MethodTable address*></span><span class="sxs-lookup"><span data-stu-id="7e086-208">**DumpMT** [**-MD**] \<*MethodTable address*></span></span>|<span data-ttu-id="7e086-209">显示有关指定地址处的方法表的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-209">Displays information about a method table at the specified address.</span></span> <span data-ttu-id="7e086-210">指定 **-MD** 选项将显示与对象一起定义的所有方法的列表。</span><span class="sxs-lookup"><span data-stu-id="7e086-210">Specifying the **-MD** option displays a list of all methods defined with the object.</span></span><br /><br /> <span data-ttu-id="7e086-211">每个托管对象均包含一个方法表指针。</span><span class="sxs-lookup"><span data-stu-id="7e086-211">Each managed object contains a method table pointer.</span></span>|
|<span data-ttu-id="7e086-212">**DumpModule** [ **-mt**] \<*Module address*></span><span class="sxs-lookup"><span data-stu-id="7e086-212">**DumpModule** [**-mt**] \<*Module address*></span></span>|<span data-ttu-id="7e086-213">显示有关指定地址处的模块的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-213">Displays information about a module at the specified address.</span></span> <span data-ttu-id="7e086-214">**-mt** 选项显示模块中定义的类型和模块所引用的类型</span><span class="sxs-lookup"><span data-stu-id="7e086-214">The **-mt** option displays the types defined in a module and the types referenced by the module</span></span><br /><br /> <span data-ttu-id="7e086-215">可以使用 **DumpDomain** 或 **DumpAssembly** 命令检索模块的地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-215">You can use the **DumpDomain** or **DumpAssembly** command to retrieve a module's address.</span></span>|
|<span data-ttu-id="7e086-216">**DumpObj** [ **-nofields**] \<*object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-216">**DumpObj** [**-nofields**] \<*object address*></span></span><br /><br /> <span data-ttu-id="7e086-217">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="7e086-217">-or-</span></span><br /><br /> <span data-ttu-id="7e086-218">**DO** \<*object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-218">**DO** \<*object address*></span></span>|<span data-ttu-id="7e086-219">显示有关指定地址处的对象的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-219">Displays information about an object at the specified address.</span></span> <span data-ttu-id="7e086-220">**DumpObj** 命令显示对象的字段、`EEClass` 结构信息、方法表和大小。</span><span class="sxs-lookup"><span data-stu-id="7e086-220">The **DumpObj** command displays the fields, the `EEClass` structure information, the method table, and the size of the object.</span></span><br /><br /> <span data-ttu-id="7e086-221">可以使用 **DumpStackObjects** 命令检索对象的地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-221">You can use the **DumpStackObjects** command to retrieve an object's address.</span></span><br /><br /> <span data-ttu-id="7e086-222">可以对 `CLASS` 类型的字段运行 DumpObj 命令，因为这些字段也是对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-222">You can run the **DumpObj** command on fields of type `CLASS` because they are also objects.</span></span><br /><br /> <span data-ttu-id="7e086-223">`-`**nofields** 选项可阻止显示对象的字段，它对 String 这样的对象很有用。</span><span class="sxs-lookup"><span data-stu-id="7e086-223">The `-`**nofields** option prevents fields of the object being displayed, it is useful for objects like String.</span></span>|
|<span data-ttu-id="7e086-224">**DumpRuntimeTypes**</span><span class="sxs-lookup"><span data-stu-id="7e086-224">**DumpRuntimeTypes**</span></span>|<span data-ttu-id="7e086-225">显示垃圾回收器堆中的运行时类型对象并列出其关联的类型名称和方法表。</span><span class="sxs-lookup"><span data-stu-id="7e086-225">Displays the runtime type objects in the garbage collector heap and lists their associated type names and method tables.</span></span>|
|<span data-ttu-id="7e086-226">**DumpStack** [ **-EE**] [ **-n**] [`top` *stack* [`bottom` *stac*`k`]]</span><span class="sxs-lookup"><span data-stu-id="7e086-226">**DumpStack** [**-EE**] [**-n**] [`top` *stack* [`bottom` *stac*`k`]]</span></span>|<span data-ttu-id="7e086-227">显示堆栈跟踪。</span><span class="sxs-lookup"><span data-stu-id="7e086-227">Displays a stack trace.</span></span><br /><br /> <span data-ttu-id="7e086-228">**-EE** 选项使 **DumpStack** 命令仅显示托管函数。</span><span class="sxs-lookup"><span data-stu-id="7e086-228">The **-EE** option causes the **DumpStack** command to display only managed functions.</span></span> <span data-ttu-id="7e086-229">使用 `top` 和 `bottom` 参数可限制 x86 平台上显示的堆栈帧。</span><span class="sxs-lookup"><span data-stu-id="7e086-229">Use the `top` and `bottom` parameters to limit the stack frames displayed on x86 platforms.</span></span><br /><br /> <span data-ttu-id="7e086-230">**-n** 选项禁止显示源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-230">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="7e086-231">如果调试器已指定选项 SYMOPT_LOAD_LINES，则 SOS 将查找每个托管帧的符号，如果成功，则将显示对应的源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-231">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS will look up the symbols for every managed frame and if successful will display the corresponding source file name and line number.</span></span> <span data-ttu-id="7e086-232">可以指定 **-n**（无行号）参数来禁用此行为。</span><span class="sxs-lookup"><span data-stu-id="7e086-232">The **-n** (No line numbers) parameter can be specified to disable this behavior.</span></span><br /><br />
|<span data-ttu-id="7e086-233">**DumpSig** \<*sigaddr*> \<*moduleaddr*></span><span class="sxs-lookup"><span data-stu-id="7e086-233">**DumpSig** \<*sigaddr*> \<*moduleaddr*></span></span>|<span data-ttu-id="7e086-234">显示有关指定地址处的 `Sig` 结构的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-234">Displays information about a `Sig` structure at the specified address.</span></span>|
|<span data-ttu-id="7e086-235">**DumpSigElem** \<*sigaddr*> \<*moduleaddr*></span><span class="sxs-lookup"><span data-stu-id="7e086-235">**DumpSigElem** \<*sigaddr*> \<*moduleaddr*></span></span>|<span data-ttu-id="7e086-236">显示签名对象的单个元素。</span><span class="sxs-lookup"><span data-stu-id="7e086-236">Displays a single element of a signature object.</span></span> <span data-ttu-id="7e086-237">大多数情况下，应使用 **DumpSig** 查看单个签名对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-237">In most cases, you should use **DumpSig** to look at individual signature objects.</span></span> <span data-ttu-id="7e086-238">但是，如果签名已在某种程度上被损坏，则可使用 **DumpSigElem** 读取它的有效部分。</span><span class="sxs-lookup"><span data-stu-id="7e086-238">However, if a signature has been corrupted in some way, you can use **DumpSigElem** to read the valid portions of it.</span></span>|
|<span data-ttu-id="7e086-239">**DumpStackObjects** [ **-verify**] [`top` *stack* [`bottom` *stack*]]</span><span class="sxs-lookup"><span data-stu-id="7e086-239">**DumpStackObjects** [**-verify**] [`top` *stack* [`bottom` *stack*]]</span></span><br /><br /> <span data-ttu-id="7e086-240">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="7e086-240">-or-</span></span><br /><br /> <span data-ttu-id="7e086-241">**DSO** [ **-verify**] [`top` *stack* [`bottom` *stack*]]</span><span class="sxs-lookup"><span data-stu-id="7e086-241">**DSO** [**-verify**] [`top` *stack* [`bottom` *stack*]]</span></span>|<span data-ttu-id="7e086-242">显示在当前堆栈的边界内找到的所有托管对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-242">Displays all managed objects found within the bounds of the current stack.</span></span><br /><br /> <span data-ttu-id="7e086-243">**-verify** 选项验证对象字段的每个非静态 `CLASS` 字段。</span><span class="sxs-lookup"><span data-stu-id="7e086-243">The **-verify** option validates each non-static `CLASS` field of an object field.</span></span><br /><br /> <span data-ttu-id="7e086-244">将 DumpStackObject 命令与堆栈跟踪命令（如 K (windbg) 或 bt (lldb)）及 clrstack 命令一起使用，以确定局部变量和参数的值   。</span><span class="sxs-lookup"><span data-stu-id="7e086-244">Use the **DumpStackObject** command with stack tracing commands such as **K** (windbg) or **bt** (lldb) along with the **clrstack** command to determine the values of local variables and parameters.</span></span>|
|<span data-ttu-id="7e086-245">**DumpVC** \<*MethodTable address*> \<*Address*></span><span class="sxs-lookup"><span data-stu-id="7e086-245">**DumpVC** \<*MethodTable address*> \<*Address*></span></span>|<span data-ttu-id="7e086-246">显示有关指定地址处的值类字段的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-246">Displays information about the fields of a value class at the specified address.</span></span><br /><br /> <span data-ttu-id="7e086-247">**MethodTable** 参数使 **DumpVC** 命令可以正确解释字段。</span><span class="sxs-lookup"><span data-stu-id="7e086-247">The **MethodTable** parameter allows the **DumpVC** command to correctly interpret fields.</span></span> <span data-ttu-id="7e086-248">值类不将方法表作为其第一个字段。</span><span class="sxs-lookup"><span data-stu-id="7e086-248">Value classes do not have a method table as their first field.</span></span>|
|<span data-ttu-id="7e086-249">**EEHeap** [ **-gc**] [ **-loader**]</span><span class="sxs-lookup"><span data-stu-id="7e086-249">**EEHeap** [**-gc**] [**-loader**]</span></span>|<span data-ttu-id="7e086-250">显示有关内部运行时数据结构所使用的进程内存的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-250">Displays information about process memory consumed by internal runtime data structures.</span></span><br /><br /> <span data-ttu-id="7e086-251">**-gc** 和 **-loader** 选项将此命令的输出限制为垃圾回收器或加载程序数据结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-251">The **-gc** and **-loader** options limit the output of this command to garbage collector or loader data structures.</span></span><br /><br /> <span data-ttu-id="7e086-252">有关垃圾回收器的信息列出了托管堆中每个段的范围。</span><span class="sxs-lookup"><span data-stu-id="7e086-252">The information for the garbage collector lists the ranges of each segment in the managed heap.</span></span>  <span data-ttu-id="7e086-253">如果指针落在由 **-gc** 给定的段范围内，则该指针是一个对象指针。</span><span class="sxs-lookup"><span data-stu-id="7e086-253">If the pointer falls within a segment range given by **-gc**, the pointer is an object pointer.</span></span>|
|<span data-ttu-id="7e086-254">**EEStack** [ **-short**] [ **-EE**]</span><span class="sxs-lookup"><span data-stu-id="7e086-254">**EEStack** [**-short**] [**-EE**]</span></span>|<span data-ttu-id="7e086-255">对一个进程中的所有线程运行 **DumpStack** 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-255">Runs the **DumpStack** command on all threads in the process.</span></span><br /><br /> <span data-ttu-id="7e086-256">将 **-EE** 选项直接传递给 **DumpStack** 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-256">The **-EE** option is passed directly to the **DumpStack** command.</span></span> <span data-ttu-id="7e086-257">**-short** 参数将输出限制为以下类型的线程：</span><span class="sxs-lookup"><span data-stu-id="7e086-257">The **-short** parameter limits the output to the following kinds of threads:</span></span><br /><br /><span data-ttu-id="7e086-258">已获取锁的线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-258">Threads that have taken a lock.</span></span><br /><br /><span data-ttu-id="7e086-259">己停止运行以允许垃圾回收的线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-259">Threads that have been stalled in order to allow a garbage collection.</span></span><br /><br /> <span data-ttu-id="7e086-260">当前在托管代码中的线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-260">Threads that are currently in managed code.</span></span>|
|<span data-ttu-id="7e086-261">**EHInfo** [\<*MethodDesc address*>] [\<*Code address*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-261">**EHInfo** [\<*MethodDesc address*>] [\<*Code address*>]</span></span>|<span data-ttu-id="7e086-262">显示指定方法中的异常处理块。</span><span class="sxs-lookup"><span data-stu-id="7e086-262">Displays the exception handling blocks in a specified method.</span></span>  <span data-ttu-id="7e086-263">此命令显示子句块（`try` 块）和处理程序块（`catch` 块）的代码地址和偏移量。</span><span class="sxs-lookup"><span data-stu-id="7e086-263">This command displays the code addresses and offsets for the clause block (the `try` block) and the handler block (the `catch` block).</span></span>|
|<span data-ttu-id="7e086-264">**常见问题解答**</span><span class="sxs-lookup"><span data-stu-id="7e086-264">**FAQ**</span></span>|<span data-ttu-id="7e086-265">显示常见问题。</span><span class="sxs-lookup"><span data-stu-id="7e086-265">Displays frequently asked questions.</span></span>  <span data-ttu-id="7e086-266">`dotnet-dump`不支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-266">Not supported in `dotnet-dump`.</span></span>|
|<span data-ttu-id="7e086-267">**FinalizeQueue** [ **-detail**] &#124; [ **-allReady**] [ **-short**]</span><span class="sxs-lookup"><span data-stu-id="7e086-267">**FinalizeQueue** [**-detail**] &#124; [**-allReady**] [**-short**]</span></span>|<span data-ttu-id="7e086-268">显示所有已进行终结注册的对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-268">Displays all objects registered for finalization.</span></span><br /><br /> <span data-ttu-id="7e086-269">**-detail** 选项显示有关需要清理的任何 `SyncBlocks` 的额外信息，以及有关等待清理的任何 `RuntimeCallableWrappers` (RCW) 的额外信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-269">The **-detail** option displays extra information about any `SyncBlocks` that need to be cleaned up, and any `RuntimeCallableWrappers` (RCWs) that await cleanup.</span></span> <span data-ttu-id="7e086-270">这两种数据结构都由终结器线程在运行时进行缓存和清理。</span><span class="sxs-lookup"><span data-stu-id="7e086-270">Both of these data structures are cached and cleaned up by the finalizer thread when it runs.</span></span><br /><br /> <span data-ttu-id="7e086-271">`-allReady` 选项显示所有准备终止的对象，无论它们已被垃圾回收标记成这样，还是将被下一个垃圾回收标记。</span><span class="sxs-lookup"><span data-stu-id="7e086-271">The `-allReady` option displays all objects that are ready for finalization, regardless of whether they are already marked by the garbage collection as such, or will be marked by the next garbage collection.</span></span> <span data-ttu-id="7e086-272">“准备终止”列表中的对象为不再为根的可终止对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-272">The objects that are in the "ready for finalization" list are finalizable objects that are no longer rooted.</span></span> <span data-ttu-id="7e086-273">此选项可能耗费大量资源，因为它验证可终止队列中的所有对象是否仍然为根对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-273">This option can be very expensive, because it verifies whether all the objects in the finalizable queues are still rooted.</span></span><br /><br /> <span data-ttu-id="7e086-274">`-short` 选项将输出限制为每个对象的地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-274">The `-short` option limits the output to the address of each object.</span></span> <span data-ttu-id="7e086-275">如果将此选项与 **-allReady** 一起使用，则将枚举具有不再为根的终结器的所有对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-275">If it is used in conjunction with **-allReady**, it enumerates all objects that have a finalizer that are no longer rooted.</span></span> <span data-ttu-id="7e086-276">如果单独使用此选项，则将列出终结和“准备终结”队列中的所有对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-276">If it is used independently, it lists all objects in the finalizable and "ready for finalization" queues.</span></span>|
|<span data-ttu-id="7e086-277">**FindAppDomain** \<*Object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-277">**FindAppDomain** \<*Object address*></span></span>|<span data-ttu-id="7e086-278">确定指定地址处的对象的应用程序域。</span><span class="sxs-lookup"><span data-stu-id="7e086-278">Determines the application domain of an object at the specified address.</span></span>|
|<span data-ttu-id="7e086-279">**FindRoots** **-gen** \<*N*> &#124; **-gen any** &#124;\<*object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-279">**FindRoots** **-gen** \<*N*> &#124; **-gen any** &#124;\<*object address*></span></span>|<span data-ttu-id="7e086-280">导致调试器在指定生成的下次回收时在调试对象中中断。</span><span class="sxs-lookup"><span data-stu-id="7e086-280">Causes the debugger to break in the debuggee on the next collection of the specified generation.</span></span> <span data-ttu-id="7e086-281">在中断发生时立即重置该效果。</span><span class="sxs-lookup"><span data-stu-id="7e086-281">The effect is reset as soon as the break occurs.</span></span> <span data-ttu-id="7e086-282">若要在下一个集合中断，你必须重新发出该命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-282">To break on the next collection, you have to reissue the command.</span></span> <span data-ttu-id="7e086-283">此命令的 *\<object address>* 形式在 -gen 或 -gen any 引起的中断发生后使用。</span><span class="sxs-lookup"><span data-stu-id="7e086-283">The *\<object address>* form of this command is used after the break caused by the **-gen** or **-gen any** has occurred.</span></span> <span data-ttu-id="7e086-284">此时，调试对象处于正确的状态，以便 **FindRoots** 从当前已报废的生成中识别出对象的根。</span><span class="sxs-lookup"><span data-stu-id="7e086-284">At that time, the debuggee is in the right state for **FindRoots** to identify roots for objects from the current condemned generations.</span></span> <span data-ttu-id="7e086-285">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-285">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-286">**GCHandles** [ **-perdomain**]</span><span class="sxs-lookup"><span data-stu-id="7e086-286">**GCHandles** [**-perdomain**]</span></span>|<span data-ttu-id="7e086-287">显示有关进程中的垃圾回收器句柄的统计信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-287">Displays statistics about garbage collector handles in the process.</span></span><br /><br /> <span data-ttu-id="7e086-288">**-perdomain** 选项将按应用程序域排列统计信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-288">The **-perdomain** option arranges the statistics by application domain.</span></span><br /><br /> <span data-ttu-id="7e086-289">使用 **GCHandles** 命令可查找由垃圾回收器句柄泄漏导致的内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="7e086-289">Use the **GCHandles** command to find memory leaks caused by garbage collector handle leaks.</span></span> <span data-ttu-id="7e086-290">例如，当代码由于强垃圾回收器句柄仍指向一个大型数组而保留该数组时，若不释放句柄就将其放弃，则会发生内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="7e086-290">For example, a memory leak occurs when code retains a large array because a strong garbage collector handle still points to it, and the handle is discarded without freeing it.</span></span> <br /><br /><span data-ttu-id="7e086-291">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-291">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-292">**GCHandleLeaks**</span><span class="sxs-lookup"><span data-stu-id="7e086-292">**GCHandleLeaks**</span></span>|<span data-ttu-id="7e086-293">在内存中搜索进程中的对强垃圾回收器句柄和固定垃圾回收器句柄的任何引用并显示结果。</span><span class="sxs-lookup"><span data-stu-id="7e086-293">Searches memory for any references to strong and pinned garbage collector handles in the process and displays the results.</span></span> <span data-ttu-id="7e086-294">如果找到某个句柄，**GCHandleLeaks** 命令将显示相应的引用地址。</span><span class="sxs-lookup"><span data-stu-id="7e086-294">If a handle is found, the **GCHandleLeaks** command displays the address of the reference.</span></span> <span data-ttu-id="7e086-295">如果在内存中找不到句柄，此命令将显示一个通知。</span><span class="sxs-lookup"><span data-stu-id="7e086-295">If a handle is not found in memory, this command displays a notification.</span></span> <span data-ttu-id="7e086-296">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-296">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-297">**GCInfo** \<*MethodDesc address*>\<*Code address*></span><span class="sxs-lookup"><span data-stu-id="7e086-297">**GCInfo** \<*MethodDesc address*>\<*Code address*></span></span>|<span data-ttu-id="7e086-298">显示指示寄存器或堆栈位置何时包含托管对象的数据。</span><span class="sxs-lookup"><span data-stu-id="7e086-298">Displays data that indicates when registers or stack locations contain managed objects.</span></span> <span data-ttu-id="7e086-299">如果发生垃圾回收，回收器必须知道对象引用的位置，以便可以使用新的对象指针值更新相应的对象引用。</span><span class="sxs-lookup"><span data-stu-id="7e086-299">If a garbage collection occurs, the collector must know the locations of references to objects so it can update them with new object pointer values.</span></span>|
|<span data-ttu-id="7e086-300">**GCRoot** [ **-nostacks**] [ **-all**] \<*Object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-300">**GCRoot** [**-nostacks**] [**-all**] \<*Object address*></span></span>|<span data-ttu-id="7e086-301">显示有关对指定地址处的对象的引用（或根）的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-301">Displays information about references (or roots) to an object at the specified address.</span></span><br /><br /> <span data-ttu-id="7e086-302">**GCRoot** 命令将检查整个托管堆和句柄表以查找其他对象内的句柄和堆栈上的句柄。</span><span class="sxs-lookup"><span data-stu-id="7e086-302">The **GCRoot** command examines the entire managed heap and the handle table for handles within other objects and handles on the stack.</span></span> <span data-ttu-id="7e086-303">然后，在每个堆栈中搜索对象的指针，同时还搜索终结器队列。</span><span class="sxs-lookup"><span data-stu-id="7e086-303">Each stack is then searched for pointers to objects, and the finalizer queue is also searched.</span></span><br /><br /> <span data-ttu-id="7e086-304">此命令无法确定堆栈根是有效的还是已丢弃。</span><span class="sxs-lookup"><span data-stu-id="7e086-304">This command does not determine whether a stack root is valid or is discarded.</span></span> <span data-ttu-id="7e086-305">使用 clrstack 和 U 命令可对本地或自变量值所属的帧进行反汇编，以便确定堆栈根是否仍在使用中 。</span><span class="sxs-lookup"><span data-stu-id="7e086-305">Use the **clrstack** and **U** commands to disassemble the frame that the local or argument value belongs to in order to determine if the stack root is still in use.</span></span><br /><br /> <span data-ttu-id="7e086-306">-nostacks 选项将搜索限制为垃圾回收器句柄和 reachable 对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-306">The **-nostacks** option restricts the search to garbage collector handles and reachable objects.</span></span><br /><br /> <span data-ttu-id="7e086-307">“-all”选项强制显示所有根，而不仅仅是唯一的根。</span><span class="sxs-lookup"><span data-stu-id="7e086-307">The **-all** option forces all roots to be displayed instead of just the unique roots.</span></span>|
|<span data-ttu-id="7e086-308">**GCWhere**  *\<object address>*</span><span class="sxs-lookup"><span data-stu-id="7e086-308">**GCWhere**  *\<object address>*</span></span>|<span data-ttu-id="7e086-309">显示垃圾回收堆中自变量传入的位置和大小。</span><span class="sxs-lookup"><span data-stu-id="7e086-309">Displays the location and size in the garbage collection heap of the argument passed in.</span></span> <span data-ttu-id="7e086-310">如果自变量位于托管堆中，但不是有效的对象地址，则大小显示为 0（零）。</span><span class="sxs-lookup"><span data-stu-id="7e086-310">When the argument lies in the managed heap but is not a valid object address, the size is displayed as 0 (zero).</span></span>|
|<span data-ttu-id="7e086-311">**Help** (**soshelp**) [\<*command*>] [`faq`]</span><span class="sxs-lookup"><span data-stu-id="7e086-311">**Help** (**soshelp**) [\<*command*>] [`faq`]</span></span>|<span data-ttu-id="7e086-312">在未指定参数时显示所有可用命令，或者显示有关指定命令的详细帮助信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-312">Displays all available commands when no parameter is specified, or displays detailed help information about the specified command.</span></span><br /><br /> <span data-ttu-id="7e086-313">`faq` 参数显示常见问题的答案。</span><span class="sxs-lookup"><span data-stu-id="7e086-313">The `faq` parameter displays answers to frequently asked questions.</span></span>|
|<span data-ttu-id="7e086-314">**HeapStat** [ **-inclUnrooted** &#124; **-iu**]</span><span class="sxs-lookup"><span data-stu-id="7e086-314">**HeapStat** [**-inclUnrooted** &#124; **-iu**]</span></span>|<span data-ttu-id="7e086-315">显示每个堆的生成大小及每个堆上各生成的可用空间总量。</span><span class="sxs-lookup"><span data-stu-id="7e086-315">Displays the generation sizes for each heap and the total free space in each generation on each heap.</span></span> <span data-ttu-id="7e086-316">如果指定 -**inclUnrooted** 选项，则报告将包括有关不再为根的垃圾回收堆中的托管对象的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-316">If the -**inclUnrooted** option is specified, the report includes information about the managed objects from the garbage collection heap that is no longer rooted.</span></span> <span data-ttu-id="7e086-317">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-317">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-318">**HistClear**</span><span class="sxs-lookup"><span data-stu-id="7e086-318">**HistClear**</span></span>|<span data-ttu-id="7e086-319">释放由 `Hist` 命令系列使用的任何资源。</span><span class="sxs-lookup"><span data-stu-id="7e086-319">Releases any resources used by the family of `Hist` commands.</span></span><br /><br /> <span data-ttu-id="7e086-320">通常，你不必显式调用 `HistClear`，因为每个 `HistInit` 都会清理以前的资源。</span><span class="sxs-lookup"><span data-stu-id="7e086-320">Generally, you do not have to explicitly call `HistClear`, because each `HistInit` cleans up the previous resources.</span></span>|
|<span data-ttu-id="7e086-321">**HistInit**</span><span class="sxs-lookup"><span data-stu-id="7e086-321">**HistInit**</span></span>|<span data-ttu-id="7e086-322">从保存在调试对象中的压力日志初始化 SOS 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-322">Initializes the SOS structures from the stress log saved in the debuggee.</span></span>|
|<span data-ttu-id="7e086-323">**HistObj** *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="7e086-323">**HistObj** *<obj_address>*</span></span>|<span data-ttu-id="7e086-324">检查所有压力日志的重定位记录，并显示可能已将地址作为自变量传入的垃圾回收重定位链。</span><span class="sxs-lookup"><span data-stu-id="7e086-324">Examines all stress log relocation records and displays the chain of garbage collection relocations that may have led to the address passed in as an argument.</span></span>|
|<span data-ttu-id="7e086-325">**HistObjFind**  *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="7e086-325">**HistObjFind**  *<obj_address>*</span></span>|<span data-ttu-id="7e086-326">显示在指定地址处引用对象的所有日志项。</span><span class="sxs-lookup"><span data-stu-id="7e086-326">Displays all the log entries that reference an object at the specified address.</span></span>|
|<span data-ttu-id="7e086-327">**HistRoot** *\<root>*</span><span class="sxs-lookup"><span data-stu-id="7e086-327">**HistRoot** *\<root>*</span></span>|<span data-ttu-id="7e086-328">显示与指定根的提升和重定位相关的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-328">Displays information related to both promotions and relocations of the specified root.</span></span><br /><br /> <span data-ttu-id="7e086-329">根值可用于通过垃圾回收来跟踪对象的移动。</span><span class="sxs-lookup"><span data-stu-id="7e086-329">The root value can be used to track the movement of an object through the garbage collections.</span></span>|
|<span data-ttu-id="7e086-330">**IP2MD** (**ip2md**) \<*Code address*></span><span class="sxs-lookup"><span data-stu-id="7e086-330">**IP2MD** (**ip2md**) \<*Code address*></span></span>|<span data-ttu-id="7e086-331">显示已 JIT 编译的代码中指定地址处的 `MethodDesc` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-331">Displays the `MethodDesc` structure at the specified address in code that has been JIT-compiled.</span></span>|
|<span data-ttu-id="7e086-332">**ListNearObj** (**lno**) *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="7e086-332">**ListNearObj** (**lno**) *<obj_address>*</span></span>|<span data-ttu-id="7e086-333">显示指定地址之前和之后的对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-333">Displays the objects preceding and following the specified address.</span></span> <span data-ttu-id="7e086-334">该命令在垃圾回收堆和自变量地址之后的对象中寻找地址，而该垃圾回收堆看上去像托管对象（基于有效的方法表）的有效开头。</span><span class="sxs-lookup"><span data-stu-id="7e086-334">The command looks for the address in the garbage collection heap that looks like a valid beginning of a managed object (based on a valid method table) and the object following the argument address.</span></span> <span data-ttu-id="7e086-335">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-335">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-336">**MinidumpMode** [**0**] [**1**]</span><span class="sxs-lookup"><span data-stu-id="7e086-336">**MinidumpMode** [**0**] [**1**]</span></span>|<span data-ttu-id="7e086-337">防止在使用小型转储时运行不安全的命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-337">Prevents running unsafe commands when using a minidump.</span></span><br /><br /> <span data-ttu-id="7e086-338">传递 **0** 禁用此功能，或传递 **1** 启用此功能。</span><span class="sxs-lookup"><span data-stu-id="7e086-338">Pass **0** to disable this feature or **1** to enable this feature.</span></span> <span data-ttu-id="7e086-339">默认情况下，**MinidumpMode** 值设置为 **0**。</span><span class="sxs-lookup"><span data-stu-id="7e086-339">By default, the **MinidumpMode** value is set to **0**.</span></span><br /><br /> <span data-ttu-id="7e086-340">使用 **.dump /m** 命令或 **.dump** 命令创建的小型转储具有有限的 CLR 特定数据，允许只正确地运行一小部分 SOS 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-340">Minidumps created with the **.dump /m** command or **.dump** command have limited CLR-specific data and allow you to run only a subset of SOS commands correctly.</span></span> <span data-ttu-id="7e086-341">有些命令可能会因错误而失败，因为所需的内存区域未被映射或仅被部分映射。</span><span class="sxs-lookup"><span data-stu-id="7e086-341">Some commands may fail with unexpected errors because required areas of memory are not mapped or are only partially mapped.</span></span> <span data-ttu-id="7e086-342">此选项可防止你对小型转储运行不安全的命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-342">This option protects you from running unsafe commands against minidumps.</span></span> <br /><br /><span data-ttu-id="7e086-343">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-343">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-344">**Name2EE** (**name2ee**) \<*module name*> \<*type or method name*></span><span class="sxs-lookup"><span data-stu-id="7e086-344">**Name2EE** (**name2ee**) \<*module name*> \<*type or method name*></span></span><br /><br /> <span data-ttu-id="7e086-345">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="7e086-345">-or-</span></span><br /><br /> <span data-ttu-id="7e086-346">**Name2EE** \<*module name*> **!** \<*type or method name*></span><span class="sxs-lookup"><span data-stu-id="7e086-346">**Name2EE** \<*module name*>**!**\<*type or method name*></span></span>|<span data-ttu-id="7e086-347">显示指定模块中的指定类型或方法的 `MethodTable` 结构和 `EEClass` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-347">Displays the `MethodTable` structure and `EEClass` structure for the specified type or method in the specified module.</span></span><br /><br /> <span data-ttu-id="7e086-348">在进程中必须加载指定的模块。</span><span class="sxs-lookup"><span data-stu-id="7e086-348">The specified module must be loaded in the process.</span></span><br /><br /> <span data-ttu-id="7e086-349">若要获取正确的类型名称，请通过使用 [Ildasm.exe（IL 反汇编程序）](../../../docs/framework/tools/ildasm-exe-il-disassembler.md)浏览模块。</span><span class="sxs-lookup"><span data-stu-id="7e086-349">To get the proper type name, browse the module by using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md).</span></span> <span data-ttu-id="7e086-350">也可以将 `*` 作为模块名参数传递以搜索所有已加载的托管模块。</span><span class="sxs-lookup"><span data-stu-id="7e086-350">You can also pass `*` as the module name parameter to search all loaded managed modules.</span></span> <span data-ttu-id="7e086-351">*module name* 参数也可以是模块的调试器名称，如 `mscorlib` 或 `image00400000`。</span><span class="sxs-lookup"><span data-stu-id="7e086-351">The *module name* parameter can also be the debugger's name for a module, such as `mscorlib` or `image00400000`.</span></span><br /><br /> <span data-ttu-id="7e086-352">此命令支持 <`module`>`!`<`type`> 的 Windows 调试器语法。</span><span class="sxs-lookup"><span data-stu-id="7e086-352">This command supports the Windows debugger syntax of <`module`>`!`<`type`>.</span></span> <span data-ttu-id="7e086-353">类型必须是完全限定的。</span><span class="sxs-lookup"><span data-stu-id="7e086-353">The type must be fully qualified.</span></span>|
|<span data-ttu-id="7e086-354">**ObjSize** [\<*Object address*>] &#124; [ **-aggregate**] [ **-stat**]</span><span class="sxs-lookup"><span data-stu-id="7e086-354">**ObjSize** [\<*Object address*>] &#124; [**-aggregate**] [**-stat**]</span></span>|<span data-ttu-id="7e086-355">显示指定对象的大小。</span><span class="sxs-lookup"><span data-stu-id="7e086-355">Displays the size of the specified object.</span></span> <span data-ttu-id="7e086-356">如果未指定任何参数，则 **ObjSize** 命令将显示在托管线程上找到的所有对象的大小，显示进程中的所有垃圾回收器句柄，并对这些句柄指向的任何对象的大小进行合计。</span><span class="sxs-lookup"><span data-stu-id="7e086-356">If you do not specify any parameters, the **ObjSize** command displays the size of all objects found on managed threads, displays all garbage collector handles in the process, and totals the size of any objects pointed to by those handles.</span></span> <span data-ttu-id="7e086-357">除父对象之外，**ObjSize** 命令还包括所有子对象的大小。</span><span class="sxs-lookup"><span data-stu-id="7e086-357">The **ObjSize** command includes the size of all child objects in addition to the parent.</span></span><br /><br /> <span data-ttu-id="7e086-358">**-aggregate** 选项能够与 **-stat** 参数一起使用，以获得仍为根类型的类型的详细视图。</span><span class="sxs-lookup"><span data-stu-id="7e086-358">The **-aggregate** option can be used in conjunction with the **-stat** argument to get a detailed view of the types that are still rooted.</span></span> <span data-ttu-id="7e086-359">通过使用 **!dumpheap -stat** 和 **!objsize -aggregate -stat**，可以确定不再为根的对象并诊断各种内存问题。</span><span class="sxs-lookup"><span data-stu-id="7e086-359">By using **!dumpheap -stat** and **!objsize -aggregate -stat**, you can determine which objects are no longer rooted and diagnose various memory issues.</span></span> <br /><br /> <span data-ttu-id="7e086-360">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-360">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-361">**PrintException** [ **-nested**] [ **-lines**] [\<*Exception object address*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-361">**PrintException** [**-nested**] [**-lines**] [\<*Exception object address*>]</span></span><br /><br /> <span data-ttu-id="7e086-362">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="7e086-362">-or-</span></span><br /><br /> <span data-ttu-id="7e086-363">**PE** [ **-nested**] [\<*Exception object address*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-363">**PE** [**-nested**] [\<*Exception object address*>]</span></span>|<span data-ttu-id="7e086-364">显示从指定地址处的 <xref:System.Exception> 类派生的任何对象的字段并设置这些字段的格式。</span><span class="sxs-lookup"><span data-stu-id="7e086-364">Displays and formats fields of any object derived from the <xref:System.Exception> class at the specified address.</span></span> <span data-ttu-id="7e086-365">如果不指定地址，**PrintException** 命令将显示在当前线程上引发的最后一个异常。</span><span class="sxs-lookup"><span data-stu-id="7e086-365">If you do not specify an address, the **PrintException** command displays the last exception thrown on the current thread.</span></span><br /><br /> <span data-ttu-id="7e086-366">**-nested** 选项显示有关嵌套异常对象的详细信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-366">The **-nested** option displays details about nested exception objects.</span></span><br /><br /> <span data-ttu-id="7e086-367">**-lines** 选项显示源信息（如果可用）。</span><span class="sxs-lookup"><span data-stu-id="7e086-367">The **-lines** option displays source information, if available.</span></span><br /><br /> <span data-ttu-id="7e086-368">可以使用此命令设置 `_stackTrace` 字段的格式并查看该字段（它是一个二进制数组）。</span><span class="sxs-lookup"><span data-stu-id="7e086-368">You can use this command to format and view the `_stackTrace` field, which is a binary array.</span></span>|
|<span data-ttu-id="7e086-369">**ProcInfo** [ **-env**] [ **-time**] [ **-mem**]</span><span class="sxs-lookup"><span data-stu-id="7e086-369">**ProcInfo** [**-env**] [**-time**] [**-mem**]</span></span>|<span data-ttu-id="7e086-370">显示进程的环境变量、内核 CPU 时间和内存使用统计信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-370">Displays environment variables for the process, kernel CPU time, and memory usage statistics.</span></span> <span data-ttu-id="7e086-371">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-371">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-372">**RCWCleanupList** \<*RCWCleanupList address*></span><span class="sxs-lookup"><span data-stu-id="7e086-372">**RCWCleanupList** \<*RCWCleanupList address*></span></span>|<span data-ttu-id="7e086-373">显示在指定地址处等待清理的运行时可调用包装器的列表。</span><span class="sxs-lookup"><span data-stu-id="7e086-373">Displays the list of runtime callable wrappers at the specified address that are awaiting cleanup.</span></span> <span data-ttu-id="7e086-374">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-374">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-375">**SaveModule** \<*Base address*> \<*Filename*></span><span class="sxs-lookup"><span data-stu-id="7e086-375">**SaveModule** \<*Base address*> \<*Filename*></span></span>|<span data-ttu-id="7e086-376">将加载到内存中指定地址的图像写入指定文件。</span><span class="sxs-lookup"><span data-stu-id="7e086-376">Writes an image, which is loaded in memory at the specified address, to the specified file.</span></span> <span data-ttu-id="7e086-377">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-377">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-378">**SetHostRuntime** [\<runtime-directory\>]</span><span class="sxs-lookup"><span data-stu-id="7e086-378">**SetHostRuntime** [\<runtime-directory\>]</span></span>|<span data-ttu-id="7e086-379">此命令会设置 .NET Core 运行时的路径，以用于托管在调试器 (lldb) 中作为 SOS 的一部分运行的托管代码。</span><span class="sxs-lookup"><span data-stu-id="7e086-379">This command sets the path to the .NET Core runtime to use to host the managed code that runs as part of SOS in the debugger (lldb).</span></span> <span data-ttu-id="7e086-380">运行时至少需要为 2.1.0 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="7e086-380">The runtime needs to be at least version 2.1.0 or greater.</span></span> <span data-ttu-id="7e086-381">如果目录中有空格，则需要使用单引号 (') 引起来。</span><span class="sxs-lookup"><span data-stu-id="7e086-381">If there are spaces in directory, it needs to be single-quoted (').</span></span><br/><br/><span data-ttu-id="7e086-382">通常，SOS 会尝试查找已安装的 .NET Core 运行时来自动运行其托管代码，但如果失败，则可用此命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-382">Normally, SOS attempts to find an installed .NET Core runtime to run its managed code automatically but this command is available if it fails.</span></span> <span data-ttu-id="7e086-383">默认情况下使用正进行调试的同一运行时 (libcoreclr)。</span><span class="sxs-lookup"><span data-stu-id="7e086-383">The default is to use the same runtime (libcoreclr) being debugged.</span></span> <span data-ttu-id="7e086-384">如果正进行调试的默认运行时无法有效运行 SOS 代码或其版本低于 2.1.0，请使用此命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-384">Use this command if the default runtime being debugged isn't working enough to run the SOS code or if the version is less than 2.1.0.</span></span><br/><br/><span data-ttu-id="7e086-385">如果在运行 SOS 命令时收到以下错误消息，请使用此命令将路径设置为 2.1.0 或更高版本的 .NET Core 运行时。</span><span class="sxs-lookup"><span data-stu-id="7e086-385">If you received the following error message when running a SOS command, use this command to set the path to 2.1.0 or greater .NET Core runtime.</span></span> <br/><br/>`(lldb) clrstack`<br/>`Error: Fail to initialize CoreCLR 80004005 ClrStack failed`<br/><br/>`(lldb) sethostruntime /usr/share/dotnet/shared/Microsoft.NETCore.App/2.1.6`<br/><br/><span data-ttu-id="7e086-386">可以在命令行界面中使用“dotnet --info”来查找已安装 .NET Core 运行时的路径。</span><span class="sxs-lookup"><span data-stu-id="7e086-386">You can use the "dotnet --info" in a command shell to find the path of an installed .NET Core runtime.</span></span>|
|<span data-ttu-id="7e086-387">**SetSymbolServer** [ **-ms**] [ **-disable**] [ **-log**] [ **-loadsymbols**] [ **-cache** \<cache-path>] [ **-directory** \<search-directory>] [ **-sympath** \<windows-symbol-path>] [\<symbol-server-URL>]</span><span class="sxs-lookup"><span data-stu-id="7e086-387">**SetSymbolServer** [**-ms**] [**-disable**] [**-log**] [**-loadsymbols**] [**-cache** \<cache-path>] [**-directory** \<search-directory>] [**-sympath** \<windows-symbol-path>] [\<symbol-server-URL>]</span></span>|<span data-ttu-id="7e086-388">启用符号服务器下载支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-388">Enables the symbol server downloading support.</span></span><br/><br/><span data-ttu-id="7e086-389">“-ms”选项允许从公共 Microsoft 符号服务器下载。</span><span class="sxs-lookup"><span data-stu-id="7e086-389">The **-ms** option enables downloading from the public Microsoft symbol server.</span></span><br/><br/><span data-ttu-id="7e086-390">“-disable”选项启用符号下载支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-390">The **-disable** option turns on the symbol download support.</span></span><br/><br/><span data-ttu-id="7e086-391">-cache \<cache-path> 选项指定符号缓存目录。</span><span class="sxs-lookup"><span data-stu-id="7e086-391">The **-cache** \<cache-path> option specifies a symbol cache directory.</span></span> <span data-ttu-id="7e086-392">如果未指定，则默认为 $HOME/.dotnet/symbolcache。</span><span class="sxs-lookup"><span data-stu-id="7e086-392">The default is $HOME/.dotnet/symbolcache if not specified.</span></span><br/><br/><span data-ttu-id="7e086-393">“-directory”选项添加路径来搜索符号。</span><span class="sxs-lookup"><span data-stu-id="7e086-393">The **-directory** option adds a path to search for symbols.</span></span> <span data-ttu-id="7e086-394">可以有多个。</span><span class="sxs-lookup"><span data-stu-id="7e086-394">Can be more than one.</span></span><br/><br/><span data-ttu-id="7e086-395">“-sympath”选项以 Windows 符号路径格式添加服务器、缓存和目录路径。</span><span class="sxs-lookup"><span data-stu-id="7e086-395">The **-sympath** option adds server, cache, and directory paths in the Windows symbol path format.</span></span><br/><br/><span data-ttu-id="7e086-396">“-log”选项启用符号下载日志记录。</span><span class="sxs-lookup"><span data-stu-id="7e086-396">The **-log** option enables symbol download logging.</span></span><br/><br/><span data-ttu-id="7e086-397">“-loadsymbols”选项尝试下载运行时的原生 .NET Core 符号。</span><span class="sxs-lookup"><span data-stu-id="7e086-397">The **-loadsymbols** option attempts to download the native .NET Core symbols for the runtime.</span></span> <span data-ttu-id="7e086-398">lldb 和 dotnet-dump 上受支持</span><span class="sxs-lookup"><span data-stu-id="7e086-398">Supported on lldb and dotnet-dump</span></span>|
|<span data-ttu-id="7e086-399">**SOSFlush**</span><span class="sxs-lookup"><span data-stu-id="7e086-399">**SOSFlush**</span></span>|<span data-ttu-id="7e086-400">刷新内部 SOS 缓存。</span><span class="sxs-lookup"><span data-stu-id="7e086-400">Flushes an internal SOS cache.</span></span>|
|<span data-ttu-id="7e086-401">**SOSStatus** [ **-reset**]</span><span class="sxs-lookup"><span data-stu-id="7e086-401">**SOSStatus** [**-reset**]</span></span>|<span data-ttu-id="7e086-402">显示内部 SOS 状态或重置内部缓存状态。</span><span class="sxs-lookup"><span data-stu-id="7e086-402">Displays internal SOS status or reset the internal cached state.</span></span>|
|<span data-ttu-id="7e086-403">**StopOnException** [ **-derived**] [ **-create** &#124; **-create2**] \<*Exception*> \<*Pseudo-register number*></span><span class="sxs-lookup"><span data-stu-id="7e086-403">**StopOnException** [**-derived**] [**-create** &#124; **-create2**] \<*Exception*> \<*Pseudo-register number*></span></span>|<span data-ttu-id="7e086-404">使调试器在引发指定异常时停止，但在引发其他异常时继续运行。</span><span class="sxs-lookup"><span data-stu-id="7e086-404">Causes the debugger to stop when the specified exception is thrown, but to continue running when other exceptions are thrown.</span></span><br /><br /> <span data-ttu-id="7e086-405">**-derived** 选项用于捕获指定异常以及从指定异常派生的每个异常。</span><span class="sxs-lookup"><span data-stu-id="7e086-405">The **-derived** option catches the specified exception and every exception that derives from the specified exception.</span></span> <br /><br /> <span data-ttu-id="7e086-406">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-406">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-407">**SyncBlk** [ **-all** &#124; \<*syncblk number*>]</span><span class="sxs-lookup"><span data-stu-id="7e086-407">**SyncBlk** [**-all** &#124; \<*syncblk number*>]</span></span>|<span data-ttu-id="7e086-408">显示指定的 `SyncBlock` 结构或所有 `SyncBlock` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-408">Displays the specified `SyncBlock` structure or all `SyncBlock` structures.</span></span>  <span data-ttu-id="7e086-409">如果不传递任何自变量，**SyncBlk** 命令将显示与一个线程拥有的对象对应的 `SyncBlock` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-409">If you do not pass any arguments, the **SyncBlk** command displays the `SyncBlock` structure corresponding to objects that are owned by a thread.</span></span><br /><br /> <span data-ttu-id="7e086-410">`SyncBlock` 结构是一个容器，用于存放无需为每个对象创建的额外信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-410">A `SyncBlock` structure is a container for extra information that does not need to be created for every object.</span></span> <span data-ttu-id="7e086-411">它可以存放 COM 互操作数据、哈希代码和用于线程安全操作的锁定信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-411">It can hold COM interop data, hash codes, and locking information for thread-safe operations.</span></span>|
|<span data-ttu-id="7e086-412">**ThreadPool**</span><span class="sxs-lookup"><span data-stu-id="7e086-412">**ThreadPool**</span></span>|<span data-ttu-id="7e086-413">显示有关托管线程池的信息，包括队列中工作请求的数目、完成端口线程的数目和计时器的数目。</span><span class="sxs-lookup"><span data-stu-id="7e086-413">Displays information about the managed thread pool, including the number of work requests in the queue, the number of completion port threads, and the number of timers.</span></span>|
|<span data-ttu-id="7e086-414">**Threads** (**clrthreads**) [ **-live**] [ **-special**]</span><span class="sxs-lookup"><span data-stu-id="7e086-414">**Threads** (**clrthreads**) [**-live**] [**-special**]</span></span>|<span data-ttu-id="7e086-415">显示进程中的所有托管线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-415">Displays all managed threads in the process.</span></span><br /><br /> <span data-ttu-id="7e086-416">Threads 命令显示调试程序速记 ID、CLR 线程 ID 以及操作系统线程 ID。</span><span class="sxs-lookup"><span data-stu-id="7e086-416">The **Threads** command displays the debugger shorthand ID, the CLR thread ID, and the operating system thread ID.</span></span>  <span data-ttu-id="7e086-417">此外，**Threads** 命令还会显示“Domain”列、“APT”列和“Exception”列，这三列分别用于指示正在执行某线程的应用程序域、显示 COM 单元模式以及显示该线程中引发的上一个异常。</span><span class="sxs-lookup"><span data-stu-id="7e086-417">Additionally, the **Threads** command displays a Domain column that indicates the application domain in which a thread is executing, an APT column that displays the COM apartment mode, and an Exception column that displays the last exception thrown in the thread.</span></span><br /><br /> <span data-ttu-id="7e086-418">**-live** 选项显示与活动线程关联的线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-418">The **-live** option displays threads associated with a live thread.</span></span><br /><br /> <span data-ttu-id="7e086-419"> 选项显示由 CLR 创建的所有特殊线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-419">The **-special** option displays all special threads created by the CLR.</span></span> <span data-ttu-id="7e086-420">特殊线程包括垃圾回收线程（在并发垃圾回收和服务器垃圾回收中）、调试器帮助程序线程、终结器线程、<xref:System.AppDomain> 卸载线程和线程池计时器线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-420">Special threads include garbage collection threads (in concurrent and server garbage collection), debugger helper threads, finalizer threads, <xref:System.AppDomain> unload threads, and thread pool timer threads.</span></span>|
|<span data-ttu-id="7e086-421">**ThreadState \<** *State value field* **>**</span><span class="sxs-lookup"><span data-stu-id="7e086-421">**ThreadState \<** *State value field* **>**</span></span>|<span data-ttu-id="7e086-422">显示线程的状态。</span><span class="sxs-lookup"><span data-stu-id="7e086-422">Displays the state of the thread.</span></span> <span data-ttu-id="7e086-423">`value` 参数为 **Threads** 报告输出中的 `State` 字段的值。</span><span class="sxs-lookup"><span data-stu-id="7e086-423">The `value` parameter is the value of the `State` field in the **Threads** report output.</span></span>|
|<span data-ttu-id="7e086-424">**Token2EE** \<*module name*> \<*token*></span><span class="sxs-lookup"><span data-stu-id="7e086-424">**Token2EE** \<*module name*> \<*token*></span></span>|<span data-ttu-id="7e086-425">将指定模块中的指定元数据标记转换成 `MethodTable` 结构或 `MethodDesc` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-425">Turns the specified metadata token in the specified module into a `MethodTable` structure or `MethodDesc` structure.</span></span><br /><br /> <span data-ttu-id="7e086-426">可以传递 `*` 作为模块名参数，以便在每个已加载的托管模块中查找该标记映射到的内容。</span><span class="sxs-lookup"><span data-stu-id="7e086-426">You can pass `*` for the module name parameter to find what that token maps to in every loaded managed module.</span></span> <span data-ttu-id="7e086-427">也可以传递某个模块的调试器名称，如 `mscorlib` 或 `image00400000`。</span><span class="sxs-lookup"><span data-stu-id="7e086-427">You can also pass the debugger's name for a module, such as `mscorlib` or `image00400000`.</span></span>|
|<span data-ttu-id="7e086-428">**U** [ **-gcinfo**] [ **-ehinfo**] [ **-n**] \<*MethodDesc address*> &#124; \<*Code address*></span><span class="sxs-lookup"><span data-stu-id="7e086-428">**U** [**-gcinfo**] [**-ehinfo**] [**-n**] \<*MethodDesc address*> &#124; \<*Code address*></span></span>|<span data-ttu-id="7e086-429">显示由方法的 `MethodDesc` 结构指针或方法体内的代码地址指定的托管方法的反汇编（带有批注）。</span><span class="sxs-lookup"><span data-stu-id="7e086-429">Displays an annotated disassembly of a managed method specified either by a `MethodDesc` structure pointer for the method or by a code address within the method body.</span></span> <span data-ttu-id="7e086-430">**U** 命令将从开始到结束显示整个方法，并带有将元数据标记转换为名称的批注。</span><span class="sxs-lookup"><span data-stu-id="7e086-430">The **U** command displays the entire method from start to finish, with annotations that convert metadata tokens to names.</span></span><br /><br /> <span data-ttu-id="7e086-431">**-gcinfo** 选项使 **U** 命令显示方法的 `GCInfo` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-431">The **-gcinfo** option causes the **U** command to display the `GCInfo` structure for the method.</span></span><br /><br /> <span data-ttu-id="7e086-432">**-ehinfo** 选项显示方法的异常信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-432">The **-ehinfo** option displays exception information for the method.</span></span> <span data-ttu-id="7e086-433">也可以使用 **EHInfo** 命令获取此信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-433">You can also obtain this information with the **EHInfo** command.</span></span><br /><br /> <span data-ttu-id="7e086-434">**-n** 选项禁止显示源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-434">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="7e086-435">如果调试器已指定选项 SYMOPT_LOAD_LINES，则 SOS 将查找每个托管帧的符号，如果成功，则将显示对应的源文件名和行号。</span><span class="sxs-lookup"><span data-stu-id="7e086-435">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS looks up the symbols for every managed frame and, if successful, displays the corresponding source file name and line number.</span></span> <span data-ttu-id="7e086-436">可以指定 **-n** 选项来禁用此行为。</span><span class="sxs-lookup"><span data-stu-id="7e086-436">You can specify the **-n** option to disable this behavior.</span></span>|
|<span data-ttu-id="7e086-437">**VerifyHeap**</span><span class="sxs-lookup"><span data-stu-id="7e086-437">**VerifyHeap**</span></span>|<span data-ttu-id="7e086-438">检查垃圾回收器堆中是否有损坏迹象，并显示找到的任何错误。</span><span class="sxs-lookup"><span data-stu-id="7e086-438">Checks the garbage collector heap for signs of corruption and displays any errors found.</span></span><br /><br /> <span data-ttu-id="7e086-439">错误构造的平台调用可能导致堆损坏。</span><span class="sxs-lookup"><span data-stu-id="7e086-439">Heap corruptions can be caused by platform invoke calls that are constructed incorrectly.</span></span> |
|<span data-ttu-id="7e086-440">**VerifyObj** \<*object address*></span><span class="sxs-lookup"><span data-stu-id="7e086-440">**VerifyObj** \<*object address*></span></span>|<span data-ttu-id="7e086-441">检查作为自变量传递的对象是否有损坏迹象。</span><span class="sxs-lookup"><span data-stu-id="7e086-441">Checks the object that is passed as an argument for signs of corruption.</span></span> <span data-ttu-id="7e086-442">只有在 Windows 上才受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-442">Only supported on Windows.</span></span>|
|<span data-ttu-id="7e086-443">**VMMap**</span><span class="sxs-lookup"><span data-stu-id="7e086-443">**VMMap**</span></span>|<span data-ttu-id="7e086-444">遍历虚拟地址空间并显示应用于每个区域的保护类型。</span><span class="sxs-lookup"><span data-stu-id="7e086-444">Traverses the virtual address space and displays the type of protection applied to each region.</span></span> <span data-ttu-id="7e086-445">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-445">Only supported with Windbg.</span></span>|
|<span data-ttu-id="7e086-446">**VMStat**</span><span class="sxs-lookup"><span data-stu-id="7e086-446">**VMStat**</span></span>|<span data-ttu-id="7e086-447">提供虚拟地址空间的摘要视图，并按应用于该内存的每种保护类型（可用、已保留、已提交、私有、已映射和映像）排序。</span><span class="sxs-lookup"><span data-stu-id="7e086-447">Provides a summary view of the virtual address space, ordered by each type of protection applied to that memory (free, reserved, committed, private, mapped, image).</span></span> <span data-ttu-id="7e086-448">“TOTAL”列显示“AVERAGE”列乘以“BLK COUNT”列的结果。</span><span class="sxs-lookup"><span data-stu-id="7e086-448">The TOTAL column displays the result of the AVERAGE column multiplied by the BLK COUNT column.</span></span> <span data-ttu-id="7e086-449">仅在 Windbg 中受支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-449">Only supported with Windbg.</span></span>|

### <a name="dotnet-dump"></a><span data-ttu-id="7e086-450">Dotnet-Dump</span><span class="sxs-lookup"><span data-stu-id="7e086-450">Dotnet-Dump</span></span>

<span data-ttu-id="7e086-451">有关 `dotnet-dump analyze` 的可用 SOS 命令的列表，请参阅 [dotnet-dump](dotnet-dump.md#analyze-sos-commands)。</span><span class="sxs-lookup"><span data-stu-id="7e086-451">For a list of available SOS commands with `dotnet-dump analyze`, see [dotnet-dump](dotnet-dump.md#analyze-sos-commands).</span></span>

### <a name="windows-debugger"></a><span data-ttu-id="7e086-452">Windows 调试器</span><span class="sxs-lookup"><span data-stu-id="7e086-452">Windows Debugger</span></span>

<span data-ttu-id="7e086-453">还可以通过将 SOS 调试扩展加载到 [WinDbg/dbg 调试程序](/windows-hardware/drivers/debugger/debugger-download-tools)中并在 Windows 调试程序中执行命令来使用此扩展。</span><span class="sxs-lookup"><span data-stu-id="7e086-453">You can also use the SOS Debugging Extension by loading it into the [WinDbg/dbg debugger](/windows-hardware/drivers/debugger/debugger-download-tools) and executing commands within the Windows debugger.</span></span>  <span data-ttu-id="7e086-454">可对实时进程或转储使用 SOS 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-454">SOS commands can be used on live processes or dumps.</span></span>

<span data-ttu-id="7e086-455">若要将 SOS 调试扩展加载到 Windows 调试程序中，请在工具中运行以下命令：</span><span class="sxs-lookup"><span data-stu-id="7e086-455">To load the SOS Debugging Extension into the Windows debugger, run the following command in the tool:</span></span>

```console
.loadby sos clr
```

<span data-ttu-id="7e086-456">WinDbg.exe 和 Visual Studio 使用与当前使用的 Mscorwks.dll 版本对应的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="7e086-456">WinDbg.exe and Visual Studio use a version of SOS.dll that corresponds to the version of Mscorwks.dll currently in use.</span></span> <span data-ttu-id="7e086-457">默认情况下，应使用与当前版本的 Mscorwks.dll 匹配的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="7e086-457">By default, you should use the version of SOS.dll that matches the current version of Mscorwks.dll.</span></span>

<span data-ttu-id="7e086-458">若要使用在其他计算机上创建的转储文件，请确保该安装所附带的 Mscorwks.dll 文件存在于符号路径中，并加载相应的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="7e086-458">To use a dump file created on another computer, make sure that the Mscorwks.dll file that came with that installation is in your symbol path, and load the corresponding version of SOS.dll.</span></span>

<span data-ttu-id="7e086-459">若要加载特定版本的 SOS.dll，请在 Windows 调试程序中输入以下命令：</span><span class="sxs-lookup"><span data-stu-id="7e086-459">To load a specific version of SOS.dll, enter the following command into the Windows Debugger:</span></span>

```console
.load <full path to sos.dll>
```

### <a name="lldb-debugger"></a><span data-ttu-id="7e086-460">LLDB 调试程序</span><span class="sxs-lookup"><span data-stu-id="7e086-460">LLDB Debugger</span></span>

<span data-ttu-id="7e086-461">有关针对 LLDB 配置 SOS 的说明，请参阅 [dotnet-sos](dotnet-sos.md)。</span><span class="sxs-lookup"><span data-stu-id="7e086-461">For instructions on configuring SOS for LLDB, see [dotnet-sos](dotnet-sos.md).</span></span> <span data-ttu-id="7e086-462">可对实时进程或转储使用 SOS 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-462">SOS commands can be used on live processes or dumps.</span></span>

<span data-ttu-id="7e086-463">默认情况下，可以通过输入以下内容来使用所有 SOS 命令：`sos [command\_name]`。</span><span class="sxs-lookup"><span data-stu-id="7e086-463">By default you can reach all the SOS commands by entering: `sos [command\_name]`.</span></span> <span data-ttu-id="7e086-464">但是，常见命令已有别名，因此你不需要 `sos` 前缀：</span><span class="sxs-lookup"><span data-stu-id="7e086-464">However, the common commands have been aliased so that you don't need the `sos` prefix:</span></span>

| <span data-ttu-id="7e086-465">命令</span><span class="sxs-lookup"><span data-stu-id="7e086-465">Command</span></span>                               | <span data-ttu-id="7e086-466">函数</span><span class="sxs-lookup"><span data-stu-id="7e086-466">Function</span></span>
| ------------------------------------- | ---------------------------------------------------------------------------------------------
|    `bpmd`                             | <span data-ttu-id="7e086-467">在指定模块中的指定托管方法处创建断点。</span><span class="sxs-lookup"><span data-stu-id="7e086-467">Creates a breakpoint at the specified managed method in the specified module.</span></span>
|    `clrstack`                         | <span data-ttu-id="7e086-468">仅提供托管代码的堆栈跟踪。</span><span class="sxs-lookup"><span data-stu-id="7e086-468">Provides a stack trace of managed code only.</span></span>
|    `clrthreads`                       | <span data-ttu-id="7e086-469">列出正在运行的托管线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-469">List the managed threads that are running.</span></span>
|    `clru`                             | <span data-ttu-id="7e086-470">显示托管方法的批注反汇编。</span><span class="sxs-lookup"><span data-stu-id="7e086-470">Displays an annotated disassembly of a managed method.</span></span>
|    `dso`                              | <span data-ttu-id="7e086-471">显示在当前堆栈的边界内找到的所有托管对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-471">Displays all managed objects found within the bounds of the current stack.</span></span>
|    `dumpasync`                        | <span data-ttu-id="7e086-472">显示有关垃圾回收堆上异步状态机的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-472">Displays info about async state machines on the garbage-collected heap.</span></span>
|    `dumpclass`                        | <span data-ttu-id="7e086-473">显示有关指定地址处的 `EEClass` 结构的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-473">Displays information about the `EEClass` structure at the specified address.</span></span>
|    `dumpdomain`                       | <span data-ttu-id="7e086-474">显示所有 AppDomain 和指定域中的所有程序集的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-474">Displays information all the AppDomains and all assemblies within the specified domain.</span></span>
|    `dumpheap`                         | <span data-ttu-id="7e086-475">显示有关垃圾回收堆的信息和有关对象的收集统计信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-475">Displays info about the garbage-collected heap and collection statistics about objects.</span></span>
|    `dumpil`                           | <span data-ttu-id="7e086-476">显示与托管方法关联的 Microsoft 中间语言 (MSIL)。</span><span class="sxs-lookup"><span data-stu-id="7e086-476">Displays the Microsoft intermediate language (MSIL) that is associated with a managed method.</span></span>
|    `dumplog`                          | <span data-ttu-id="7e086-477">将内存中压力日志的内容写入到指定文件。</span><span class="sxs-lookup"><span data-stu-id="7e086-477">Writes the contents of an in-memory stress log to the specified file.</span></span>
|    `dumpmd`                           | <span data-ttu-id="7e086-478">显示有关指定地址处的 `MethodDesc` 结构的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-478">Displays information about the `MethodDesc` structure at the specified address.</span></span>
|    `dumpmodule`                       | <span data-ttu-id="7e086-479">显示有关指定地址处的模块的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-479">Displays information about the module at the specified address.</span></span>
|    `dumpmt`                           | <span data-ttu-id="7e086-480">显示有关指定地址处的方法表的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-480">Displays information about the method table at the specified address.</span></span>
|    `dumpobj`                          | <span data-ttu-id="7e086-481">显示有关指定地址处的对象的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-481">Displays info the object at the specified address.</span></span>
|    `dumpstack`                        | <span data-ttu-id="7e086-482">显示原生和托管堆栈跟踪。</span><span class="sxs-lookup"><span data-stu-id="7e086-482">Displays a native and managed stack trace.</span></span>
|    `eeheap`                           | <span data-ttu-id="7e086-483">显示有关内部运行时数据结构所使用的进程内存的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-483">Displays info about process memory consumed by internal runtime data structures.</span></span>
|    `eestack`                          | <span data-ttu-id="7e086-484">对进程中的所有线程运行 `dumpstack` 命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-484">Runs `dumpstack` on all threads in the process.</span></span>
|    `gcroot`                           | <span data-ttu-id="7e086-485">显示有关对指定地址处的对象的引用（或根）的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-485">Displays info about references (or roots) to the object at the specified address.</span></span>
|    `histclear`                        | <span data-ttu-id="7e086-486">释放由 Hist 命令系列使用的任何资源。</span><span class="sxs-lookup"><span data-stu-id="7e086-486">Releases any resources used by the family of Hist commands.</span></span>
|    `histinit`                         | <span data-ttu-id="7e086-487">从保存在调试对象中的压力日志初始化 SOS 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-487">Initializes the SOS structures from the stress log saved in the debuggee.</span></span>
|    `histobj`                          | <span data-ttu-id="7e086-488">检查所有压力日志的重定位记录，并显示可能已将地址作为自变量传入的垃圾回收重定位链。</span><span class="sxs-lookup"><span data-stu-id="7e086-488">Examines all stress log relocation records and displays the chain of garbage collection relocations that may have led to the address passed in as an argument.</span></span>
|    `histobjfind`                      | <span data-ttu-id="7e086-489">显示在指定地址处引用对象的所有日志项。</span><span class="sxs-lookup"><span data-stu-id="7e086-489">Displays all the log entries that reference the object at the specified address.</span></span>
|    `histroot`                         | <span data-ttu-id="7e086-490">显示与指定根的提升和重定位相关的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-490">Displays information related to both promotions and relocations of the specified root.</span></span>
|    `ip2md`                            | <span data-ttu-id="7e086-491">显示已 JIT 编译的代码中指定地址处的 `MethodDesc` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-491">Displays the `MethodDesc` structure at the specified address in code that has been JIT-compiled.</span></span>
|    `loadsymbols`                      | <span data-ttu-id="7e086-492">加载 .NET Core 原生模块符号。</span><span class="sxs-lookup"><span data-stu-id="7e086-492">Load the .NET Core native module symbols.</span></span>
|    `name2ee`                          | <span data-ttu-id="7e086-493">显示指定模块中的指定类型或方法的 `MethodTable` 和 `EEClass` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-493">Displays the `MethodTable` and `EEClass` structures for the specified type or method in the specified module.</span></span>
|    `pe`                               | <span data-ttu-id="7e086-494">显示从指定地址处的 <xref:System.Exception> 类派生的任何对象的字段并设置这些字段的格式。</span><span class="sxs-lookup"><span data-stu-id="7e086-494">Displays and formats fields of any object derived from the <xref:System.Exception> class at the specified address.</span></span>
|    `setclrpath`                       | <span data-ttu-id="7e086-495">设置用于加载 coreclr dac/dbi 文件的路径。</span><span class="sxs-lookup"><span data-stu-id="7e086-495">Sets the path to load coreclr dac/dbi files.</span></span> `setclrpath <path>`
|    `sethostruntime`                   | <span data-ttu-id="7e086-496">设置或显示用于在 SOS 中运行托管代码的 .NET Core 运行时目录。</span><span class="sxs-lookup"><span data-stu-id="7e086-496">Sets or displays the .NET Core runtime directory to use to run managed code in SOS.</span></span>
|    `setsymbolserver`                  | <span data-ttu-id="7e086-497">启用符号服务器支持。</span><span class="sxs-lookup"><span data-stu-id="7e086-497">Enables the symbol server support.</span></span>
|    `setsostid`                        | <span data-ttu-id="7e086-498">设置当前 OS tid/thread 索引，而不是使用 lldb 提供的索引。</span><span class="sxs-lookup"><span data-stu-id="7e086-498">Sets the current OS tid/thread index instead of using the one lldb provides.</span></span> `setsostid <tid> <index>`
|    `sos`                              | <span data-ttu-id="7e086-499">各种 coreclr 调试命令。</span><span class="sxs-lookup"><span data-stu-id="7e086-499">Various coreclr debugging commands.</span></span> <span data-ttu-id="7e086-500">有关详细信息，请参阅“soshelp”。</span><span class="sxs-lookup"><span data-stu-id="7e086-500">For more information, see 'soshelp'.</span></span> `sos <command-name> <args>`
|    `soshelp`                          | <span data-ttu-id="7e086-501">在未指定参数时显示所有可用命令，或者显示有关指定命令的详细帮助信息：`soshelp <command>`</span><span class="sxs-lookup"><span data-stu-id="7e086-501">Displays all available commands when no parameter is specified, or displays detailed help information about the specified command: `soshelp <command>`</span></span>
|    `syncblk`                          | <span data-ttu-id="7e086-502">显示 SyncBlock 持有者信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-502">Displays the SyncBlock holder info.</span></span>

## <a name="windbgcdb-example-usage"></a><span data-ttu-id="7e086-503">Windbg/cdb 示例用法</span><span class="sxs-lookup"><span data-stu-id="7e086-503">Windbg/cdb example usage</span></span>

| <span data-ttu-id="7e086-504">Command</span><span class="sxs-lookup"><span data-stu-id="7e086-504">Command</span></span>  | <span data-ttu-id="7e086-505">说明</span><span class="sxs-lookup"><span data-stu-id="7e086-505">Description</span></span>
| - | -
| `!dumparray -start 2 -length 5 -detail 00ad28d0` | <span data-ttu-id="7e086-506">显示地址 `00ad28d0` 处的数组内容。</span><span class="sxs-lookup"><span data-stu-id="7e086-506">Displays the contents of an array at the address `00ad28d0`.</span></span>  <span data-ttu-id="7e086-507">显示从第二个元素开始，连续显示五个元素。</span><span class="sxs-lookup"><span data-stu-id="7e086-507">The display starts from the second element and continues for five elements.</span></span>
| `!dumpassembly 1ca248` | <span data-ttu-id="7e086-508">显示地址 `1ca248` 处的程序集内容。</span><span class="sxs-lookup"><span data-stu-id="7e086-508">Displays the contents of an assembly at the address `1ca248`.</span></span>
| `!dumpheap` | <span data-ttu-id="7e086-509">显示有关垃圾回收器堆的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-509">Displays information about the garbage collector heap.</span></span>
| `!DumpLog` | <span data-ttu-id="7e086-510">将内存中压力日志的内容写入到当前目录中名为 StressLog.txt 的（默认）文件中。</span><span class="sxs-lookup"><span data-stu-id="7e086-510">Writes the contents of the in-memory stress log to a (default) file called StressLog.txt in the current directory.</span></span>
 `!dumpmd 902f40` | <span data-ttu-id="7e086-511">显示在地址 `MethodDesc` 处的 `902f40` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-511">Displays the `MethodDesc` structure at the address `902f40`.</span></span>
| `!dumpmodule 1caa50` | <span data-ttu-id="7e086-512">显示有关地址 `1caa50` 处的模块的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-512">Displays information about a module at the address `1caa50`.</span></span>
| `!DumpObj a79d40` | <span data-ttu-id="7e086-513">显示有关地址 `a79d40` 处的对象的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-513">Displays information about an object at the address `a79d40`.</span></span>
| `!DumpVC 0090320c 00a79d9c` | <span data-ttu-id="7e086-514">使用地址 `00a79d9c` 处的方法表显示地址 `0090320c` 处的值类的字段。</span><span class="sxs-lookup"><span data-stu-id="7e086-514">Displays the fields of a value class at the address `00a79d9c` using the method table at the address `0090320c`.</span></span>
| <span data-ttu-id="7e086-515">`!eeheap` -gc</span><span class="sxs-lookup"><span data-stu-id="7e086-515">`!eeheap` -gc</span></span> | <span data-ttu-id="7e086-516">显示垃圾回收器所使用的进程内存。</span><span class="sxs-lookup"><span data-stu-id="7e086-516">Displays the process memory used by the garbage collector.</span></span>
| `!finalizequeue` | <span data-ttu-id="7e086-517">显示所有已做好终结计划的对象。</span><span class="sxs-lookup"><span data-stu-id="7e086-517">Displays all objects scheduled for finalization.</span></span>
| `!findappdomain 00a79d98` |  <span data-ttu-id="7e086-518">确定地址 `00a79d98` 处的对象的应用程序域。</span><span class="sxs-lookup"><span data-stu-id="7e086-518">Determines the application domain of an object at the address `00a79d98`.</span></span>
| `!gcinfo 5b68dbb8` | <span data-ttu-id="7e086-519">显示当前进程中的所有垃圾回收器句柄。</span><span class="sxs-lookup"><span data-stu-id="7e086-519">Displays all garbage collector handles in the current process.</span></span>
| `!name2ee unittest.exe MainClass.Main` | <span data-ttu-id="7e086-520">显示模块 `unittest.exe` 的类 `MainClass` 中的 `Main` 方法的 `MethodTable` 和 `EEClass` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-520">Displays the `MethodTable` and `EEClass` structures for the `Main` method in the class `MainClass` in the module `unittest.exe`.</span></span>
| `!token2ee unittest.exe 02000003` | <span data-ttu-id="7e086-521">显示有关模块 `unittest.exe` 中的地址 `02000003` 处的元数据标记的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-521">Displays information about the metadata token at the address `02000003` in the module `unittest.exe`.</span></span>

## <a name="lldb-example-usage"></a><span data-ttu-id="7e086-522">LLDB 示例用法</span><span class="sxs-lookup"><span data-stu-id="7e086-522">LLDB example usage</span></span>

| <span data-ttu-id="7e086-523">Command</span><span class="sxs-lookup"><span data-stu-id="7e086-523">Command</span></span>  | <span data-ttu-id="7e086-524">说明</span><span class="sxs-lookup"><span data-stu-id="7e086-524">Description</span></span>
| - | -
| `sos DumpArray -start 2 -length 5 -detail 00ad28d0` | <span data-ttu-id="7e086-525">显示地址 `00ad28d0` 处的数组内容。</span><span class="sxs-lookup"><span data-stu-id="7e086-525">Displays the contents of an array at the address `00ad28d0`.</span></span>  <span data-ttu-id="7e086-526">显示从第二个元素开始，连续显示五个元素。</span><span class="sxs-lookup"><span data-stu-id="7e086-526">The display starts from the second element and continues for five elements.</span></span>
| `sos DumpAssembly 1ca248` | <span data-ttu-id="7e086-527">显示地址 `1ca248` 处的程序集内容。</span><span class="sxs-lookup"><span data-stu-id="7e086-527">Displays the contents of an assembly at the address `1ca248`.</span></span>
| `dumpheap` | <span data-ttu-id="7e086-528">显示有关垃圾回收器堆的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-528">Displays information about the garbage collector heap.</span></span>
| `dumplog` | <span data-ttu-id="7e086-529">将内存中压力日志的内容写入到当前目录中名为 StressLog.txt 的（默认）文件中。</span><span class="sxs-lookup"><span data-stu-id="7e086-529">Writes the contents of the in-memory stress log to a (default) file called StressLog.txt in the current directory.</span></span>
| `dumpmd 902f40` | <span data-ttu-id="7e086-530">显示在地址 `MethodDesc` 处的 `902f40` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-530">Displays the `MethodDesc` structure at the address `902f40`.</span></span>
| `dumpmodule 1caa50` | <span data-ttu-id="7e086-531">显示有关地址 `1caa50` 处的模块的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-531">Displays information about a module at the address `1caa50`.</span></span>
| `dumpobj a79d40` | <span data-ttu-id="7e086-532">显示有关地址 `a79d40` 处的对象的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-532">Displays information about an object at the address `a79d40`.</span></span>
| `sos DumpVC 0090320c 00a79d9c` | <span data-ttu-id="7e086-533">使用地址 `00a79d9c` 处的方法表显示地址 `0090320c` 处的值类的字段。</span><span class="sxs-lookup"><span data-stu-id="7e086-533">Displays the fields of a value class at the address `00a79d9c` using the method table at the address `0090320c`.</span></span>
| `eeheap -gc` | <span data-ttu-id="7e086-534">显示垃圾回收器所使用的进程内存。</span><span class="sxs-lookup"><span data-stu-id="7e086-534">Displays the process memory used by the garbage collector.</span></span>
| `sos FindAppDomain 00a79d98` | <span data-ttu-id="7e086-535">确定地址 `00a79d98` 处的对象的应用程序域。</span><span class="sxs-lookup"><span data-stu-id="7e086-535">Determines the application domain of an object at the address `00a79d98`.</span></span>
| `sos GCInfo 5b68dbb8` | <span data-ttu-id="7e086-536">显示当前进程中的所有垃圾回收器句柄。</span><span class="sxs-lookup"><span data-stu-id="7e086-536">Displays all garbage collector handles in the current process.</span></span>
| `name2ee unittest.exe MainClass.Main` | <span data-ttu-id="7e086-537">显示模块 `unittest.exe` 的类 `MainClass` 中的 `Main` 方法的 `MethodTable` 和 `EEClass` 结构。</span><span class="sxs-lookup"><span data-stu-id="7e086-537">Displays the `MethodTable` and `EEClass` structures for the `Main` method in the class `MainClass` in the module `unittest.exe`.</span></span>
| `sos Token2EE unittest.exe 02000003` | <span data-ttu-id="7e086-538">显示有关模块 `unittest.exe` 中的地址 `02000003` 处的元数据标记的信息。</span><span class="sxs-lookup"><span data-stu-id="7e086-538">Displays information about the metadata token at the address `02000003` in the module `unittest.exe`.</span></span>
| `clrthreads` | <span data-ttu-id="7e086-539">显示托管线程。</span><span class="sxs-lookup"><span data-stu-id="7e086-539">Displays the managed threads.</span></span>

## <a name="see-also"></a><span data-ttu-id="7e086-540">另请参阅</span><span class="sxs-lookup"><span data-stu-id="7e086-540">See also</span></span>

- [<span data-ttu-id="7e086-541">.NET 中的转储简介</span><span class="sxs-lookup"><span data-stu-id="7e086-541">An introduction to dumps in .NET</span></span>](dumps.md)
- [<span data-ttu-id="7e086-542">了解如何调试 .NET Core 中的内存泄漏</span><span class="sxs-lookup"><span data-stu-id="7e086-542">Learn how to debug a memory leak in .NET Core</span></span>](debug-memory-leak.md)
- [<span data-ttu-id="7e086-543">收集和分析内存转储博客</span><span class="sxs-lookup"><span data-stu-id="7e086-543">Collecting and analyzing memory dumps blog</span></span>](https://devblogs.microsoft.com/dotnet/collecting-and-analyzing-memory-dumps/)
- [<span data-ttu-id="7e086-544">转储分析工具 (dotnet-dump)</span><span class="sxs-lookup"><span data-stu-id="7e086-544">Dump analysis tool (dotnet-dump)</span></span>](dotnet-dump.md)
- [<span data-ttu-id="7e086-545">SOS 安装工具 (dotnet-sos)</span><span class="sxs-lookup"><span data-stu-id="7e086-545">SOS Installation Tool (dotnet-sos)</span></span>](dotnet-sos.md)
- [<span data-ttu-id="7e086-546">堆分析工具 (dotnet-gcdump)</span><span class="sxs-lookup"><span data-stu-id="7e086-546">Heap analysis tool (dotnet-gcdump)</span></span>](dotnet-gcdump.md)
