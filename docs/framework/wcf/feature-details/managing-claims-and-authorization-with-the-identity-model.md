---
title: 使用标识模型管理声明和授权
description: 了解 WCF 标识模型的主要编程概念，它是一种用于执行授权的基于声明的模型。
ms.date: 03/30/2017
helpviewer_keywords:
- authorization [WCF]
- WCF security
- claims [WCF], managing with the Identity Model
- claims [WCF]
- authorization [WCF], managing with the Identity Model
ms.assetid: 099defbb-5d35-434e-9336-1a49b9ec7663
ms.openlocfilehash: c1e17d5a8d9374acdc420a6af65c797f09db352e
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/26/2020
ms.locfileid: "96234851"
---
# <a name="managing-claims-and-authorization-with-the-identity-model"></a><span data-ttu-id="b0b1b-103">使用标识模型管理声明和授权</span><span class="sxs-lookup"><span data-stu-id="b0b1b-103">Managing Claims and Authorization with the Identity Model</span></span>

<span data-ttu-id="b0b1b-104">授权是确定哪些实体具有更改、查看或其他访问计算机资源权限的过程。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-104">Authorization is the process of determining which entities have permission to change, view, or otherwise access a computer resource.</span></span> <span data-ttu-id="b0b1b-105">例如，在一个企业中，可能只有经理们才可以访问其员工的文件。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-105">For example, in a business, only managers may be allowed to access the files of their employees.</span></span> <span data-ttu-id="b0b1b-106">Windows Communication Foundation (WCF) 支持两种执行授权处理的机制。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-106">Windows Communication Foundation (WCF) supports two mechanisms for performing authorization processing.</span></span> <span data-ttu-id="b0b1b-107">第一种机制使您能够使用现有的公共语言运行库 (CLR) 构造来控制授权。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-107">The first mechanism enables you to control authorization using existing common language runtime (CLR) constructs.</span></span> <span data-ttu-id="b0b1b-108">第二个是称为 " *标识模型*" 的基于声明的模型。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-108">The second is a claims-based model known as the *Identity Model*.</span></span> <span data-ttu-id="b0b1b-109">WCF 使用标识模型创建来自传入消息的声明;可以扩展标识模型类以支持自定义授权方案的新声明类型。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-109">WCF uses the Identity Model to create claims from incoming messages; Identity Model classes can be extended to support new claim types for custom authorization schemes.</span></span> <span data-ttu-id="b0b1b-110">本主题概述标识模型功能的主要编程概念，并提供此功能使用的最重要的类的列表。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-110">This topic presents an overview of the major programming concepts of the Identity Model feature, as well as a listing of the most important classes the feature uses.</span></span>  
  
## <a name="identity-model-scenarios"></a><span data-ttu-id="b0b1b-111">标识模型方案</span><span class="sxs-lookup"><span data-stu-id="b0b1b-111">Identity Model Scenarios</span></span>  

 <span data-ttu-id="b0b1b-112">以下方案演示标识模型的使用方式。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-112">The following scenarios represent Identity Model use.</span></span>  
  
### <a name="scenario-1-supporting-identity-role-and-group-claims"></a><span data-ttu-id="b0b1b-113">方案 1：支持标识、角色和组声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-113">Scenario 1: Supporting Identity, Role, and Group Claims</span></span>  

 <span data-ttu-id="b0b1b-114">用户向 Web 服务发送消息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-114">Users send messages to a Web service.</span></span> <span data-ttu-id="b0b1b-115">Web 服务的访问控制要求使用标识、角色或组。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-115">The access control requirements of the Web service use identity, roles, or groups.</span></span> <span data-ttu-id="b0b1b-116">消息发送方映射到一个角色或组的集中。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-116">The message sender is mapped to a set of roles or groups.</span></span> <span data-ttu-id="b0b1b-117">角色或组信息用于执行访问检查。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-117">Role or group information is used to perform access checks.</span></span>  
  
### <a name="scenario-2-supporting-rich-claims"></a><span data-ttu-id="b0b1b-118">方案 2：支持多信息声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-118">Scenario 2: Supporting Rich Claims</span></span>  

 <span data-ttu-id="b0b1b-119">用户向 Web 服务发送消息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-119">Users send messages to a Web service.</span></span> <span data-ttu-id="b0b1b-120">Web 服务的访问控制要求需要比标识、角色或组更丰富的模型。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-120">The access control requirements of the Web service require a richer model than identity, roles, or groups.</span></span> <span data-ttu-id="b0b1b-121">Web 服务确定给定的用户是否有权使用基于多信息声明的模型访问特定的受保护资源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-121">The Web service determines whether a given user has access to a particular protected resource using the rich claims-based model.</span></span> <span data-ttu-id="b0b1b-122">例如，某个用户也许能读取特定信息（如薪金信息），而其他用户无此权限。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-122">For example, one user may be able to read particular information, such as salary information, that other users do not have access to.</span></span>  
  
### <a name="scenario-3-mapping-disparate-claims"></a><span data-ttu-id="b0b1b-123">方案 3：映射完全不同的声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-123">Scenario 3: Mapping Disparate Claims</span></span>  

 <span data-ttu-id="b0b1b-124">某个用户向 Web 服务发送一条消息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-124">A user sends a message to a Web service.</span></span> <span data-ttu-id="b0b1b-125">此用户可能以多种不同方式指定其凭据：X.509 证书、用户名令牌或 Kerberos 令牌。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-125">The user may specify their credentials in a number of different ways: X.509 certificate, user name token, or Kerberos token.</span></span> <span data-ttu-id="b0b1b-126">无论用户采用何种凭据类型，Web 服务都需要以相同的方式执行访问控制检查。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-126">The Web service is required to perform access control checks in the same way, regardless of the user credential type.</span></span> <span data-ttu-id="b0b1b-127">如果随着时间的推移可以支持其他凭据类型，则系统应获得相应的能力。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-127">If additional credential types are supported over time, the system should evolve accordingly.</span></span>  
  
### <a name="scenario-4-determining-access-to-multiple-resources"></a><span data-ttu-id="b0b1b-128">方案 4：确定访问多个资源的权限</span><span class="sxs-lookup"><span data-stu-id="b0b1b-128">Scenario 4: Determining Access to Multiple Resources</span></span>  

 <span data-ttu-id="b0b1b-129">Web 服务试图访问多个资源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-129">A Web service attempts to access multiple resources.</span></span> <span data-ttu-id="b0b1b-130">它通过比较与给定用户关联的声明和访问资源所需的声明，确定该用户有权访问哪些受保护资源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-130">The service determines which protected resources a given user has access to by comparing the claims associated with the user with the claims required to access the resource.</span></span>  
  
## <a name="identity-model-terms"></a><span data-ttu-id="b0b1b-131">标识模型术语</span><span class="sxs-lookup"><span data-stu-id="b0b1b-131">Identity Model Terms</span></span>  

 <span data-ttu-id="b0b1b-132">下面的列表定义用于描述标识模型概念的关键术语。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-132">The following list defines key terms used to describe Identity Model concepts.</span></span>  
  
 <span data-ttu-id="b0b1b-133">授权策略</span><span class="sxs-lookup"><span data-stu-id="b0b1b-133">Authorization policy</span></span>  
 <span data-ttu-id="b0b1b-134">用于将一组输入声明映射到一组输出声明中的一组规则。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-134">A set of rules for mapping a set of input claims to a set of output claims.</span></span> <span data-ttu-id="b0b1b-135">对授权策略进行评估会将声明集添加到评估上下文，并随后添加到授权上下文。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-135">Evaluating authorization policy results in claim sets being added to an evaluation context and subsequently an authorization context.</span></span>  
  
 <span data-ttu-id="b0b1b-136">授权上下文</span><span class="sxs-lookup"><span data-stu-id="b0b1b-136">Authorization context</span></span>  
 <span data-ttu-id="b0b1b-137">一组声明集和零个或多个属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-137">A set of claim sets and zero or more properties.</span></span> <span data-ttu-id="b0b1b-138">评估一个或多个授权策略时所得到的结果。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-138">The result of evaluating one or more authorization policies.</span></span>  
  
 <span data-ttu-id="b0b1b-139">声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-139">Claim</span></span>  
 <span data-ttu-id="b0b1b-140">声明类型、权限和值的组合。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-140">A combination of a claim type, right, and a value.</span></span>  
  
 <span data-ttu-id="b0b1b-141">声明集</span><span class="sxs-lookup"><span data-stu-id="b0b1b-141">Claim set</span></span>  
 <span data-ttu-id="b0b1b-142">特定颁发者颁发的一组声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-142">A set of claims issued by a particular issuer.</span></span>  
  
 <span data-ttu-id="b0b1b-143">声明类型</span><span class="sxs-lookup"><span data-stu-id="b0b1b-143">Claim type</span></span>  
 <span data-ttu-id="b0b1b-144">一种声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-144">A kind of claim.</span></span> <span data-ttu-id="b0b1b-145">标识模型 API 定义的声明是 <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> 类的属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-145">Claims defined by the Identity Model API are properties of the <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> class.</span></span> <span data-ttu-id="b0b1b-146">系统提供的声明类型的示例有 <xref:System.IdentityModel.Claims.ClaimTypes.Dns%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Email%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Hash%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Sid%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Spn%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.System%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Uri%2A> 和 <xref:System.IdentityModel.Claims.ClaimTypes.X500DistinguishedName%2A>。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-146">Examples of system-provided claim types are <xref:System.IdentityModel.Claims.ClaimTypes.Dns%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Email%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Hash%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Sid%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Spn%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.System%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Uri%2A>, and <xref:System.IdentityModel.Claims.ClaimTypes.X500DistinguishedName%2A>.</span></span>  
  
 <span data-ttu-id="b0b1b-147">评估上下文</span><span class="sxs-lookup"><span data-stu-id="b0b1b-147">Evaluation context</span></span>  
 <span data-ttu-id="b0b1b-148">在其中评估授权策略的上下文。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-148">A context in which an authorization policy is evaluated.</span></span> <span data-ttu-id="b0b1b-149">包含属性和声明集。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-149">Contains properties and claim sets.</span></span> <span data-ttu-id="b0b1b-150">一旦评估完成即成为授权上下文的基础。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-150">Becomes the basis of an authorization context once evaluation is complete.</span></span>  
  
 <span data-ttu-id="b0b1b-151">标识声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-151">Identity claim</span></span>  
 <span data-ttu-id="b0b1b-152">其权限为标识的声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-152">A claim whose right is identity.</span></span>  
  
 <span data-ttu-id="b0b1b-153">颁发者</span><span class="sxs-lookup"><span data-stu-id="b0b1b-153">Issuer</span></span>  
 <span data-ttu-id="b0b1b-154">一个声明集，它至少包含一个标识声明，并且被认为已颁发另一个声明集。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-154">A claim set that contains at least one identity claim and is considered to have issued another claim set.</span></span>  
  
 <span data-ttu-id="b0b1b-155">属性</span><span class="sxs-lookup"><span data-stu-id="b0b1b-155">Properties</span></span>  
 <span data-ttu-id="b0b1b-156">与评估上下文或授权上下文关联的一组信息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-156">A set of information associated with an evaluation context or authorization context.</span></span>  
  
 <span data-ttu-id="b0b1b-157">受保护的资源</span><span class="sxs-lookup"><span data-stu-id="b0b1b-157">Protected resource</span></span>  
 <span data-ttu-id="b0b1b-158">系统中仅在首先满足某些要求的情况下才可以使用、访问或操作的资源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-158">Something in the system that can only be used, accessed, or otherwise manipulated if certain requirements are first met.</span></span>  
  
 <span data-ttu-id="b0b1b-159">Right</span><span class="sxs-lookup"><span data-stu-id="b0b1b-159">Right</span></span>  
 <span data-ttu-id="b0b1b-160">对于某个资源拥有的能力。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-160">A capability over a resource.</span></span> <span data-ttu-id="b0b1b-161">标识模型 API 定义的权限是 <xref:System.IdentityModel.Claims.Rights> 类的属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-161">Rights defined by the Identity Model API are properties of the <xref:System.IdentityModel.Claims.Rights> class.</span></span> <span data-ttu-id="b0b1b-162">系统提供的权限的示例有 <xref:System.IdentityModel.Claims.Rights.Identity%2A> 和 <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-162">Examples of system-provided rights are <xref:System.IdentityModel.Claims.Rights.Identity%2A> and <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>.</span></span>  
  
 <span data-ttu-id="b0b1b-163">值</span><span class="sxs-lookup"><span data-stu-id="b0b1b-163">Value</span></span>  
 <span data-ttu-id="b0b1b-164">用以声明权限的信息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-164">Something over which a right is claimed.</span></span>  
  
## <a name="claims"></a><span data-ttu-id="b0b1b-165">声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-165">Claims</span></span>  

 <span data-ttu-id="b0b1b-166">标识模型是基于声明的系统。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-166">The Identity Model is a claims-based system.</span></span> <span data-ttu-id="b0b1b-167">声明描述与系统中某个实体关联的功能，该实体通常为该系统中的某个用户。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-167">Claims describe the capabilities associated with some entity in the system, often a user of that system.</span></span> <span data-ttu-id="b0b1b-168">与给定实体关联的声明集可视为密钥。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-168">The set of claims associated with a given entity can be thought of as a key.</span></span> <span data-ttu-id="b0b1b-169">特定的声明定义该密钥的形状，类似于现实中用于打开门锁的钥匙。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-169">The particular claims define the shape of that key, similar to a physical key used to open a lock in a door.</span></span> <span data-ttu-id="b0b1b-170">声明用于获取访问资源的权限。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-170">Claims are used to gain access to resources.</span></span> <span data-ttu-id="b0b1b-171">通过比较访问该资源所需的声明和与试图进行访问的实体关联的声明，确定对给定的受保护资源的权限。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-171">Access to a given protected resource is determined by comparing the claims needed to access that resource with the claims associated with the entity attempting access.</span></span>  
  
 <span data-ttu-id="b0b1b-172">声明是针对特定值的权限表达式。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-172">A claim is the expression of a right with respect to a particular value.</span></span> <span data-ttu-id="b0b1b-173">权限可能类似于“Read”（读取）、“Write”（写入）或“Execute”（执行）。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-173">A right could be something like "Read", "Write", or "Execute."</span></span> <span data-ttu-id="b0b1b-174">值可以是数据库、文件、邮箱或属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-174">A value could be a database, a file, a mailbox, or a property.</span></span> <span data-ttu-id="b0b1b-175">声明还具有声明类型。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-175">Claims also have a claim type.</span></span> <span data-ttu-id="b0b1b-176">声明类型和权限的组合提供用于指定针对该值的功能的机制。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-176">The combination of claim type and right provides the mechanism for specifying capabilities with respect to the value.</span></span> <span data-ttu-id="b0b1b-177">例如，声明类型为 "File"，对值 "Biography.doc" 具有 "Read" 权限，指示与此声明关联的实体具有对文件 Biography.doc 的读取访问权限。类型为 "Name"、"PossessProperty"、值为 "圣马丁" 的声明，指示与此声明关联的实体拥有值为 "圣马丁" 的 Name 属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-177">For example, a claim of type "File", with right "Read" over the value "Biography.doc", indicates that the entity with which such a claim is associated has read access to the file Biography.doc. A claim of type "Name", with right "PossessProperty" over the value "Martin", indicates that the entity with which such a claim is associated possesses a Name property with the value "Martin".</span></span>  
  
 <span data-ttu-id="b0b1b-178">尽管有各种声明类型和权限被定义为标识模型的一部分，但系统仍可以扩展，允许构建于标识模型基础结构之上的各种系统根据需要定义其他声明类型和权限。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-178">Although various claim types and rights are defined as part of the Identity Model, the system is extensible, allowing the various systems, building on top of the Identity Model infrastructure, to define additional claim types and rights as required.</span></span>  
  
### <a name="identity-claims"></a><span data-ttu-id="b0b1b-179">标识声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-179">Identity Claims</span></span>  

 <span data-ttu-id="b0b1b-180">一种特定权限是标识权限。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-180">One particular right is that of identity.</span></span> <span data-ttu-id="b0b1b-181">拥有此权限的声明对实体的标识进行声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-181">Claims that possess this right make a statement about the identity of the entity.</span></span> <span data-ttu-id="b0b1b-182">例如，类型为 "用户主体名称" 的声明 (UPN) ，其值为 " someone@example.com "，而 "标识" 权限表示特定域中的特定标识。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-182">For example, a claim of type "user principal name" (UPN) with a value of "someone@example.com" and a right of Identity indicates a particular identity in a particular domain.</span></span>  
  
#### <a name="system-identity-claim"></a><span data-ttu-id="b0b1b-183">System 标识声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-183">System Identity Claim</span></span>  

 <span data-ttu-id="b0b1b-184">标识模型定义一个标识声明：System.</span><span class="sxs-lookup"><span data-stu-id="b0b1b-184">The Identity Model defines one identity claim: System.</span></span> <span data-ttu-id="b0b1b-185">System 标识声明指示实体为当前应用程序或系统。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-185">The System identity claim indicates that an entity is the current application or system.</span></span>  
  
### <a name="sets-of-claims"></a><span data-ttu-id="b0b1b-186">声明集</span><span class="sxs-lookup"><span data-stu-id="b0b1b-186">Sets of Claims</span></span>  

 <span data-ttu-id="b0b1b-187">代表标识的声明的模型很重要，因为总是由系统中的某个实体颁发声明，即使该实体最终是某种“自我”的概念。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-187">The model of claims that represent identity is important because claims are always issued by some entity in the system, even if that entity is ultimately some concept of "self".</span></span> <span data-ttu-id="b0b1b-188">声明以集的形式组合在一起，每个集具有一个颁发者。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-188">Claims are grouped together as a set and each set has an issuer.</span></span> <span data-ttu-id="b0b1b-189">颁发者只是一个声明集。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-189">An issuer is just a set of claims.</span></span> <span data-ttu-id="b0b1b-190">这样一种递归关系最终必须结束，任何声明集都可以是其自己的颁发者。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-190">Such a recursive relationship must eventually end and any claim set can be its own issuer.</span></span>  
  
 <span data-ttu-id="b0b1b-191">下图显示了一个包含三个声明集的示例，其中一个声明集以另一个声明集为其颁发者，而那个声明集又以 System 声明集为其颁发者。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-191">The following figure shows an example of three sets of claims where one set of claims has, as its issuer, another set of claims, which in turn has the System claim set as its issuer.</span></span> <span data-ttu-id="b0b1b-192">因此，声明集形成一个任意深度的层次结构。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-192">Therefore, sets of claims form a hierarchy that may be arbitrarily deep.</span></span>  
  
 ![层次结构中的声明集。](./media/managing-claims-and-authorization-with-the-identity-model/claims-sets-hierarchy.gif)  
  
 <span data-ttu-id="b0b1b-194">多组声明可能具有相同的颁发声明集，如下图所示：</span><span class="sxs-lookup"><span data-stu-id="b0b1b-194">Multiple sets of claims may have the same issuing claim set, as illustrated in the following figure:</span></span>
  
 ![具有相同的颁发声明集的多个声明集。](./media/managing-claims-and-authorization-with-the-identity-model/multiple-claim-sets-same-issuing-claim-set.gif)  
  
 <span data-ttu-id="b0b1b-196">除了是自已的颁发者的声明集之外，标识模型绝不支持声明集形成循环。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-196">With the exception of a claim set that is its own issuer, the Identity Model does not provide any support for claim sets to form a loop.</span></span> <span data-ttu-id="b0b1b-197">这样永远不会出现声明集 A 由声明集 B 颁发，而声明集 B 本身又由声明集 A 颁发的情况。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-197">Thus a situation where claim set A is issued by claim set B, which is itself issued by claim set A, can never arise.</span></span> <span data-ttu-id="b0b1b-198">而且，标识模型也绝不支持声明集具有多个颁发者。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-198">Also, the Identity Model does not provide any support for claim sets to have multiple issuers.</span></span> <span data-ttu-id="b0b1b-199">如果两个或多个颁发者都必须颁发某个给定的声明集，那么必须使用多个声明集，使每个声明集包含相同的声明，但具有不同的颁发者。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-199">If two or more issuers must issue a given set of claims, then you must use multiple claim sets, each containing the same claims, but having different issuers.</span></span>  
  
### <a name="the-origin-of-claims"></a><span data-ttu-id="b0b1b-200">声明的起源</span><span class="sxs-lookup"><span data-stu-id="b0b1b-200">The Origin of Claims</span></span>  

 <span data-ttu-id="b0b1b-201">声明可以来自各种源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-201">Claims can come from a variety of sources.</span></span> <span data-ttu-id="b0b1b-202">一个常见声明来源是用户提供的凭据，例如作为发送到 Web 服务的消息的一部分提供的凭据。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-202">One common source of claims is credentials presented by a user, for example as part of a message sent to a Web service.</span></span> <span data-ttu-id="b0b1b-203">系统会验证这样的声明，而这些声明会成为与用户关联的声明集的组成部分。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-203">The system validates such claims, and they become part of a set of claims associated with the user.</span></span> <span data-ttu-id="b0b1b-204">其他系统组件也可能是声明的来源，包括但不限于操作系统、网络堆栈、运行时环境或应用程序。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-204">Other system components may also be sources of claims, including, but not limited to, the operating system, the network stack, the run-time environment, or the application.</span></span> <span data-ttu-id="b0b1b-205">此外，远程服务也可能是声明的来源。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-205">In addition, remote services may also be a source of claims.</span></span>  
  
### <a name="authorization-policies"></a><span data-ttu-id="b0b1b-206">授权策略</span><span class="sxs-lookup"><span data-stu-id="b0b1b-206">Authorization Policies</span></span>  

 <span data-ttu-id="b0b1b-207">在标识模型中，声明是在对授权策略进行评估的过程中生成的。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-207">In the Identity Model, claims are generated as part of the process of evaluating the authorization policy.</span></span> <span data-ttu-id="b0b1b-208">授权策略会检查（可能为空的）现有声明集，并且可能选择根据已有的声明和所掌握的其他信息添加其他声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-208">An authorization policy examines the (possibly empty) set of existing claims and may choose to add additional claims based on the claims already present and additional information at its disposal.</span></span> <span data-ttu-id="b0b1b-209">这提供了在声明之间进行映射的基础。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-209">This provides the basis of mapping between claims.</span></span> <span data-ttu-id="b0b1b-210">系统中是否存在声明将对授权策略是否添加其他声明产生影响。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-210">The presence or absence of claims in the system influences the behavior of an authorization policy with respect to whether it adds additional claims.</span></span>  
  
 <span data-ttu-id="b0b1b-211">例如，授权策略具有访问一个数据库的权限，该数据库中包括使用此系统的各个实体的生日。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-211">For example, the authorization policy has access to a database that includes the birthdates of the various entities using the system.</span></span> <span data-ttu-id="b0b1b-212">授权策略使用此信息将一个“Over18”声明添加到上下文。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-212">The authorization policy uses that information to add an "Over18" claim to the context.</span></span> <span data-ttu-id="b0b1b-213">请注意，此 Over18 声明除了实体年龄大于 18 岁的事实之外，未泄漏有关实体的任何信息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-213">Note that this Over18 claim does not disclose any information about the entity other than the fact that it is over 18 years of age.</span></span> <span data-ttu-id="b0b1b-214">还请注意，要解释“Over18”声明，需要理解该声明的语义。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-214">Note that interpretation of the 'Over18' claim depends on understanding the semantics of that claim.</span></span> <span data-ttu-id="b0b1b-215">添加声明的授权策略在某种程度上理解这些语义。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-215">The authorization policy that added the claim understands those semantics at some level.</span></span> <span data-ttu-id="b0b1b-216">还会将这些语义通知随后对策略评估所产生的声明进行检查的代码。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-216">Code that subsequently examines the claims that result from policy evaluation also be informed of those semantics.</span></span>  
  
 <span data-ttu-id="b0b1b-217">一个给定的授权策略可能要求对它进行多次评估，因为当其他授权策略添加声明时，该授权策略还可能添加更多的声明。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-217">A given authorization policy may require that it be evaluated multiple times because, as other authorization policies add claims, that authorization policy might add yet more claims.</span></span> <span data-ttu-id="b0b1b-218">标识模型设计为不断进行评估，直到任何有效的授权策略都不再向上下文中添加声明为止。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-218">Identity Model is designed to continue evaluation until no more claims are added to the context by any of the authorization policies in force.</span></span> <span data-ttu-id="b0b1b-219">这种持续的授权策略评估可阻止针对授权策略实施任何特定评估顺序的需求；可以按任何顺序对它们进行评估。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-219">This continued evaluation of authorization policies prevents the requirement to enforce any specific evaluation order with respect to authorization policies; they can be evaluated in any order.</span></span> <span data-ttu-id="b0b1b-220">例如，如果在策略 A 已添加声明 B 的情况下策略 X 仅添加声明 Z，那么如果首先评估 X，则最初不会添加声明 Z。随后，会评估 A 并添加声明 B。然后再次评估 X，此时会添加声明 Z。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-220">For example, if policy X only adds Claim Z if policy A has added Claim B, then if X is evaluated first, it initially does not add the Claim Z. Subsequently, A is evaluated and adds Claim B. X is then evaluated a second time, and this time it adds Claim Z.</span></span>  
  
 <span data-ttu-id="b0b1b-221">给定的系统可能有许多有效的授权策略。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-221">A given system may have many authorization policies in force.</span></span>  
  
### <a name="a-key-making-machine"></a><span data-ttu-id="b0b1b-222">钥匙加工机</span><span class="sxs-lookup"><span data-stu-id="b0b1b-222">A Key-Making Machine</span></span>  

 <span data-ttu-id="b0b1b-223">评估一组关联的授权策略类似于使用加工钥匙的机器。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-223">Evaluating a group of associated authorization policies is like using a machine that makes keys.</span></span> <span data-ttu-id="b0b1b-224">会对授权策略逐一进行评估并生成声明集，打造出钥匙的形状。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-224">The authorization policies are each evaluated and sets of claims are generated, building up the shape of the key.</span></span> <span data-ttu-id="b0b1b-225">一旦钥匙的形状完成，就可以使用它尝试打开某些锁。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-225">Once the shape of the key is completed, it can be used to try to open some locks.</span></span> <span data-ttu-id="b0b1b-226">钥匙的形状存储在“授权上下文”中，授权上下文由授权管理器创建。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-226">The shape of the key is stored in an "authorization context," which is created by an authorization manager.</span></span>  
  
### <a name="authorization-context"></a><span data-ttu-id="b0b1b-227">授权上下文</span><span class="sxs-lookup"><span data-stu-id="b0b1b-227">Authorization Context</span></span>  

 <span data-ttu-id="b0b1b-228">授权管理器按说明来评估各个授权策略，结果是产生一个授权上下文（一组声明集和一些关联的属性）。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-228">An authorization manager evaluates the various authorization policies as described, and the result is an authorization context (a set of claim sets and some associated properties).</span></span> <span data-ttu-id="b0b1b-229">可以检查授权上下文以确定该上下文中存在的声明和这些不同的声明（例如，颁发声明集）之间的关系，最后将它们与其访问资源时必须满足的要求进行比较。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-229">The authorization context can be examined to determine what claims are present in that context, the relationships between those various claims (for example, the issuing claim set), and ultimately compare them against some requirements they must meet to access a resource.</span></span>  
  
### <a name="locks"></a><span data-ttu-id="b0b1b-230">锁</span><span class="sxs-lookup"><span data-stu-id="b0b1b-230">Locks</span></span>  

 <span data-ttu-id="b0b1b-231">如果授权上下文（一组声明）是一把钥匙，那么授予对特定的受保护资源的访问权限时所必须满足的需求便构成了该钥匙必须相适合的锁。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-231">If an authorization context (a set of claims) is a key, then the requirements that must be satisfied to grant access to a particular protected resource constitute the lock that the key must fit.</span></span> <span data-ttu-id="b0b1b-232">标识模型不会规定这些需求的表达形式，但鉴于系统在本质上是基于声明的，所以它们确实涉及了将授权上下文中的声明与某一必需的声明集进行比较。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-232">Identity Model does not formalize how such requirements are expressed but they do, given the claim-based nature of the system, involve comparing the claims in the authorization context against some set of required claims.</span></span>  
  
### <a name="a-recap"></a><span data-ttu-id="b0b1b-233">扼要重述</span><span class="sxs-lookup"><span data-stu-id="b0b1b-233">A Recap</span></span>  

 <span data-ttu-id="b0b1b-234">标识模型基于声明的概念。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-234">Identity Model is based around the concept of claims.</span></span> <span data-ttu-id="b0b1b-235">声明以集的形式进行组合并在授权上下文中聚合。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-235">Claims are grouped into sets and aggregated in an authorization context.</span></span> <span data-ttu-id="b0b1b-236">授权上下文包含一组声明，它是对一个或多个与授权管理器关联的授权策略进行评估所取得的结果。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-236">An authorization context contains a set of claims and is the result of evaluating one or more authorization policies associated with an authorization manager.</span></span> <span data-ttu-id="b0b1b-237">可以检查这些声明集以确定是否符合访问要求。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-237">These claim sets can be examined to determine if access requirements have been met.</span></span> <span data-ttu-id="b0b1b-238">下图显示了这些不同的标识模型概念之间的关系。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-238">The following figure shows the relationships between these various Identity Model concepts.</span></span>  
  
 <span data-ttu-id="b0b1b-239">![管理声明和授权](media/xsi-recap.gif "xsi_recap")</span><span class="sxs-lookup"><span data-stu-id="b0b1b-239">![Managing claims and authorization](media/xsi-recap.gif "xsi_recap")</span></span>  
  
## <a name="wcf-and-identity-model"></a><span data-ttu-id="b0b1b-240">WCF 和标识模型</span><span class="sxs-lookup"><span data-stu-id="b0b1b-240">WCF and Identity Model</span></span>  

 <span data-ttu-id="b0b1b-241">WCF 使用标识模型基础结构作为执行授权的基础。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-241">WCF uses the Identity Model infrastructure as the basis for performing authorization.</span></span> <span data-ttu-id="b0b1b-242">在 WCF 中， <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> 类允许你将 *授权* 策略指定为服务的一部分。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-242">In WCF, the <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> class allows you to specify *authorization* policies as part of a service.</span></span> <span data-ttu-id="b0b1b-243">此类授权策略称为 *外部授权策略*，并且可以根据本地策略或通过与远程服务进行交互来执行声明处理。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-243">Such authorization policies are known as *external authorization policies*, and they can perform claim processing based on local policy or by interaction with a remote service.</span></span> <span data-ttu-id="b0b1b-244">由类表示的授权管理器 <xref:System.ServiceModel.ServiceAuthorizationManager> 使用身份验证策略来评估外部授权策略，这些策略可识别 (令牌的各种凭据类型) 并使用适用于传入消息的声明填充所谓的 *授权上下文* 。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-244">The authorization manager, represented by the <xref:System.ServiceModel.ServiceAuthorizationManager> class evaluates external authorization policies together with authorization policies that recognize the various credential types (tokens) and populates what is called an *authorization context* with the claims appropriate to an incoming message.</span></span> <span data-ttu-id="b0b1b-245">授权上下文由 <xref:System.IdentityModel.Policy.AuthorizationContext> 类表示。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-245">The authorization context is represented by the <xref:System.IdentityModel.Policy.AuthorizationContext> class.</span></span>  
  
## <a name="identity-model-programming"></a><span data-ttu-id="b0b1b-246">标识模型编程</span><span class="sxs-lookup"><span data-stu-id="b0b1b-246">Identity Model Programming</span></span>  

 <span data-ttu-id="b0b1b-247">下表说明了用于对标识模型扩展进行编程的对象模型</span><span class="sxs-lookup"><span data-stu-id="b0b1b-247">The following table describes the object model used to program Identity Model extensions.</span></span> <span data-ttu-id="b0b1b-248">这些类全部存在于 <xref:System.IdentityModel.Policy> 或 <xref:System.IdentityModel.Claims> 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-248">These classes all exist in either the <xref:System.IdentityModel.Policy> or the <xref:System.IdentityModel.Claims> namespaces.</span></span>  
  
|<span data-ttu-id="b0b1b-249">实例</span><span class="sxs-lookup"><span data-stu-id="b0b1b-249">Class</span></span>|<span data-ttu-id="b0b1b-250">描述</span><span class="sxs-lookup"><span data-stu-id="b0b1b-250">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="b0b1b-251">授权组件</span><span class="sxs-lookup"><span data-stu-id="b0b1b-251">Authorization Component</span></span>|<span data-ttu-id="b0b1b-252">实现 <xref:System.IdentityModel.Policy.IAuthorizationComponent> 接口的标识模型类。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-252">An Identity Model class that implements the <xref:System.IdentityModel.Policy.IAuthorizationComponent> interface.</span></span>|  
|<xref:System.IdentityModel.Policy.IAuthorizationComponent>|<span data-ttu-id="b0b1b-253">提供单一只读字符串属性的接口： Id。此属性的值对于系统中实现此接口的每个实例都是唯一的。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-253">An interface that provides a single read-only string property: Id. The value of this property is unique for each instance in the system that implements this interface.</span></span>|  
|<xref:System.IdentityModel.Policy.AuthorizationContext>|<span data-ttu-id="b0b1b-254">包含 *authorization component* 一组 `ClaimSet` 具有零个或多个属性的实例的授权组件; 对一个或多个授权策略进行评估的结果。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-254">An *authorization component* that contains a set of `ClaimSet` instances with zero or more properties; the result of evaluating one or more Authorization Policies.</span></span>|  
|<xref:System.IdentityModel.Claims.Claim>|<span data-ttu-id="b0b1b-255">声明类型、权限和值的组合。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-255">A combination of a claim type, right, and value.</span></span> <span data-ttu-id="b0b1b-256">权限和值部分受声明类型约束。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-256">The right and value parts are constrained by the claim type.</span></span>|  
|<xref:System.IdentityModel.Claims.ClaimSet>|<span data-ttu-id="b0b1b-257">一个抽象基类。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-257">An abstract base class.</span></span> <span data-ttu-id="b0b1b-258">`Claim` 实例的集合。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-258">A collection of `Claim` instances.</span></span>|  
|<xref:System.IdentityModel.Claims.DefaultClaimSet>|<span data-ttu-id="b0b1b-259">一个密封类。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-259">A sealed class.</span></span> <span data-ttu-id="b0b1b-260">`ClaimSet` 类的一个实现。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-260">An implementation of the `ClaimSet` class.</span></span>|  
|<xref:System.IdentityModel.Policy.EvaluationContext>|<span data-ttu-id="b0b1b-261">一个抽象基类。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-261">An abstract base class.</span></span> <span data-ttu-id="b0b1b-262">在策略评估期间传递给授权策略。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-262">Passed to an authorization policy during policy evaluation.</span></span>|  
|<xref:System.IdentityModel.Policy.IAuthorizationPolicy>|<span data-ttu-id="b0b1b-263">派生自 `IAuthorizationComponent` 并由授权策略类实现的接口。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-263">An interface derived from `IAuthorizationComponent` and implemented by authorization policy classes.</span></span>|  
|<xref:System.IdentityModel.Claims.Rights>|<span data-ttu-id="b0b1b-264">一个静态类，包含预定义的权限值。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-264">A static class that contains predefined right values.</span></span>|  
  
 <span data-ttu-id="b0b1b-265">以下类也用于标识模型编程，但不存在于 <xref:System.IdentityModel.Policy> 或 <xref:System.IdentityModel.Claims> 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-265">The following classes are also used for Identity Model programming, but are not found in the <xref:System.IdentityModel.Policy> or <xref:System.IdentityModel.Claims> namespaces.</span></span>  
  
|<span data-ttu-id="b0b1b-266">实例</span><span class="sxs-lookup"><span data-stu-id="b0b1b-266">Class</span></span>|<span data-ttu-id="b0b1b-267">描述</span><span class="sxs-lookup"><span data-stu-id="b0b1b-267">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.ServiceModel.ServiceAuthorizationManager>|<span data-ttu-id="b0b1b-268">一个类，提供一种方法（<xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>），为服务中的每项操作执行基于声明的授权检查。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-268">A class that provides a method— <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>—to perform claim-based authorization checks for each operation in a service.</span></span> <span data-ttu-id="b0b1b-269">必须从此类派生，并重写此方法。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-269">You must derive from the class and override the method.</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior>|<span data-ttu-id="b0b1b-270">一个密封类，提供与授权有关的服务行为的各种相关属性。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-270">A sealed class that provides various properties related to the behavior of a service as it pertains to authorization.</span></span>|  
|<xref:System.ServiceModel.ServiceSecurityContext>|<span data-ttu-id="b0b1b-271">一个类，为当前正在运行（或将要运行）的操作提供安全上下文（包括授权上下文）。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-271">A class that provides security context, including authorization context, for the currently running (or about to be run) operation.</span></span> <span data-ttu-id="b0b1b-272">此类的实例是 <xref:System.ServiceModel.OperationContext> 的一部分。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-272">An instance of this class is part of the <xref:System.ServiceModel.OperationContext>.</span></span>|  
  
### <a name="significant-members"></a><span data-ttu-id="b0b1b-273">重要成员</span><span class="sxs-lookup"><span data-stu-id="b0b1b-273">Significant Members</span></span>  

 <span data-ttu-id="b0b1b-274">以下成员通常用于创建新声明类型。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-274">The following members are commonly used to create new claim types.</span></span>  
  
|<span data-ttu-id="b0b1b-275">成员</span><span class="sxs-lookup"><span data-stu-id="b0b1b-275">Member</span></span>|<span data-ttu-id="b0b1b-276">描述</span><span class="sxs-lookup"><span data-stu-id="b0b1b-276">Description</span></span>|  
|------------|-----------------|  
|<xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>|<span data-ttu-id="b0b1b-277">派生类实现此方法以在服务中运行操作之前执行基于声明的访问检查。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-277">Derived classes implement this method to perform claim-based access checks prior to running operations in a service.</span></span> <span data-ttu-id="b0b1b-278">在做出访问检查决定时，可以检查提供的 <xref:System.ServiceModel.OperationContext> 中（或其他位置）的所有信息。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-278">Any and all information in the supplied <xref:System.ServiceModel.OperationContext>, or elsewhere, can be examined when making the access check decision.</span></span> <span data-ttu-id="b0b1b-279">如果 <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> 返回 `true`，则允许进行访问和执行操作。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-279">If <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> returns `true`, then access is granted and the operation is allowed to run.</span></span> <span data-ttu-id="b0b1b-280">如果 `CheckAccessCore` 返回 `false`，则拒绝访问并且不执行操作。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-280">If `CheckAccessCore` returns `false`, then access is denied and the operation does not run.</span></span> <span data-ttu-id="b0b1b-281">有关示例，请参阅 [如何：为服务创建自定义授权管理器](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md)。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-281">For an example, see [How to: Create a Custom Authorization Manager for a Service](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md).</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.ServiceAuthorizationManager%2A>|<span data-ttu-id="b0b1b-282">返回服务的 <xref:System.ServiceModel.ServiceAuthorizationManager>。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-282">Returns the <xref:System.ServiceModel.ServiceAuthorizationManager> for the service.</span></span> <span data-ttu-id="b0b1b-283"><xref:System.ServiceModel.ServiceAuthorizationManager> 负责做出授权决定。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-283">The <xref:System.ServiceModel.ServiceAuthorizationManager> is responsible for making authorization decisions.</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.ExternalAuthorizationPolicies%2A>|<span data-ttu-id="b0b1b-284">为服务指定的自定义授权策略的集合。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-284">The collection of custom authorization policies specified for the service.</span></span> <span data-ttu-id="b0b1b-285">除了评估与传入消息中的凭据关联的策略外，还评估这些策略。</span><span class="sxs-lookup"><span data-stu-id="b0b1b-285">These policies are evaluated in addition to those policies associated with credentials in incoming messages.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="b0b1b-286">另请参阅</span><span class="sxs-lookup"><span data-stu-id="b0b1b-286">See also</span></span>

- <xref:System.IdentityModel.Policy.AuthorizationContext>
- <xref:System.IdentityModel.Claims.Claim>
- <xref:System.IdentityModel.Policy.EvaluationContext>
- <xref:System.IdentityModel.Policy.IAuthorizationComponent>
- <xref:System.IdentityModel.Policy.IAuthorizationPolicy>
- <xref:System.IdentityModel.Claims.Rights>
- <xref:System.IdentityModel.Claims>
- <xref:System.IdentityModel.Policy>
- <xref:System.IdentityModel.Tokens>
- <xref:System.IdentityModel.Selectors>
- [<span data-ttu-id="b0b1b-287">声明和令牌</span><span class="sxs-lookup"><span data-stu-id="b0b1b-287">Claims and Tokens</span></span>](claims-and-tokens.md)
- [<span data-ttu-id="b0b1b-288">声明和拒绝访问资源</span><span class="sxs-lookup"><span data-stu-id="b0b1b-288">Claims and Denying Access to Resources</span></span>](claims-and-denying-access-to-resources.md)
- [<span data-ttu-id="b0b1b-289">声明创建和资源值</span><span class="sxs-lookup"><span data-stu-id="b0b1b-289">Claim Creation and Resource Values</span></span>](claim-creation-and-resource-values.md)
- [<span data-ttu-id="b0b1b-290">如何：创建自定义声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-290">How to: Create a Custom Claim</span></span>](../extending/how-to-create-a-custom-claim.md)
- [<span data-ttu-id="b0b1b-291">如何：比较声明</span><span class="sxs-lookup"><span data-stu-id="b0b1b-291">How to: Compare Claims</span></span>](../extending/how-to-compare-claims.md)
- [<span data-ttu-id="b0b1b-292">如何：创建自定义授权策略</span><span class="sxs-lookup"><span data-stu-id="b0b1b-292">How to: Create a Custom Authorization Policy</span></span>](../extending/how-to-create-a-custom-authorization-policy.md)
- [<span data-ttu-id="b0b1b-293">如何：为服务创建自定义授权管理器</span><span class="sxs-lookup"><span data-stu-id="b0b1b-293">How to: Create a Custom Authorization Manager for a Service</span></span>](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md)
- [<span data-ttu-id="b0b1b-294">安全性概述</span><span class="sxs-lookup"><span data-stu-id="b0b1b-294">Security Overview</span></span>](security-overview.md)
- [<span data-ttu-id="b0b1b-295">授权</span><span class="sxs-lookup"><span data-stu-id="b0b1b-295">Authorization</span></span>](authorization-in-wcf.md)
