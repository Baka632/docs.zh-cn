---
title: 拒绝服务
ms.date: 03/30/2017
helpviewer_keywords:
- denial of service [WCF]
ms.assetid: dfb150f3-d598-4697-a5e6-6779e4f9b600
ms.openlocfilehash: 6bf0dd8af32f50164138092684c4b82f12134718
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/26/2020
ms.locfileid: "96291591"
---
# <a name="denial-of-service"></a><span data-ttu-id="d3e2a-102">拒绝服务</span><span class="sxs-lookup"><span data-stu-id="d3e2a-102">Denial of Service</span></span>

<span data-ttu-id="d3e2a-103">当系统处于过载状态而无法处理消息或者处理速度极慢时，会出现拒绝服务的情况。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-103">Denial of service occurs when a system is overwhelmed in such a way that messages cannot be processed, or they are processed extremely slowly.</span></span>  
  
## <a name="excess-memory-consumption"></a><span data-ttu-id="d3e2a-104">过量占用内存</span><span class="sxs-lookup"><span data-stu-id="d3e2a-104">Excess Memory Consumption</span></span>  

 <span data-ttu-id="d3e2a-105">如果读取的 XML 文档具有大量唯一的本地名称、命名空间或前缀，则可能会出现问题。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-105">A problem can occur when reading an XML document with a large number of unique local names, namespaces, or prefixes.</span></span> <span data-ttu-id="d3e2a-106">如果使用的是从 <xref:System.Xml.XmlReader> 派生的类，并针对每一项调用了 <xref:System.Xml.XmlReader.LocalName%2A>、<xref:System.Xml.XmlReader.Prefix%2A> 或 <xref:System.Xml.XmlReader.NamespaceURI%2A> 属性，则返回的字符串将添加到 <xref:System.Xml.NameTable> 中。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-106">If you are using a class that derives from <xref:System.Xml.XmlReader>, and you call either the <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> or <xref:System.Xml.XmlReader.NamespaceURI%2A> property for each item, the returned string is added to a <xref:System.Xml.NameTable>.</span></span> <span data-ttu-id="d3e2a-107"><xref:System.Xml.NameTable> 包含的集合的大小绝不会减小，它会创建字符串句柄的虚拟“内存泄漏”。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-107">The collection held by the <xref:System.Xml.NameTable> never decreases in size, creating a virtual "memory leak" of the string handles.</span></span>  
  
 <span data-ttu-id="d3e2a-108">缓解措施包括：</span><span class="sxs-lookup"><span data-stu-id="d3e2a-108">Mitigations include:</span></span>  
  
- <span data-ttu-id="d3e2a-109">从 <xref:System.Xml.NameTable> 类派生并实施最大大小配额。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-109">Derive from the <xref:System.Xml.NameTable> class and enforce a maximum size quota.</span></span> <span data-ttu-id="d3e2a-110">（当 <xref:System.Xml.NameTable> 已满时，将无法阻止使用或切换 <xref:System.Xml.NameTable>。）</span><span class="sxs-lookup"><span data-stu-id="d3e2a-110">(You cannot prevent the use of a <xref:System.Xml.NameTable> or switch the <xref:System.Xml.NameTable> when it is full.)</span></span>  
  
- <span data-ttu-id="d3e2a-111">避免使用所提到的这些属性，而是尽可能将 <xref:System.Xml.XmlReader.MoveToAttribute%2A> 方法与 <xref:System.Xml.XmlReader.IsStartElement%2A> 方法结合使用；这些方法不返回字符串，从而可以避免过度填充 <xref:System.Xml.NameTable> 集合的问题。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-111">Avoid using the properties mentioned and instead use the <xref:System.Xml.XmlReader.MoveToAttribute%2A> method with the <xref:System.Xml.XmlReader.IsStartElement%2A> method where possible; those methods do not return strings and thus avoid the problem of overfilling the <xref:System.Xml.NameTable> collection.</span></span>  
  
## <a name="malicious-client-sends-excessive-license-requests-to-service"></a><span data-ttu-id="d3e2a-112">恶意客户端向服务发送过多的许可证请求</span><span class="sxs-lookup"><span data-stu-id="d3e2a-112">Malicious Client Sends Excessive License Requests to Service</span></span>  

 <span data-ttu-id="d3e2a-113">如果恶意客户端通过过多的许可证请求来攻击某个服务，则可能会致使服务器占用过量的内存。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-113">If a malicious client bombards a service with excessive license requests, it can cause the server to use excessive memory.</span></span>  
  
 <span data-ttu-id="d3e2a-114">缓解：使用 <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> 类的下列属性：</span><span class="sxs-lookup"><span data-stu-id="d3e2a-114">Mitigation: Use the following properties of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> class:</span></span>  
  
- <span data-ttu-id="d3e2a-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>：控制在 `SecurityContextToken` 或 `SPNego` 协商之后服务器所缓存的有时限的 `SSL` 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controls the maximum number of time-bounded `SecurityContextToken`s that the server caches after `SPNego` or `SSL` negotiation.</span></span>  
  
- <span data-ttu-id="d3e2a-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>：控制在 `SecurityContextTokens` 或 `SPNego` 协商之后服务器所颁发的 `SSL` 的生存期。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controls the lifetime of the `SecurityContextTokens` that the server issues following `SPNego` or `SSL` negotiation.</span></span> <span data-ttu-id="d3e2a-117">在此时间期限内，服务器将缓存 `SecurityContextToken`。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-117">The server caches the `SecurityContextToken`s for this period of time.</span></span>  
  
- <span data-ttu-id="d3e2a-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>：控制在服务器上建立但尚未针为其处理任何应用程序消息的安全对话的最大数目。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.</span></span> <span data-ttu-id="d3e2a-119">此配额可防止客户端在服务上建立安全对话从而致使服务维护每个客户端的状态，但是从不使用这些状态。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-119">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
- <span data-ttu-id="d3e2a-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>：控制服务使安全对话保持活动状态（而不接收来自对话客户端的应用程序消息）的最长时间。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>:  controls the maximum time the service keeps a secure conversation alive without receiving an application message from the client for the conversation.</span></span> <span data-ttu-id="d3e2a-121">此配额可防止客户端在服务上建立安全对话从而致使服务维护每个客户端的状态，但是从不使用这些状态。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-121">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
## <a name="wsdualhttpbinding-or-dual-custom-bindings-require-client-authentication"></a><span data-ttu-id="d3e2a-122">WSDualHttpBinding 或双向自定义绑定要求客户端身份验证</span><span class="sxs-lookup"><span data-stu-id="d3e2a-122">WSDualHttpBinding or Dual Custom Bindings Require Client Authentication</span></span>  

 <span data-ttu-id="d3e2a-123">默认情况下，<xref:System.ServiceModel.WSDualHttpBinding> 会启用安全性。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-123">By default, the <xref:System.ServiceModel.WSDualHttpBinding> has security enabled.</span></span> <span data-ttu-id="d3e2a-124">但是，如果通过将 <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> 属性设置为 <xref:System.ServiceModel.MessageCredentialType.None> 而禁用客户端身份验证，则恶意用户可能会致使针对第三个服务进行拒绝服务攻击。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-124">It is possible, however, that if the client authentication is disabled by setting the <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> property to <xref:System.ServiceModel.MessageCredentialType.None>, a malicious user can cause a denial of service attack on a third service.</span></span> <span data-ttu-id="d3e2a-125">发生此问题的原因在于，恶意客户端可能会指示服务向第三个服务发送消息流。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-125">This can occur because a malicious client can direct the service to send a stream of messages to a third service.</span></span>  
  
 <span data-ttu-id="d3e2a-126">为了缓解此问题，请不要将该属性设置为 `None`。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-126">To mitigate this, do not set the property to `None`.</span></span> <span data-ttu-id="d3e2a-127">另请注意，在创建具有双向消息模式的自定义绑定时也可能出现此问题。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-127">Also be aware of this possibility when creating a custom binding that has a dual message pattern.</span></span>  
  
## <a name="auditing-event-log-can-be-filled"></a><span data-ttu-id="d3e2a-128">可以填充审核事件日志</span><span class="sxs-lookup"><span data-stu-id="d3e2a-128">Auditing Event Log Can Be Filled</span></span>  

 <span data-ttu-id="d3e2a-129">如果恶意用户了解到审核功能处于启用状态，则该攻击者可能会发送导致写入审核项的无效消息。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-129">If a malicious user understands that auditing is enabled, that attacker can send invalid messages that cause audit entries to be written.</span></span> <span data-ttu-id="d3e2a-130">如果以这种方式填充审核日志，则审核系统会出现故障。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-130">If the audit log is filled in this manner, the auditing system fails.</span></span>  
  
 <span data-ttu-id="d3e2a-131">为了缓解此问题，请将 <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> 属性设置为 `true`，然后使用事件查看器的属性来控制审核行为。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-131">To mitigate this, set the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> property to `true` and use the properties of the Event Viewer to control the auditing behavior.</span></span> <span data-ttu-id="d3e2a-132">有关使用事件查看器查看和管理事件日志的详细信息，请参阅 [事件查看器](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc766042(v=ws.11))。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-132">For more information about using the Event Viewer to view and manage event logs, see [Event Viewer](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc766042(v=ws.11)).</span></span> <span data-ttu-id="d3e2a-133">有关详细信息，请参阅 [审核](auditing-security-events.md)。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-133">For more information, see [Auditing](auditing-security-events.md).</span></span>  
  
## <a name="invalid-implementations-of-iauthorizationpolicy-can-cause-service-to-become-unresponsive"></a><span data-ttu-id="d3e2a-134">无效的 IAuthorizationPolicy 实现会导致服务无法响应</span><span class="sxs-lookup"><span data-stu-id="d3e2a-134">Invalid Implementations of IAuthorizationPolicy Can Cause Service to Become Unresponsive</span></span>  

 <span data-ttu-id="d3e2a-135"><xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A>对接口的错误实现调用方法 <xref:System.IdentityModel.Policy.IAuthorizationPolicy> 可能会导致服务无法响应。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-135">Calling the <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> method on a faulty implementation of the <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface can cause the service to become unresponsive.</span></span>  
  
 <span data-ttu-id="d3e2a-136">缓解：仅使用受信任的代码。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-136">Mitigation: Use only trusted code.</span></span> <span data-ttu-id="d3e2a-137">即，仅使用在编写后经过测试的代码或者来自受信任提供者的代码。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-137">That is, use only code that you have written and tested, or that comes from a trusted provider.</span></span> <span data-ttu-id="d3e2a-138">未经深思熟虑，请勿允许在代码中插入对 <xref:System.IdentityModel.Policy.IAuthorizationPolicy> 的不受信任的扩展。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-138">Do not allow untrusted extensions of <xref:System.IdentityModel.Policy.IAuthorizationPolicy> to be plugged into your code without due consideration.</span></span> <span data-ttu-id="d3e2a-139">这适用于服务实现中所使用的全部扩展。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-139">This applies to all extensions used in a service implementation.</span></span> <span data-ttu-id="d3e2a-140">WCF 不会对使用扩展点插入的应用程序代码和外接程序代码进行任何区分。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-140">WCF does not make any distinction between application code and foreign code that is plugged in using extensibility points.</span></span>  
  
## <a name="kerberos-maximum-token-size-may-need-resizing"></a><span data-ttu-id="d3e2a-141">可能需要调整最大 Kerberos 令牌大小</span><span class="sxs-lookup"><span data-stu-id="d3e2a-141">Kerberos Maximum Token Size May Need Resizing</span></span>  

 <span data-ttu-id="d3e2a-142">如果客户端属于许多组（大约 900 个，尽管实际数字因组的数目而异），则可能会在消息头的块超过 64 KB 时出现问题。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-142">If a client belongs to a large number of groups (approximately 900, although the actual number varies depending on the groups), a problem may occur when a message header's block exceeds 64 kilobytes.</span></span> <span data-ttu-id="d3e2a-143">在这种情况下，可以增加 Kerberos 令牌的最大大小。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-143">In that case, you can increase the maximum Kerberos token size.</span></span> <span data-ttu-id="d3e2a-144">你可能还需要增加最大 WCF 消息大小以容纳更大的 Kerberos 令牌。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-144">You may also need to increase the maximum WCF message size to accommodate the larger Kerberos token.</span></span>  
  
## <a name="autoenrollment-results-in-multiple-certificates-with-same-subject-name-for-machine"></a><span data-ttu-id="d3e2a-145">自动注册功能会为计算机生成多个具有相同主题名称的证书</span><span class="sxs-lookup"><span data-stu-id="d3e2a-145">Autoenrollment Results in Multiple Certificates with Same Subject Name for Machine</span></span>  

 <span data-ttu-id="d3e2a-146">自动 *注册* 是 Windows Server 2003 的一种功能，用于自动注册用户和计算机的证书。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-146">*Autoenrollment* is the capability of Windows Server 2003 to automatically enroll users and computers for certificates.</span></span> <span data-ttu-id="d3e2a-147">如果计算机处于启用了该功能的域中，那么，每当有新计算机加入网络中时，都会自动创建一个既定目的为客户端身份验证的 X.509 证书，并将其插入本地计算机的“个人”证书存储区。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-147">When a machine is on a domain with the feature enabled, an X.509 certificate with the intended purpose of client authentication is automatically created and inserted into the local computer's Personal certificates store whenever a new machine is joined to the network.</span></span> <span data-ttu-id="d3e2a-148">但是，自动注册功能对它在缓存中创建的所有证书使用同一主题名称。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-148">However, autoenrollment uses the same subject name for all certificates it creates in the cache.</span></span>  
  
 <span data-ttu-id="d3e2a-149">影响是 WCF 服务可能无法在具有自动注册功能的域上打开。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-149">The impact is that WCF services may fail to open on domains with autoenrollment.</span></span> <span data-ttu-id="d3e2a-150">出现此问题的原因在于，有多个证书具有计算机的完全限定域名系统 (DNS) 名称，从而使得默认的服务 X.509 凭据搜索条件可能会不明确。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-150">This occurs because the default service X.509 credential search criteria might be ambiguous because multiple certificates with the machine's fully qualified Domain Name System (DNS) name exist.</span></span> <span data-ttu-id="d3e2a-151">一个证书源于自动注册功能；而另一个可能是自行颁发的证书。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-151">One certificate originates from autoenrollment; the other might be a self-issued certificate.</span></span>  
  
 <span data-ttu-id="d3e2a-152">若要缓解这种情况，请通过在上使用更精确的搜索条件来引用要使用的确切证书 [\<serviceCredentials>](../../configure-apps/file-schema/wcf/servicecredentials.md) 。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-152">To mitigate this, reference the exact certificate to use by using a more precise search criterion on the [\<serviceCredentials>](../../configure-apps/file-schema/wcf/servicecredentials.md).</span></span> <span data-ttu-id="d3e2a-153">例如，使用 <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> 选项并按照证书的唯一指纹（哈希）来指定证书。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-153">For example, use the <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> option, and specify the certificate by its unique thumbprint (hash).</span></span>  
  
 <span data-ttu-id="d3e2a-154">有关自动注册功能的详细信息，请参阅 [Windows Server 2003 中的证书自动注册](/previous-versions/windows/it-pro/windows-server-2003/cc778954(v=ws.10))。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-154">For more information about the autoenrollment feature, see [Certificate Autoenrollment in Windows Server 2003](/previous-versions/windows/it-pro/windows-server-2003/cc778954(v=ws.10)).</span></span>  
  
## <a name="last-of-multiple-alternative-subject-names-used-for-authorization"></a><span data-ttu-id="d3e2a-155">用于授权的多个备选主题名称中的最后一个</span><span class="sxs-lookup"><span data-stu-id="d3e2a-155">Last of Multiple Alternative Subject Names Used for Authorization</span></span>  

 <span data-ttu-id="d3e2a-156">在极少数情况下，如果 X.509 证书包含多个备选主题名称，并且您使用备选主题名称进行授权，则授权可能会失败。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-156">In the rare case when an X.509 certificate contains multiple alternative subject names, and you authorize using the alternative subject name, authorization may fail.</span></span>  
  
## <a name="protect-configuration-files-with-acls"></a><span data-ttu-id="d3e2a-157">使用 ACL 保护配置文件</span><span class="sxs-lookup"><span data-stu-id="d3e2a-157">Protect Configuration Files with ACLs</span></span>  

 <span data-ttu-id="d3e2a-158">可以在代码和配置文件中为 CardSpace 颁发的令牌指定必需的和可选的声明。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-158">You can specify required and optional claims in code and configuration files for CardSpace issued tokens.</span></span> <span data-ttu-id="d3e2a-159">这会导致在发送到安全令牌服务的 `RequestSecurityToken` 消息中发出相应的元素。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-159">This results in corresponding elements being emitted in `RequestSecurityToken` messages that are sent to the security token service.</span></span> <span data-ttu-id="d3e2a-160">攻击者可能会通过修改代码或配置来移除必需的或可选的声明，从而可能会让安全令牌服务颁发不允许访问目标服务的令牌。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-160">An attacker can modify code or configuration to remove required or optional claims, potentially getting the security token service to issue a token that does not allow access to the target service.</span></span>  
  
 <span data-ttu-id="d3e2a-161">缓解措施：要求具有访问计算机的权限才能修改配置文件。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-161">To mitigate: Require access to the computer to modify the configuration file.</span></span> <span data-ttu-id="d3e2a-162">使用文件访问控制列表 (ACL) 来保护配置文件。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-162">Use file access control lists (ACLs) to secure configuration files.</span></span> <span data-ttu-id="d3e2a-163">WCF 要求代码位于应用程序目录或全局程序集缓存中，然后才允许从配置加载此类代码。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-163">WCF requires that code be in the application directory or the global assembly cache before it will allow such code to be loaded from configuration.</span></span> <span data-ttu-id="d3e2a-164">使用目录 ACL 可以保护目录。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-164">Use directory ACLs to secure directories.</span></span>  
  
## <a name="maximum-number-of-secure-sessions-for-a-service-is-reached"></a><span data-ttu-id="d3e2a-165">达到了服务安全会话的最大数目</span><span class="sxs-lookup"><span data-stu-id="d3e2a-165">Maximum Number of Secure Sessions for a Service Is Reached</span></span>  

 <span data-ttu-id="d3e2a-166">当客户端由某个服务成功进行身份验证，而且与此服务建立了安全会话时，此服务会记住该会话，直到该会话被客户端取消或者过期。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-166">When a client is successfully authenticated by a service and a secure session is established with the service, the service keeps track of the session until the client cancels it or the session expires.</span></span> <span data-ttu-id="d3e2a-167">对于建立的每个会话都将进行计数，直到达到与该服务的同时活动会话的最大数目限制。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-167">Every established session counts against the limit for the maximum number of active simultaneous sessions with a service.</span></span> <span data-ttu-id="d3e2a-168">达到该限制时，尝试与该服务创建新会话的客户端将被拒绝，直到一个或多个活动会话过期或者被客户端取消。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-168">When this limit is reached, clients that attempt to create a new session with that service are rejected until one or more active sessions expire or are canceled by a client.</span></span> <span data-ttu-id="d3e2a-169">一个客户端可以与某个服务建立多个会话，对于每个会话都将计数，直到达到相应的限制。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-169">A client can have multiple sessions with a service, and each one of those sessions counts toward the limit.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="d3e2a-170">在使用有状态会话时，上述内容并不适用。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-170">When you use stateful sessions, the previous paragraph does not apply.</span></span> <span data-ttu-id="d3e2a-171">有关有状态会话的详细信息，请参阅 [如何：为安全会话创建安全上下文令牌](how-to-create-a-security-context-token-for-a-secure-session.md)。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-171">For more information about stateful sessions, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
 <span data-ttu-id="d3e2a-172">若要缓解此问题，请通过设置 <xref:System.ServiceModel.Channels.SecurityBindingElement> 类的 <xref:System.ServiceModel.Channels.SecurityBindingElement> 属性来设置活动会话的最大数目限制以及会话的最长生存期限制。</span><span class="sxs-lookup"><span data-stu-id="d3e2a-172">To mitigate this, set the limit for the maximum number of active sessions and the maximum lifetime for a session by setting the <xref:System.ServiceModel.Channels.SecurityBindingElement> property of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d3e2a-173">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d3e2a-173">See also</span></span>

- [<span data-ttu-id="d3e2a-174">安全注意事项</span><span class="sxs-lookup"><span data-stu-id="d3e2a-174">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="d3e2a-175">信息泄露</span><span class="sxs-lookup"><span data-stu-id="d3e2a-175">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="d3e2a-176">权限提升</span><span class="sxs-lookup"><span data-stu-id="d3e2a-176">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="d3e2a-177">拒绝服务</span><span class="sxs-lookup"><span data-stu-id="d3e2a-177">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="d3e2a-178">重播攻击</span><span class="sxs-lookup"><span data-stu-id="d3e2a-178">Replay Attacks</span></span>](replay-attacks.md)
- [<span data-ttu-id="d3e2a-179">篡改</span><span class="sxs-lookup"><span data-stu-id="d3e2a-179">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="d3e2a-180">不支持的方案</span><span class="sxs-lookup"><span data-stu-id="d3e2a-180">Unsupported Scenarios</span></span>](unsupported-scenarios.md)
