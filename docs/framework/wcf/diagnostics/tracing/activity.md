---
title: 活动
ms.date: 03/30/2017
ms.assetid: 70471705-f55f-4da1-919f-4b580f172665
ms.openlocfilehash: 96d89a69071a90a81ead7d594eb495c5d0cdfc63
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/26/2020
ms.locfileid: "96254449"
---
# <a name="activity"></a><span data-ttu-id="a9e0d-102">活动</span><span class="sxs-lookup"><span data-stu-id="a9e0d-102">Activity</span></span>

<span data-ttu-id="a9e0d-103">本主题介绍 Windows Communication Foundation (WCF) 跟踪模型中的活动跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-103">This topic describes activity traces in the Windows Communication Foundation (WCF) tracing model.</span></span> <span data-ttu-id="a9e0d-104">活动是帮助用户缩小故障范围的处理单位。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-104">Activities are processing units that help the user narrow down the scope of a failure.</span></span> <span data-ttu-id="a9e0d-105">在同一活动中发生的错误直接相关。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-105">Errors that occur in the same activity are directly related.</span></span> <span data-ttu-id="a9e0d-106">例如，消息解密失败可导致操作失败。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-106">For example, an operation fails because message decryption has failed.</span></span> <span data-ttu-id="a9e0d-107">操作失败和消息解密失败的跟踪出现在同一活动中，表明解密错误和请求错误之间直接相关。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-107">The traces for both the operation and message decryption failure appear in the same activity, showing direct correlation between the decryption error and the request error.</span></span>  
  
## <a name="configuring-activity-tracing"></a><span data-ttu-id="a9e0d-108">配置活动跟踪</span><span class="sxs-lookup"><span data-stu-id="a9e0d-108">Configuring Activity Tracing</span></span>  

 <span data-ttu-id="a9e0d-109">WCF 提供了用于处理应用程序的预定义活动 (参阅 [活动列表](activity-list.md)) 。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-109">WCF provides pre-defined activities for processing applications (see [Activity List](activity-list.md)).</span></span> <span data-ttu-id="a9e0d-110">您还可以用编程方式定义活动，以便对用户跟踪进行分组。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-110">You can also define activities programmatically to group user traces.</span></span> <span data-ttu-id="a9e0d-111">有关详细信息，请参阅 [发出 User-Code 跟踪](emitting-user-code-traces.md)。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-111">For more information, see [Emitting User-Code Traces](emitting-user-code-traces.md).</span></span>  
  
 <span data-ttu-id="a9e0d-112">若要在运行时发出活动跟踪，请使用 `ActivityTracing` `System.ServiceModel` 跟踪源或其他 WCF 或自定义跟踪源的设置，如下面的配置代码所示。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-112">To emit activity traces at run time, use the `ActivityTracing` setting for the `System.ServiceModel` trace source, or other WCF or custom trace sources, as demonstrated by the following configuration code.</span></span>  
  
```xml  
<source name="System.ServiceModel" switchValue="Verbose,ActivityTracing">  
```  
  
 <span data-ttu-id="a9e0d-113">若要了解有关所使用的配置元素和属性的详细信息，请参阅 [配置跟踪](configuring-tracing.md) 主题。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-113">To understand more about the configuration element and attributes being used, see the [Configuring Tracing](configuring-tracing.md) topic.</span></span>  
  
## <a name="viewing-activities"></a><span data-ttu-id="a9e0d-114">查看活动</span><span class="sxs-lookup"><span data-stu-id="a9e0d-114">Viewing Activities</span></span>  

 <span data-ttu-id="a9e0d-115">可以在 [服务跟踪查看器工具 ](../../service-trace-viewer-tool-svctraceviewer-exe.md)中查看活动及其实用程序 ( # A0) 。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-115">You can view the activities and their utility in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md).</span></span> <span data-ttu-id="a9e0d-116">启用 ActivityTracing 后，此工具将获得跟踪并基于活动对它们进行分类。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-116">When ActivityTracing is enabled, this tool takes the traces and sorts them based on activity.</span></span> <span data-ttu-id="a9e0d-117">您还可以查看跟踪传输。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-117">You can also see trace transfers.</span></span> <span data-ttu-id="a9e0d-118">跟踪传输指示不同的活动如何互相关联。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-118">A trace transfer indicates how different activities are related to each other.</span></span> <span data-ttu-id="a9e0d-119">您可以看到某个特定活动导致另外一个活动启动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-119">You can see that a particular activity caused another to start.</span></span> <span data-ttu-id="a9e0d-120">例如，消息请求可启动安全握手以获取安全对话令牌。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-120">For example, a message request started a security handshake to get a Secure Conversation Token.</span></span>  
  
### <a name="correlating-activities-in-service-trace-viewer"></a><span data-ttu-id="a9e0d-121">在服务跟踪查看器中关联活动</span><span class="sxs-lookup"><span data-stu-id="a9e0d-121">Correlating Activities in Service Trace Viewer</span></span>  

 <span data-ttu-id="a9e0d-122">服务跟踪查看器工具提供了两个活动视图：</span><span class="sxs-lookup"><span data-stu-id="a9e0d-122">The Service Trace Viewer tool provides two views of activities:</span></span>  
  
- <span data-ttu-id="a9e0d-123">**列表** 视图，其中活动 ID 用于在进程之间直接关联跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-123">**List** view, where the activity ID is used to directly correlate traces across processes.</span></span> <span data-ttu-id="a9e0d-124">来自不同进程（例如客户端和服务）但具有相同活动 ID 的跟踪被分组到同一活动中。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-124">Traces from different processes, for example, client and service, but with the same activity ID are grouped in the same activity.</span></span> <span data-ttu-id="a9e0d-125">因此，如果在服务上发生一个错误，然后该错误又导致客户端上发生错误，那么这两个错误都将出现在该工具的同一活动视图中。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-125">Therefore, an error occurring on the service which then causes an error on the client will both show up in the same activity view in the tool.</span></span>  
  
- <span data-ttu-id="a9e0d-126">**关系图** 视图，其中活动按进程分组。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-126">**Graph** view, where activities are grouped by processes.</span></span> <span data-ttu-id="a9e0d-127">在此视图中，具有相同活动 ID 的客户端和服务的跟踪位于不同的活动中。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-127">In this view, a client and service with the same activity ID have their traces in different activities.</span></span> <span data-ttu-id="a9e0d-128">为了将位于不同进程但具有相同活动 ID 的活动相互关联，该工具显示了跨越相关活动的消息流。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-128">To correlate activities with the same activity ID in different processes, the tool shows message flows across the related activities.</span></span>  
  
 <span data-ttu-id="a9e0d-129">有关详细信息，以及若要查看服务跟踪查看器工具的图形视图，请参阅 [服务跟踪查看器工具 ( # A0) ](../../service-trace-viewer-tool-svctraceviewer-exe.md) 并 [使用服务跟踪查看器查看相关跟踪和故障排除](using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-129">For more information, and to see a graphical view of the Service Trace Viewer tool, see [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md) and [Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md).</span></span>  
  
## <a name="defining-the-scope-of-an-activity"></a><span data-ttu-id="a9e0d-130">定义活动范围</span><span class="sxs-lookup"><span data-stu-id="a9e0d-130">Defining the Scope of an Activity</span></span>  

 <span data-ttu-id="a9e0d-131">活动是在设计时定义的，并且表示一个逻辑工作单元。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-131">An activity is defined at design time and denotes a logical unit of work.</span></span> <span data-ttu-id="a9e0d-132">所发出的具有相同活动标识符的跟踪直接相关，它们都属于同一个活动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-132">Emitted traces with the same activity identifier are directly related, they are part of the same activity.</span></span> <span data-ttu-id="a9e0d-133">因为一个活动可能跨越终结点边界（请求），所以为活动定义两个范围。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-133">Because an activity can cross endpoint boundaries (a request), two scopes for an activity are defined.</span></span>  
  
- <span data-ttu-id="a9e0d-134">`Global` 范围，限于每个应用程序。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-134">`Global` scope, per application.</span></span> <span data-ttu-id="a9e0d-135">在此范围中，活动由其 128 位全局唯一活动标识符 gAId 进行标识。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-135">In this scope, the activity is identified by its 128-bit globally unique activity identifier, the gAId.</span></span> <span data-ttu-id="a9e0d-136">gAid 是跨越终结点传播的内容。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-136">The gAid is what is propagated across endpoints.</span></span>  
  
- <span data-ttu-id="a9e0d-137">以终结点为边界的 `Local` 范围。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-137">`Local` scope, per endpoint.</span></span> <span data-ttu-id="a9e0d-138">在此范围中，活动由其 gAId 标识，以及发出活动跟踪的跟踪源名称和进程 Id。此三元构成了本地活动 id。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-138">In this scope, the activity is identified by its gAId, along with the trace source name emitting the activity traces and the process Id. This triplet constitutes the local activity id, lAId.</span></span> <span data-ttu-id="a9e0d-139">lAId 用于定义活动的（本地）边界。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-139">The lAId is used to define the (local) boundaries of an activity.</span></span>  
  
## <a name="trace-schema"></a><span data-ttu-id="a9e0d-140">跟踪架构</span><span class="sxs-lookup"><span data-stu-id="a9e0d-140">Trace Schema</span></span>  

 <span data-ttu-id="a9e0d-141">可以使用任何架构以及跨 Microsoft 平台发出跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-141">Traces can be emitted using any schema, and across Microsoft platforms.</span></span> <span data-ttu-id="a9e0d-142">"端到端" ("e2e" ) 是一种常用的架构。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-142">"e2e" (for "End to End") is a commonly used schema.</span></span> <span data-ttu-id="a9e0d-143">此架构包含一个 128 位标识符 (gAId)、跟踪源名称和进程 ID。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-143">This schema includes a 128 bit identifier (gAId), the trace source name, and process ID.</span></span> <span data-ttu-id="a9e0d-144">在托管代码中，<xref:System.Diagnostics.XmlWriterTraceListener> 可在 E2E 架构中发出跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-144">In managed code, <xref:System.Diagnostics.XmlWriterTraceListener> emits traces in the E2E schema.</span></span>  
  
 <span data-ttu-id="a9e0d-145">开发人员可以通过使用线程本地存储 (TLS) 上的 Guid 设置 <xref:System.Diagnostics.CorrelationManager.ActivityId%2A> 属性来设置随跟踪发出的 AID。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-145">Developers can set the AID that is emitted with a trace by setting the <xref:System.Diagnostics.CorrelationManager.ActivityId%2A> property with a Guid on Thread Local Storage (TLS).</span></span> <span data-ttu-id="a9e0d-146">下面的示例演示这一操作。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-146">The following example demonstrates this.</span></span>  
  
```csharp
// set the current Activity ID to a new GUID.  
CorrelationManager.ActivityId = Guid.NewGuid();  
```
  
 <span data-ttu-id="a9e0d-147">使用跟踪源发出跟踪时，设置 TLS 中的 gAId 非常简单，如下面的示例所示。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-147">Setting the gAId in TLS will be evident when traces are emitted using a trace source, as shown by the following example.</span></span>  
  
```csharp
TraceSource traceSource = new TraceSource("myTraceSource");  
traceSource.TraceEvent(TraceEventType.Warning, eventId, "Information");  
```  
  
 <span data-ttu-id="a9e0d-148">发出的跟踪将包含当前 TLS 中的 gAId、作为参数传递给跟踪源构造函数的跟踪源名称和当前进程的 ID。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-148">The trace emitted will contain the gAId currently in TLS, the trace source name passed as a parameter to the trace source’s constructor, and the current process’s ID.</span></span>  
  
## <a name="activity-lifetime"></a><span data-ttu-id="a9e0d-149">活动生存期</span><span class="sxs-lookup"><span data-stu-id="a9e0d-149">Activity Lifetime</span></span>  

 <span data-ttu-id="a9e0d-150">用最严格的术语表述，活动的证据从第一次在发出的跟踪中使用活动 ID 时开始，到最后一次在发出的跟踪中使用活动 ID 时结束。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-150">In strictest terms, evidence of an activity starts the first time the activity ID is used in an emitted trace, and ends the last time it is used in an emitted trace.</span></span> <span data-ttu-id="a9e0d-151"><xref:System.Diagnostics> 提供了一组预定义的跟踪类型（包括“开始”和“停止”），以便显式标记活动生存期边界。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-151">A predefined set of trace types are provided by <xref:System.Diagnostics>, including Start and Stop, to explicitly mark the activity lifetime boundaries.</span></span>  
  
- <span data-ttu-id="a9e0d-152">开始：指示活动开始。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-152">Start: Indicates the beginning of an activity.</span></span> <span data-ttu-id="a9e0d-153">"开始" 跟踪提供开始新处理里程碑的记录。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-153">A "Start" trace provides a record of beginning a new processing milestone.</span></span> <span data-ttu-id="a9e0d-154">它包含给定进程中给定跟踪源的新活动 ID，但是，当活动 ID 跨越终结点传播时除外 — 在这种情况下，我们会在每个终结点中看到一个“开始”跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-154">It contains a new activity ID for a given trace source in a given process, except when the activity ID is propagated across endpoints, in which case we see one "Start" per endpoint.</span></span> <span data-ttu-id="a9e0d-155">开始新活动的示例包括创建新的处理线程或进入新的公共方法。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-155">Examples of starting a new activity include creating a new thread for processing, or entering a new public method.</span></span>  
  
- <span data-ttu-id="a9e0d-156">停止：指示活动结束。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-156">Stop: Indicates the end of an activity.</span></span> <span data-ttu-id="a9e0d-157">"停止" 跟踪提供结束现有处理里程碑的记录。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-157">A "Stop" trace provides a record of ending an existing processing milestone.</span></span> <span data-ttu-id="a9e0d-158">它包含给定进程中给定跟踪源的现有活动 ID，但在终结点之间传播活动 ID 时除外。在这种情况下，我们会在每个终结点中看到一个“停止”跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-158">It contains an existing activity ID for a given trace source in a given process, except when the activity ID is propagated across endpoints, in which case we see one "Stop" per endpoint.</span></span>  <span data-ttu-id="a9e0d-159">停止活动的示例包括终止处理线程，或退出其开头以 "Start" 跟踪表示的方法。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-159">Examples of stopping an activity include terminating a processing thread, or exiting a method whose beginning was denoted with a "Start" trace.</span></span>  
  
- <span data-ttu-id="a9e0d-160">挂起：指示活动的处理已挂起。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-160">Suspend: Indicates suspension of processing of an activity.</span></span> <span data-ttu-id="a9e0d-161">"挂起" 跟踪包含一个现有活动 ID，其处理应在以后恢复。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-161">A "Suspend" trace contains an existing activity ID whose processing is expected to resume at a later time.</span></span> <span data-ttu-id="a9e0d-162">在“挂起”和“恢复”事件之间，不会从当前跟踪源发出具有此 ID 的跟踪。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-162">No traces are emitted with this ID between the Suspend and Resume events from the current trace source.</span></span> <span data-ttu-id="a9e0d-163">示例包括调用外部库函数或等待资源（如 I/O 完成端口）时暂停一个活动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-163">Examples include pausing an activity when calling into an external library function, or when waiting on a resource such as an I/O completion port.</span></span>  
  
- <span data-ttu-id="a9e0d-164">恢复：指示继续处理活动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-164">Resume: Indicates the resumption of processing of an activity.</span></span> <span data-ttu-id="a9e0d-165">"Resume" 跟踪包含其上次从当前跟踪源发出的跟踪为 "挂起" 跟踪的现有活动 id。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-165">A "Resume" trace contains an existing activity id whose last emitted trace from the current trace source was a "Suspend" trace.</span></span> <span data-ttu-id="a9e0d-166">示例包括从对外部库函数的调用返回或发出让资源（如 I/O 完成端口）恢复处理的信号。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-166">Examples include returning from a call to an external library function, or when signaled to resume processing by a resource such as an I/O completion port.</span></span>  
  
- <span data-ttu-id="a9e0d-167">传输：由于某些活动由其他某些活动或与其他活动相关，因此活动可以通过 "传输" 跟踪与其他活动相关。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-167">Transfer: Because some activities are caused by others, or relate to others, activities can be related to other activities through "Transfer" traces.</span></span> <span data-ttu-id="a9e0d-168">转换跟踪记录了活动之间的定向关系。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-168">A transfer records the directed relationship of one activity to another</span></span>  
  
 <span data-ttu-id="a9e0d-169">“开始”和“停止”跟踪并不是关联所必需的。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-169">Start and Stop traces are not critical for correlation.</span></span> <span data-ttu-id="a9e0d-170">然而，它们可以帮助提高性能、分析和验证活动范围。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-170">However, they can help in increasing performance, profiling, and activity scope validation.</span></span>  
  
 <span data-ttu-id="a9e0d-171">使用这些类型时，工具可以优化跟踪日志的导航以查找同一活动的直接相关事件，或者如果工具追踪传输跟踪，可查找相关活动中的事件。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-171">Using these types, the tools can optimize navigating the trace logs to find the immediately related events of the same activity, or events in related activities if the tool follows transfer traces.</span></span> <span data-ttu-id="a9e0d-172">例如，当工具遇到开始/停止跟踪时，将停止分析给定活动的日志。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-172">For example, the tools will stop parsing the logs for a given activity when they see a Start/Stop trace.</span></span>  
  
 <span data-ttu-id="a9e0d-173">这些跟踪类型也可以用于分析。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-173">These trace types can also be used for profiling.</span></span> <span data-ttu-id="a9e0d-174">在开始和停止标记之间消耗的资源表示活动的全部时间，包括所包含的逻辑活动时间。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-174">Resources consumed between the start and stop markers represent the activity’s inclusive time including contained logical activities.</span></span> <span data-ttu-id="a9e0d-175">减去“挂起”和“恢复”跟踪之间的时间间隔就得到实际活动时间。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-175">Subtracting the time intervals between the Suspend and Resume traces provides the actual activity time.</span></span>  
  
 <span data-ttu-id="a9e0d-176">“停止”跟踪还对验证已实现活动的范围特别有用。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-176">The Stop trace is also particularly useful for validating the scope of the implemented activities.</span></span> <span data-ttu-id="a9e0d-177">如果某些处理跟踪出现在停止跟踪之后，而不是出现在给定活动之内，这可能暗示代码有缺陷。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-177">If some processing traces appear after the Stop trace instead of inside a given activity, this can suggests code defect.</span></span>  
  
## <a name="guidelines-for-using-activity-tracing"></a><span data-ttu-id="a9e0d-178">活动跟踪使用指南</span><span class="sxs-lookup"><span data-stu-id="a9e0d-178">Guidelines for Using Activity Tracing</span></span>  

 <span data-ttu-id="a9e0d-179">以下是使用 ActivityTracing 跟踪（开始、停止、挂起、恢复和转换）的指南。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-179">The following is a guideline of using ActivityTracing traces (Start, Stop, Suspend, Resume, and Transfer).</span></span>  
  
- <span data-ttu-id="a9e0d-180">跟踪是一个定向循环图，而不是树。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-180">Tracing is a directed cyclic graph, not a tree.</span></span> <span data-ttu-id="a9e0d-181">可以将控制返回到生成活动的活动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-181">You can return control to an activity which spawned an activity.</span></span>  
  
- <span data-ttu-id="a9e0d-182">活动表示一个处理边界，该边界对于系统管理员可能很有意义，或者可以用来实现可支持性。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-182">An activity denotes a processing boundary which can be meaningful to the administrator of the system or for supportability.</span></span>  
  
- <span data-ttu-id="a9e0d-183">客户端和服务器上的每个 WCF 方法都是通过开始一个新活动来界定的，然后在工作完成后 () 结束新活动并返回到环境活动。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-183">Each WCF method, both on the client and server, is bounded by beginning a new activity, then (after work is done) ending the new activity and returning to the ambient activity.</span></span>  
  
- <span data-ttu-id="a9e0d-184">长时间运行（正在运行）的活动（例如，侦听连接或等待消息）由相应的开始/停止标记表示。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-184">Long running (ongoing) activities such as listening for connections or waiting for messages are represented by corresponding start/stop markers.</span></span>  
  
- <span data-ttu-id="a9e0d-185">由接收或处理消息触发的活动由跟踪边界来表示。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-185">Activities triggered by the receipt or processing of a message are represented by trace boundaries.</span></span>  
  
- <span data-ttu-id="a9e0d-186">活动表示的是活动本身，而未必是对象。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-186">Activities represent activities, not necessarily objects.</span></span> <span data-ttu-id="a9e0d-187">活动应解释为 "发生此情况。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-187">An activity should be interpreted as "this was happening when .</span></span> <span data-ttu-id="a9e0d-188">.</span><span class="sxs-lookup"><span data-stu-id="a9e0d-188">.</span></span> <span data-ttu-id="a9e0d-189">.</span><span class="sxs-lookup"><span data-stu-id="a9e0d-189">.</span></span> <span data-ttu-id="a9e0d-190">（发出有意义的跟踪）时发生的”。</span><span class="sxs-lookup"><span data-stu-id="a9e0d-190">(meaningful trace emission occurred)."</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a9e0d-191">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a9e0d-191">See also</span></span>

- [<span data-ttu-id="a9e0d-192">配置跟踪</span><span class="sxs-lookup"><span data-stu-id="a9e0d-192">Configuring Tracing</span></span>](configuring-tracing.md)
- [<span data-ttu-id="a9e0d-193">使用服务跟踪查看器查看相关跟踪和进行故障诊断</span><span class="sxs-lookup"><span data-stu-id="a9e0d-193">Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting</span></span>](using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)
- [<span data-ttu-id="a9e0d-194">端到端跟踪方案</span><span class="sxs-lookup"><span data-stu-id="a9e0d-194">End-To-End Tracing Scenarios</span></span>](end-to-end-tracing-scenarios.md)
- [<span data-ttu-id="a9e0d-195">服务跟踪查看器工具 (SvcTraceViewer.exe)</span><span class="sxs-lookup"><span data-stu-id="a9e0d-195">Service Trace Viewer Tool (SvcTraceViewer.exe)</span></span>](../../service-trace-viewer-tool-svctraceviewer-exe.md)
- [<span data-ttu-id="a9e0d-196">发出用户代码跟踪</span><span class="sxs-lookup"><span data-stu-id="a9e0d-196">Emitting User-Code Traces</span></span>](emitting-user-code-traces.md)
