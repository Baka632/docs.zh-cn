---
title: 承载服务
description: 了解 WCF 服务的宿主选项。 服务必须承载于创建它并控制其上下文和生存期的运行时环境中。
ms.date: 03/30/2017
helpviewer_keywords:
- hosting services [WCF]
ms.assetid: 192be927-6be2-4fda-98f0-e513c4881acc
ms.openlocfilehash: 41a7a3e651d234de4079455a667df670d6c7435d
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/26/2020
ms.locfileid: "96294646"
---
# <a name="hosting-services"></a><span data-ttu-id="5ee28-104">托管服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-104">Hosting services</span></span>

<span data-ttu-id="5ee28-105">要变为活动状态，服务必须承载于创建它并控制它的上下文和生存期的运行时环境中。</span><span class="sxs-lookup"><span data-stu-id="5ee28-105">To become active, a service must be hosted within a run-time environment that creates it and controls its context and lifetime.</span></span> <span data-ttu-id="5ee28-106">Windows Communication Foundation (WCF) 服务设计为在支持托管代码的任意 Windows 进程中运行。</span><span class="sxs-lookup"><span data-stu-id="5ee28-106">Windows Communication Foundation (WCF) services are designed to run in any Windows process that supports managed code.</span></span>

<span data-ttu-id="5ee28-107">WCF 提供了一个统一的编程模型，用于生成面向服务的应用程序。</span><span class="sxs-lookup"><span data-stu-id="5ee28-107">WCF provides a unified programming model for building service-oriented applications.</span></span> <span data-ttu-id="5ee28-108">此编程模型保持一致且独立于部署服务的运行时环境。</span><span class="sxs-lookup"><span data-stu-id="5ee28-108">This programming model remains consistent and is independent of the run-time environment in which the service is deployed.</span></span> <span data-ttu-id="5ee28-109">实际上，这意味着不管使用什么宿主选项，服务的代码看起来都非常类似。</span><span class="sxs-lookup"><span data-stu-id="5ee28-109">In practice, this means that the code for your services looks much the same whatever the hosting option.</span></span>

<span data-ttu-id="5ee28-110">这些宿主选项的范围是从在控制台应用程序内运行到在服务器环境（如在由 Internet 信息服务 (IIS) 或由 Windows 进程激活服务 (WAS) 管理的工作进程内运行的 Windows 服务）中运行。</span><span class="sxs-lookup"><span data-stu-id="5ee28-110">These hosting options range from running inside a console application to server environments such as a Windows service running within a worker process managed by Internet Information Services (IIS) or by Windows Process Activation Service (WAS).</span></span> <span data-ttu-id="5ee28-111">开发人员选择可满足服务的部署要求的宿主环境。</span><span class="sxs-lookup"><span data-stu-id="5ee28-111">Developers choose the hosting environment that satisfies the service's deployment requirements.</span></span> <span data-ttu-id="5ee28-112">这些要求可能源自部署应用程序的平台，它必须发送和接收消息的传输，或者进程回收的类型和为确保足够可用性所需的其他进程管理，或者某些其他管理或可靠性要求。</span><span class="sxs-lookup"><span data-stu-id="5ee28-112">These requirements might derive from the platform on which the application is deployed, the transport on which it must send and receive messages, or on the type of process recycling and other process management required to ensure adequate availability, or on some other management or reliability requirements.</span></span> <span data-ttu-id="5ee28-113">下一节提供了有关宿主选项的信息和指南。</span><span class="sxs-lookup"><span data-stu-id="5ee28-113">The next section provides information and guidance on hosting options.</span></span>

## <a name="hosting-options"></a><span data-ttu-id="5ee28-114">托管选项</span><span class="sxs-lookup"><span data-stu-id="5ee28-114">Hosting options</span></span>

### <a name="self-host-in-a-managed-application"></a><span data-ttu-id="5ee28-115">在托管应用程序中 Self-Host</span><span class="sxs-lookup"><span data-stu-id="5ee28-115">Self-Host in a Managed Application</span></span>

 <span data-ttu-id="5ee28-116">WCF 服务可承载于任何托管应用程序中。</span><span class="sxs-lookup"><span data-stu-id="5ee28-116">WCF services can be hosted in any managed application.</span></span> <span data-ttu-id="5ee28-117">这是最灵活的选项，因为它需要部署最少的基础结构。</span><span class="sxs-lookup"><span data-stu-id="5ee28-117">This is the most flexible option because it requires the least infrastructure to deploy.</span></span> <span data-ttu-id="5ee28-118">在托管应用程序代码内嵌入服务代码，然后创建并打开 <xref:System.ServiceModel.ServiceHost> 的实例以使服务变为可用。</span><span class="sxs-lookup"><span data-stu-id="5ee28-118">You embed the code for the service inside the managed application code and then create and open an instance of the <xref:System.ServiceModel.ServiceHost> to make the service available.</span></span> <span data-ttu-id="5ee28-119">有关详细信息，请参阅 [如何：在托管应用程序中托管 WCF 服务](how-to-host-a-wcf-service-in-a-managed-application.md)。</span><span class="sxs-lookup"><span data-stu-id="5ee28-119">For more information, see [How to: Host a WCF Service in a Managed Application](how-to-host-a-wcf-service-in-a-managed-application.md).</span></span>

 <span data-ttu-id="5ee28-120">此选项可实现两个常见方案：在控制台应用程序中运行的 WCF 服务和丰富的客户端应用程序，例如基于 Windows Presentation Foundation (WPF) 或 Windows 窗体 (WinForms) 。</span><span class="sxs-lookup"><span data-stu-id="5ee28-120">This option enables two common scenarios: WCF services running inside console applications and rich client applications such as those based on Windows Presentation Foundation (WPF) or Windows Forms (WinForms).</span></span> <span data-ttu-id="5ee28-121">在控制台应用程序内承载 WCF 服务通常在应用程序的开发阶段非常有用。</span><span class="sxs-lookup"><span data-stu-id="5ee28-121">Hosting a WCF service inside a console application is typically useful during the application's development phase.</span></span> <span data-ttu-id="5ee28-122">这使服务变得容易调试，从中跟踪信息以查明应用程序内发生的情况变得更加方便，以及通过将其复制到新的位置进行来回移动变得更加轻松。</span><span class="sxs-lookup"><span data-stu-id="5ee28-122">This makes them easy to debug, easy to get trace information from to find out what is happening inside of the application, and easy to move around by copying them to new locations.</span></span> <span data-ttu-id="5ee28-123">此宿主选项还使丰富的客户端应用程序（如 WPF 和 WinForms 应用程序）可以方便地与外界通信。</span><span class="sxs-lookup"><span data-stu-id="5ee28-123">This hosting option also makes it easy for rich client applications, such as WPF and WinForms applications, to communicate with the outside world.</span></span> <span data-ttu-id="5ee28-124">例如，对等协作客户端使用 WPF 作为其用户界面并托管 WCF 服务，该服务允许其他客户端连接到它并共享信息。</span><span class="sxs-lookup"><span data-stu-id="5ee28-124">For example, a peer-to-peer collaboration client that uses WPF for its user interface and also hosts a WCF service that allows other clients to connect to it and share information.</span></span>

### <a name="managed-windows-services"></a><span data-ttu-id="5ee28-125">托管 Windows 服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-125">Managed Windows Services</span></span>

<span data-ttu-id="5ee28-126">此宿主选项包括注册作为托管 Windows (服务（以前称为 NT) 服务）承载 WCF 服务的应用程序域 (AppDomain) ，以便服务的进程生存期由 Windows 服务的服务控制管理器 (SCM) 控制。</span><span class="sxs-lookup"><span data-stu-id="5ee28-126">This hosting option consists of registering the application domain (AppDomain) that hosts a WCF service as a managed Windows Service (formerly known as NT service) so that the process lifetime of the service is controlled by the service control manager (SCM) for Windows services.</span></span> <span data-ttu-id="5ee28-127">与自承载选项一样，此类型的宿主环境要求作为应用程序的一部分编写某些宿主代码。</span><span class="sxs-lookup"><span data-stu-id="5ee28-127">Like the self-hosting option, this type of hosting environment requires that some hosting code is written as part of the application.</span></span> <span data-ttu-id="5ee28-128">通过使服务从 <xref:System.ServiceProcess.ServiceBase> 类以及从 WCF 服务协定接口继承，将该服务同时实现为 Windows 服务和 wcf 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-128">The service is implemented as both a Windows Service and as a WCF service by causing it to inherit from the <xref:System.ServiceProcess.ServiceBase> class as well as from a WCF service contract interface.</span></span> <span data-ttu-id="5ee28-129">然后创建 <xref:System.ServiceModel.ServiceHost> ，在被重写的 <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> 方法内打开它并在被重写的 <xref:System.ServiceProcess.ServiceBase.OnStop> 方法内关闭它。</span><span class="sxs-lookup"><span data-stu-id="5ee28-129">The <xref:System.ServiceModel.ServiceHost> is then created and opened within an overridden <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> method and closed within an overridden <xref:System.ServiceProcess.ServiceBase.OnStop> method.</span></span> <span data-ttu-id="5ee28-130">还必须实现从 <xref:System.Configuration.Install.Installer> 继承的安装程序类，以允许 Installutil.exe 工具将程序安装为 Windows 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-130">An installer class that inherits from <xref:System.Configuration.Install.Installer> must also be implemented to allow the program to be installed as a Windows Service by the Installutil.exe tool.</span></span> <span data-ttu-id="5ee28-131">有关详细信息，请参阅 [如何：在托管 Windows 服务中承载 WCF 服务](./feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)。</span><span class="sxs-lookup"><span data-stu-id="5ee28-131">For more information, see [How to: Host a WCF Service in a Managed Windows Service](./feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md).</span></span> <span data-ttu-id="5ee28-132">托管 Windows 服务宿主选项启用的方案是在非消息激活的安全环境中，在 IIS 外部承载的长时间运行的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-132">The scenario enabled by the managed Windows Service hosting option is that of a long-running WCF service hosted outside of IIS in a secure environment that is not message-activated.</span></span> <span data-ttu-id="5ee28-133">服务的生存期改由操作系统控制。</span><span class="sxs-lookup"><span data-stu-id="5ee28-133">The lifetime of the service is controlled instead by the operating system.</span></span> <span data-ttu-id="5ee28-134">此宿主选项在 Windows 的所有版本中都是可用的。</span><span class="sxs-lookup"><span data-stu-id="5ee28-134">This hosting option is available in all versions of Windows.</span></span>

### <a name="internet-information-services-iis"></a><span data-ttu-id="5ee28-135">Internet Information Services (IIS)</span><span class="sxs-lookup"><span data-stu-id="5ee28-135">Internet Information Services (IIS)</span></span>

<span data-ttu-id="5ee28-136">IIS 托管选项与 ASP.NET 集成，并使用这些技术提供的功能，如进程回收、空闲关闭、进程运行状况监视和基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="5ee28-136">The IIS hosting option is integrated with ASP.NET and uses the features these technologies offer, such as process recycling, idle shutdown, process health monitoring, and message-based activation.</span></span> <span data-ttu-id="5ee28-137">在 Windows XP 和 Windows Server 2003 操作系统上，这是用于托管必须高度可用且高度可缩放的 Web 服务应用程序的首选解决方案。</span><span class="sxs-lookup"><span data-stu-id="5ee28-137">On the Windows XP and Windows Server 2003 operating systems, this is the preferred solution for hosting Web service applications that must be highly available and highly scalable.</span></span> <span data-ttu-id="5ee28-138">IIS 还提供了客户期望企业级服务器产品具有的集成可管理性。</span><span class="sxs-lookup"><span data-stu-id="5ee28-138">IIS also offers the integrated manageability that customers expect from an enterprise-class server product.</span></span> <span data-ttu-id="5ee28-139">此宿主选项要求正确配置 IIS，但不需要编写任何承载代码作为应用程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="5ee28-139">This hosting option requires that IIS be properly configured, but it does not require that any hosting code be written as part of the application.</span></span> <span data-ttu-id="5ee28-140">有关如何为 WCF 服务配置 IIS 托管的详细信息，请参阅 [如何：在 iis 中承载 Wcf 服务](./feature-details/how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="5ee28-140">For more information about how to configure IIS hosting for a WCF service, see [How to: Host a WCF Service in IIS](./feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>

 <span data-ttu-id="5ee28-141">承载于 IIS 中的服务只能使用 HTTP 传输。</span><span class="sxs-lookup"><span data-stu-id="5ee28-141">IIS-hosted services can only use the HTTP transport.</span></span> <span data-ttu-id="5ee28-142">在 IIS 5.1 中，它的实现在 Windows XP 中引入了一些限制。</span><span class="sxs-lookup"><span data-stu-id="5ee28-142">Its implementation in IIS 5.1 has introduced some limitations in Windows XP.</span></span> <span data-ttu-id="5ee28-143">Windows XP 上的 IIS 5.1 为 WCF 服务提供的基于消息的激活会阻止同一计算机上任何其他自承载的 WCF 服务使用端口80进行通信。</span><span class="sxs-lookup"><span data-stu-id="5ee28-143">The message-based activation provided for a WCF service by IIS 5.1 on Windows XP blocks any other self-hosted WCF service on the same computer from using port 80 to communicate.</span></span> <span data-ttu-id="5ee28-144">当 Windows Server 2003 上的 IIS 6.0 承载时，WCF 服务可以在与其他应用程序相同的 AppDomain/应用程序池/工作进程中运行。</span><span class="sxs-lookup"><span data-stu-id="5ee28-144">WCF services can run in the same AppDomain/Application Pool/Worker Process as other applications when hosted by IIS 6.0 on Windows Server 2003.</span></span> <span data-ttu-id="5ee28-145">但是，因为 WCF 和 IIS 6.0 都使用内核模式 HTTP 堆栈 ( # A0) ，所以 IIS 6.0 可以与在同一台计算机上运行的其他自承载 WCF 服务共享端口80，与 IIS 5.1 不同。</span><span class="sxs-lookup"><span data-stu-id="5ee28-145">But because WCF and IIS 6.0 both use the kernel-mode HTTP stack (HTTP.sys), IIS 6.0 can share port 80 with other self-hosted WCF services running on the same machine, unlike IIS 5.1.</span></span>

### <a name="windows-process-activation-service-was"></a><span data-ttu-id="5ee28-146">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="5ee28-146">Windows Process Activation Service (WAS)</span></span>

<span data-ttu-id="5ee28-147">Windows 进程激活服务 () 是 windows Vista 上也提供的 Windows Server 2008 的新进程激活机制。</span><span class="sxs-lookup"><span data-stu-id="5ee28-147">Windows Process Activation Service (WAS) is the new process activation mechanism for the Windows Server 2008 that is also available on Windows Vista.</span></span> <span data-ttu-id="5ee28-148">它保留了熟悉的 IIS 6.0 进程模型 (应用程序池和基于消息的进程激活) 和托管 (功能，如快速故障保护、运行状况监视和回收) ，但它从激活体系结构中消除了对 HTTP 的依赖。</span><span class="sxs-lookup"><span data-stu-id="5ee28-148">It retains the familiar IIS 6.0 process model (application pools and message-based process activation) and hosting features (such as rapid failure protection, health monitoring, and recycling), but it removes the dependency on HTTP from the activation architecture.</span></span> <span data-ttu-id="5ee28-149">IIS 7.0 使用 WAS 通过 HTTP 实现基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="5ee28-149">IIS 7.0 uses WAS to accomplish message-based activation over HTTP.</span></span> <span data-ttu-id="5ee28-150">另外，还可以将其他 WCF 组件插入到中，以基于 WCF 支持的其他协议（如 TCP、MSMQ 和命名管道）提供基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="5ee28-150">Additional WCF components also plug into WAS to provide message-based activation over the other protocols that WCF supports, such as TCP, MSMQ, and named pipes.</span></span> <span data-ttu-id="5ee28-151">这样，使用通信协议的应用程序就可以使用 IIS 功能（如进程回收、快速失败保护）和仅对基于 HTTP 的应用程序可用的通用配置系统。</span><span class="sxs-lookup"><span data-stu-id="5ee28-151">This allows applications that use communication protocols to use the IIS features such as process recycling, rapid fail protection, and the common configuration system that were only available to HTTP-based applications.</span></span>

 <span data-ttu-id="5ee28-152">此承载选项要求正确配置 WAS，但不需要编写任何承载代码作为应用程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="5ee28-152">This hosting option requires that WAS be properly configured, but it does not require you to write any hosting code as part of the application.</span></span> <span data-ttu-id="5ee28-153">有关如何配置 WAS 托管的详细信息，请参阅 [如何：在 WAS 中承载 WCF 服务](./feature-details/how-to-host-a-wcf-service-in-was.md)。</span><span class="sxs-lookup"><span data-stu-id="5ee28-153">For more information about how to configure WAS hosting, see [How to: Host a WCF Service in WAS](./feature-details/how-to-host-a-wcf-service-in-was.md).</span></span>

## <a name="choose-a-hosting-environment"></a><span data-ttu-id="5ee28-154">选择宿主环境</span><span class="sxs-lookup"><span data-stu-id="5ee28-154">Choose a Hosting Environment</span></span>

 <span data-ttu-id="5ee28-155">下表汇总了与每个宿主选项关联的一些主要优点和方案。</span><span class="sxs-lookup"><span data-stu-id="5ee28-155">The following table summarizes some of the key benefits and scenarios associated with each of the hosting options.</span></span>

|<span data-ttu-id="5ee28-156">宿主环境</span><span class="sxs-lookup"><span data-stu-id="5ee28-156">Hosting Environment</span></span>|<span data-ttu-id="5ee28-157">常见方案</span><span class="sxs-lookup"><span data-stu-id="5ee28-157">Common Scenarios</span></span>|<span data-ttu-id="5ee28-158">主要优点和限制</span><span class="sxs-lookup"><span data-stu-id="5ee28-158">Key Benefits and Limitations</span></span>|
|-------------------------|----------------------|----------------------------------|
|<span data-ttu-id="5ee28-159">托管应用程序（“自承载”）</span><span class="sxs-lookup"><span data-stu-id="5ee28-159">Managed Application ("Self-Hosted")</span></span>|<span data-ttu-id="5ee28-160">-开发期间使用的控制台应用程序。</span><span class="sxs-lookup"><span data-stu-id="5ee28-160">-   Console applications used during development.</span></span><br /><span data-ttu-id="5ee28-161">-丰富的 WinForm 和 WPF 客户端应用程序访问服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-161">-   Rich WinForm and WPF client applications accessing services.</span></span>|<span data-ttu-id="5ee28-162">可伸缩.</span><span class="sxs-lookup"><span data-stu-id="5ee28-162">-   Flexible.</span></span><br /><span data-ttu-id="5ee28-163">-易于部署。</span><span class="sxs-lookup"><span data-stu-id="5ee28-163">-   Easy to deploy.</span></span><br /><span data-ttu-id="5ee28-164">-不是服务的企业解决方案。</span><span class="sxs-lookup"><span data-stu-id="5ee28-164">-   Not an enterprise solution for services.</span></span>|
|<span data-ttu-id="5ee28-165">Windows 服务（以前称为 NT 服务）</span><span class="sxs-lookup"><span data-stu-id="5ee28-165">Windows Services (formerly known as NT services)</span></span>|<span data-ttu-id="5ee28-166">-在 IIS 外部承载的长时间运行的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-166">-   A long-running WCF service hosted outside of IIS.</span></span>|<span data-ttu-id="5ee28-167">-由操作系统控制的服务进程生存期，未激活消息。</span><span class="sxs-lookup"><span data-stu-id="5ee28-167">-   Service process lifetime controlled by the operating system, not message-activated.</span></span><br /><span data-ttu-id="5ee28-168">-受 Windows 的所有版本支持。</span><span class="sxs-lookup"><span data-stu-id="5ee28-168">-   Supported by all versions of Windows.</span></span><br /><span data-ttu-id="5ee28-169">-安全环境。</span><span class="sxs-lookup"><span data-stu-id="5ee28-169">-   Secure environment.</span></span>|
|<span data-ttu-id="5ee28-170">IIS 5.1、IIS 6。0</span><span class="sxs-lookup"><span data-stu-id="5ee28-170">IIS 5.1, IIS 6.0</span></span>|<span data-ttu-id="5ee28-171">-使用 HTTP 协议在 Internet 上并行运行 WCF 服务和 ASP.NET 内容。</span><span class="sxs-lookup"><span data-stu-id="5ee28-171">-   Running a WCF service side-by-side with ASP.NET content on the Internet using the HTTP protocol.</span></span>|<span data-ttu-id="5ee28-172">-进程回收。</span><span class="sxs-lookup"><span data-stu-id="5ee28-172">-   Process recycling.</span></span><br /><span data-ttu-id="5ee28-173">-空闲关机。</span><span class="sxs-lookup"><span data-stu-id="5ee28-173">-   Idle shutdown.</span></span><br /><span data-ttu-id="5ee28-174">-进程运行状况监视。</span><span class="sxs-lookup"><span data-stu-id="5ee28-174">-   Process health monitoring.</span></span><br /><span data-ttu-id="5ee28-175">-基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="5ee28-175">-   Message-based activation.</span></span><br /><span data-ttu-id="5ee28-176">-仅限 HTTP。</span><span class="sxs-lookup"><span data-stu-id="5ee28-176">-   HTTP only.</span></span>|
|<span data-ttu-id="5ee28-177">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="5ee28-177">Windows Process Activation Service (WAS)</span></span>|<span data-ttu-id="5ee28-178">-在未使用各种传输协议在 Internet 上安装 IIS 的情况下运行 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-178">-   Running a WCF service without installing IIS on the Internet using various transport protocols.</span></span>|<span data-ttu-id="5ee28-179">-不需要 IIS。</span><span class="sxs-lookup"><span data-stu-id="5ee28-179">-   IIS is not required.</span></span><br /><span data-ttu-id="5ee28-180">-进程回收。</span><span class="sxs-lookup"><span data-stu-id="5ee28-180">-   Process recycling.</span></span><br /><span data-ttu-id="5ee28-181">-空闲关机。</span><span class="sxs-lookup"><span data-stu-id="5ee28-181">-   Idle shutdown.</span></span><br /><span data-ttu-id="5ee28-182">-进程运行状况监视。</span><span class="sxs-lookup"><span data-stu-id="5ee28-182">-   Process health monitoring.</span></span><br /><span data-ttu-id="5ee28-183">-基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="5ee28-183">-   Message-based activation.</span></span><br /><span data-ttu-id="5ee28-184">-适用于 HTTP、TCP、命名管道和 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="5ee28-184">-   Works with HTTP, TCP, named pipes, and MSMQ.</span></span>|
|<span data-ttu-id="5ee28-185">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="5ee28-185">IIS 7.0</span></span>|<span data-ttu-id="5ee28-186">-运行包含 ASP.NET 内容的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-186">-   Running a WCF service with ASP.NET content.</span></span><br /><span data-ttu-id="5ee28-187">-使用各种传输协议在 Internet 上运行 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="5ee28-187">-   Running a WCF service on the Internet using various transport protocols.</span></span>|<span data-ttu-id="5ee28-188">-是有益的。</span><span class="sxs-lookup"><span data-stu-id="5ee28-188">-   WAS benefits.</span></span><br /><span data-ttu-id="5ee28-189">-与 ASP.NET 和 IIS 内容集成。</span><span class="sxs-lookup"><span data-stu-id="5ee28-189">-   Integrated with ASP.NET and IIS content.</span></span>|

 <span data-ttu-id="5ee28-190">宿主环境的选择取决于部署它的 Windows 版本、它要求发送消息的传输以及它要求的进程和应用程序域回收的类型。</span><span class="sxs-lookup"><span data-stu-id="5ee28-190">The choice of a hosting environment depends on the version of Windows on which it is deployed, the transports it requires to send messages and the type of process and application domain recycling it requires.</span></span> <span data-ttu-id="5ee28-191">下表汇总了与这些要求相关的数据。</span><span class="sxs-lookup"><span data-stu-id="5ee28-191">The following table summarizes the data related to these requirements.</span></span>

|<span data-ttu-id="5ee28-192">宿主环境</span><span class="sxs-lookup"><span data-stu-id="5ee28-192">Hosting Environment</span></span>|<span data-ttu-id="5ee28-193">平台可用性</span><span class="sxs-lookup"><span data-stu-id="5ee28-193">Platform Availability</span></span>|<span data-ttu-id="5ee28-194">支持的传输</span><span class="sxs-lookup"><span data-stu-id="5ee28-194">Transports Supported</span></span>|<span data-ttu-id="5ee28-195">进程和 AppDomain 回收</span><span class="sxs-lookup"><span data-stu-id="5ee28-195">Process and AppDomain Recycling</span></span>|
|-------------------------|---------------------------|--------------------------|-------------------------------------|
|<span data-ttu-id="5ee28-196">托管应用程序（“自承载”）</span><span class="sxs-lookup"><span data-stu-id="5ee28-196">Managed Applications ("Self-Hosted")</span></span>|<span data-ttu-id="5ee28-197">Windows XP、Windows Server 2003、Windows Vista、</span><span class="sxs-lookup"><span data-stu-id="5ee28-197">Windows XP, Windows Server 2003, Windows Vista,</span></span><br /><br /> <span data-ttu-id="5ee28-198">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="5ee28-198">Windows Server 2008</span></span>|<span data-ttu-id="5ee28-199">HTTP；</span><span class="sxs-lookup"><span data-stu-id="5ee28-199">HTTP,</span></span><br /><br /> <span data-ttu-id="5ee28-200">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="5ee28-200">net.tcp,</span></span><br /><br /> <span data-ttu-id="5ee28-201">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="5ee28-201">net.pipe,</span></span><br /><br /> <span data-ttu-id="5ee28-202">net.msmq</span><span class="sxs-lookup"><span data-stu-id="5ee28-202">net.msmq</span></span>|<span data-ttu-id="5ee28-203">否</span><span class="sxs-lookup"><span data-stu-id="5ee28-203">No</span></span>|
|<span data-ttu-id="5ee28-204">Windows 服务（以前称为 NT 服务）</span><span class="sxs-lookup"><span data-stu-id="5ee28-204">Windows Services (formerly known as NT services)</span></span>|<span data-ttu-id="5ee28-205">Windows XP、Windows Server 2003、Windows Vista、</span><span class="sxs-lookup"><span data-stu-id="5ee28-205">Windows XP, Windows Server 2003, Windows Vista,</span></span><br /><br /> <span data-ttu-id="5ee28-206">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="5ee28-206">Windows Server 2008</span></span>|<span data-ttu-id="5ee28-207">HTTP；</span><span class="sxs-lookup"><span data-stu-id="5ee28-207">HTTP,</span></span><br /><br /> <span data-ttu-id="5ee28-208">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="5ee28-208">net.tcp,</span></span><br /><br /> <span data-ttu-id="5ee28-209">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="5ee28-209">net.pipe,</span></span><br /><br /> <span data-ttu-id="5ee28-210">net.msmq</span><span class="sxs-lookup"><span data-stu-id="5ee28-210">net.msmq</span></span>|<span data-ttu-id="5ee28-211">否</span><span class="sxs-lookup"><span data-stu-id="5ee28-211">No</span></span>|
|<span data-ttu-id="5ee28-212">IIS 5.1</span><span class="sxs-lookup"><span data-stu-id="5ee28-212">IIS 5.1</span></span>|<span data-ttu-id="5ee28-213">Windows XP</span><span class="sxs-lookup"><span data-stu-id="5ee28-213">Windows XP</span></span>|<span data-ttu-id="5ee28-214">HTTP</span><span class="sxs-lookup"><span data-stu-id="5ee28-214">HTTP</span></span>|<span data-ttu-id="5ee28-215">是</span><span class="sxs-lookup"><span data-stu-id="5ee28-215">Yes</span></span>|
|<span data-ttu-id="5ee28-216">IIS 6.0</span><span class="sxs-lookup"><span data-stu-id="5ee28-216">IIS 6.0</span></span>|<span data-ttu-id="5ee28-217">Windows Server 2003</span><span class="sxs-lookup"><span data-stu-id="5ee28-217">Windows Server 2003</span></span>|<span data-ttu-id="5ee28-218">HTTP</span><span class="sxs-lookup"><span data-stu-id="5ee28-218">HTTP</span></span>|<span data-ttu-id="5ee28-219">是</span><span class="sxs-lookup"><span data-stu-id="5ee28-219">Yes</span></span>|
|<span data-ttu-id="5ee28-220">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="5ee28-220">Windows Process Activation Service (WAS)</span></span>|<span data-ttu-id="5ee28-221">Windows Vista 和 Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="5ee28-221">Windows Vista, Windows Server 2008</span></span>|<span data-ttu-id="5ee28-222">HTTP；</span><span class="sxs-lookup"><span data-stu-id="5ee28-222">HTTP,</span></span><br /><br /> <span data-ttu-id="5ee28-223">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="5ee28-223">net.tcp,</span></span><br /><br /> <span data-ttu-id="5ee28-224">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="5ee28-224">net.pipe,</span></span><br /><br /> <span data-ttu-id="5ee28-225">net.msmq</span><span class="sxs-lookup"><span data-stu-id="5ee28-225">net.msmq</span></span>|<span data-ttu-id="5ee28-226">是</span><span class="sxs-lookup"><span data-stu-id="5ee28-226">Yes</span></span>|

 <span data-ttu-id="5ee28-227">值得注意的是，从不受信任的主机运行服务或任何扩展会危害安全。</span><span class="sxs-lookup"><span data-stu-id="5ee28-227">It is important to note that running a service or any extension from an untrusted host compromises security.</span></span> <span data-ttu-id="5ee28-228">此外，在使用 <xref:System.ServiceModel.ServiceHost> 模拟功能打开时，应用程序必须确保用户不是注销，例如通过缓存 <xref:System.Security.Principal.WindowsIdentity> 用户的。</span><span class="sxs-lookup"><span data-stu-id="5ee28-228">Also, when opening a <xref:System.ServiceModel.ServiceHost> under impersonation, an application must ensure that the user is not logged off, for example by caching the <xref:System.Security.Principal.WindowsIdentity> of the user.</span></span>

## <a name="see-also"></a><span data-ttu-id="5ee28-229">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5ee28-229">See also</span></span>

- [<span data-ttu-id="5ee28-230">基本编程生命周期</span><span class="sxs-lookup"><span data-stu-id="5ee28-230">Basic Programming Lifecycle</span></span>](basic-programming-lifecycle.md)
- [<span data-ttu-id="5ee28-231">实现服务协定</span><span class="sxs-lookup"><span data-stu-id="5ee28-231">Implementing Service Contracts</span></span>](implementing-service-contracts.md)
- [<span data-ttu-id="5ee28-232">如何：在 IIS 中承载 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-232">How to: Host a WCF Service in IIS</span></span>](./feature-details/how-to-host-a-wcf-service-in-iis.md)
- [<span data-ttu-id="5ee28-233">如何：在 WAS 中承载 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-233">How to: Host a WCF Service in WAS</span></span>](./feature-details/how-to-host-a-wcf-service-in-was.md)
- [<span data-ttu-id="5ee28-234">如何：在托管 Windows 服务中承载 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-234">How to: Host a WCF Service in a Managed Windows Service</span></span>](./feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="5ee28-235">如何：在托管应用程序中承载 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="5ee28-235">How to: Host a WCF Service in a Managed Application</span></span>](how-to-host-a-wcf-service-in-a-managed-application.md)
