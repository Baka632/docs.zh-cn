---
title: 异步操作
ms.date: 03/30/2017
ms.assetid: e7d32c3c-bf78-4bfc-a357-c9e82e4a4b3c
ms.openlocfilehash: f94a33b1ff06b5433f61687b8e28096ea37b412a
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2020
ms.locfileid: "91197581"
---
# <a name="asynchronous-operations"></a><span data-ttu-id="655b7-102">异步操作</span><span class="sxs-lookup"><span data-stu-id="655b7-102">Asynchronous Operations</span></span>

<span data-ttu-id="655b7-103">某些数据库操作（例如命令执行）可能需要大量的时间才能完成。</span><span class="sxs-lookup"><span data-stu-id="655b7-103">Some database operations, such as command executions, can take significant time to complete.</span></span> <span data-ttu-id="655b7-104">在这种情况下，单线程应用程序必须阻止其他操作，并等待该命令完成后才能继续执行自己的操作。</span><span class="sxs-lookup"><span data-stu-id="655b7-104">In such a case, single-threaded applications must block other operations and wait for the command to finish before they can continue their own operations.</span></span> <span data-ttu-id="655b7-105">与此相反，通过将长时间运行的操作分配给后台线程，允许前台线程在操作过程中保持活动状态。</span><span class="sxs-lookup"><span data-stu-id="655b7-105">In contrast, being able to assign the long-running operation to a background thread allows the foreground thread to remain active throughout the operation.</span></span> <span data-ttu-id="655b7-106">例如，在 Windows 应用程序中，将长时间运行的操作委托给后台线程允许用户界面线程在执行操作期间保持响应。</span><span class="sxs-lookup"><span data-stu-id="655b7-106">In a Windows application, for example, delegating the long-running operation to a background thread allows the user interface thread to remain responsive while the operation is executing.</span></span>  
  
 <span data-ttu-id="655b7-107">.NET Framework 提供若干标准异步设计模式，开发人员可以通过这些模式充分利用后台线程并释放用户界面线程或高优先级的线程以完成其他操作。</span><span class="sxs-lookup"><span data-stu-id="655b7-107">The .NET Framework provides several standard asynchronous design patterns that developers can use to take advantage of background threads and free the user interface or high-priority threads to complete other operations.</span></span> <span data-ttu-id="655b7-108">ADO.NET 在其 <xref:System.Data.SqlClient.SqlCommand> 类中支持相同的设计模式。</span><span class="sxs-lookup"><span data-stu-id="655b7-108">ADO.NET supports these same design patterns in its <xref:System.Data.SqlClient.SqlCommand> class.</span></span> <span data-ttu-id="655b7-109">具体而言，<xref:System.Data.SqlClient.SqlCommand.BeginExecuteNonQuery%2A>、<xref:System.Data.SqlClient.SqlCommand.BeginExecuteReader%2A> 和 <xref:System.Data.SqlClient.SqlCommand.BeginExecuteXmlReader%2A> 方法与 <xref:System.Data.SqlClient.SqlCommand.EndExecuteNonQuery%2A>、<xref:System.Data.SqlClient.SqlCommand.EndExecuteReader%2A> 和 <xref:System.Data.SqlClient.SqlCommand.EndExecuteXmlReader%2A> 方法一起提供异步支持。</span><span class="sxs-lookup"><span data-stu-id="655b7-109">Specifically, the <xref:System.Data.SqlClient.SqlCommand.BeginExecuteNonQuery%2A>, <xref:System.Data.SqlClient.SqlCommand.BeginExecuteReader%2A>, and <xref:System.Data.SqlClient.SqlCommand.BeginExecuteXmlReader%2A> methods, paired with the <xref:System.Data.SqlClient.SqlCommand.EndExecuteNonQuery%2A>, <xref:System.Data.SqlClient.SqlCommand.EndExecuteReader%2A>, and <xref:System.Data.SqlClient.SqlCommand.EndExecuteXmlReader%2A> methods, provide the asynchronous support.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="655b7-110">异步编程是 .NET Framework 的核心功能，并且 ADO.NET 充分利用了标准设计模式。</span><span class="sxs-lookup"><span data-stu-id="655b7-110">Asynchronous programming is a core feature of the .NET Framework, and ADO.NET takes full advantage of the standard design patterns.</span></span> <span data-ttu-id="655b7-111">有关可供开发人员使用的不同异步技术的更多信息，请参阅[以异步方式调用同步方法](../../../../standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)。</span><span class="sxs-lookup"><span data-stu-id="655b7-111">For more information about the different asynchronous techniques available to developers, see [Calling Synchronous Methods Asynchronously](../../../../standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md).</span></span>  
  
 <span data-ttu-id="655b7-112">尽管将异步技术与 ADO.NET 功能一起使用没有什么新增的需特别注意的事项，但与 .NET Framework 的其他领域相比，很可能更多的开发人员将在 ADO.NET 中使用异步功能。</span><span class="sxs-lookup"><span data-stu-id="655b7-112">Although using asynchronous techniques with ADO.NET features does not add any special considerations, it is likely that more developers will use asynchronous features in ADO.NET than in other areas of the .NET Framework.</span></span> <span data-ttu-id="655b7-113">了解创建多线程应用程序的优缺点十分重要。</span><span class="sxs-lookup"><span data-stu-id="655b7-113">It is important to be aware of the benefits and pitfalls of creating multithreaded applications.</span></span> <span data-ttu-id="655b7-114">本部分中的示例指出了开发人员在构建合并多线程功能的应用程序时需要考虑的几个重要问题。</span><span class="sxs-lookup"><span data-stu-id="655b7-114">The examples that follow in this section point out several important issues that developers will need to take into account when building applications that incorporate multithreaded functionality.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="655b7-115">本节内容</span><span class="sxs-lookup"><span data-stu-id="655b7-115">In This Section</span></span>  

 [<span data-ttu-id="655b7-116">使用回调的 Windows 应用程序</span><span class="sxs-lookup"><span data-stu-id="655b7-116">Windows Applications Using Callbacks</span></span>](windows-applications-using-callbacks.md)  
 <span data-ttu-id="655b7-117">提供了一个示例，演示如何安全地执行异步命令，以及如何在单独线程中正确地处理与窗体及其内容的交互。</span><span class="sxs-lookup"><span data-stu-id="655b7-117">Provides an example demonstrating how to execute an asynchronous command safely, correctly handling interaction with a form and its contents from a separate thread.</span></span>  
  
 [<span data-ttu-id="655b7-118">使用等待句柄的 ASP.NET 应用程序</span><span class="sxs-lookup"><span data-stu-id="655b7-118">ASP.NET Applications Using Wait Handles</span></span>](aspnet-apps-using-wait-handles.md)  
 <span data-ttu-id="655b7-119">提供了一个示例，演示如何通过 ASP.NET 页执行多个并发命令，使用 Wait 句柄在所有命令完成时管理操作。</span><span class="sxs-lookup"><span data-stu-id="655b7-119">Provides an example demonstrating how to execute multiple concurrent commands from an ASP.NET page, using Wait handles to manage the operation at completion of all the commands.</span></span>  
  
 [<span data-ttu-id="655b7-120">在控制台应用程序中轮询</span><span class="sxs-lookup"><span data-stu-id="655b7-120">Polling in Console Applications</span></span>](polling-in-console-applications.md)  
 <span data-ttu-id="655b7-121">提供了一个示例，演示如何使用轮询等待从控制台应用程序中完成异步命令执行。</span><span class="sxs-lookup"><span data-stu-id="655b7-121">Provides an example demonstrating the use of polling to wait for the completion of an asynchronous command execution from a console application.</span></span> <span data-ttu-id="655b7-122">此方法也适用于类库或其他不带用户界面的应用程序。</span><span class="sxs-lookup"><span data-stu-id="655b7-122">This technique is also valid in a class library or other application without a user interface.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="655b7-123">请参阅</span><span class="sxs-lookup"><span data-stu-id="655b7-123">See also</span></span>

- [<span data-ttu-id="655b7-124">SQL Server 和 ADO.NET</span><span class="sxs-lookup"><span data-stu-id="655b7-124">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="655b7-125">使用异步方式调用同步方法</span><span class="sxs-lookup"><span data-stu-id="655b7-125">Calling Synchronous Methods Asynchronously</span></span>](../../../../standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)
- [<span data-ttu-id="655b7-126">ADO.NET 概述</span><span class="sxs-lookup"><span data-stu-id="655b7-126">ADO.NET Overview</span></span>](../ado-net-overview.md)
